/*
 * This file is part of Appcelerator.
 *
 * Copyright (C) 2006-2008 by Appcelerator, Inc. All Rights Reserved.
 * For more information, please visit http://www.appcelerator.org
 *
 * Appcelerator is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
$$w=window;$$d=document;$$n=navigator;$$o=Object;if(typeof Prototype=="undefined"){var msg='Required javascript library "Prototype" not found';alert(msg);throw msg}if(typeof Effect=="undefined"){var msg='Required javascript library "Scriptaculous" not found';alert(msg);throw msg}if($$o.isUndefined(window["$sl"])){$$w.$sl=function(){return Selector.findChildElements(document,$A(arguments))}}if($$o.isUndefined(window["$el"])){$$w.$el=eval('window["$"]')}var Appcelerator={};Appcelerator.Util={};Appcelerator.Browser={};Appcelerator.Compiler={};Appcelerator.Config={};Appcelerator.Core={};Appcelerator.Localization={};Appcelerator.Validator={};Appcelerator.Decorator={};Appcelerator.Module={};Appcelerator.Widget={};$$AU=Appcelerator.Util;$$AC=Appcelerator.Compiler;$$AD=Appcelerator.Decorator;$$AL=Appcelerator.Localization;$$AM=Appcelerator.Module;$$AR=Appcelerator.Core;$$AV=Appcelerator.Validator;$$AF=Appcelerator.Config;$$AB=Appcelerator.Browser;Appcelerator.Version={major:parseInt("2"),minor:parseInt("1"),revision:parseInt("2"),toString:function(){return this.major+"."+this.minor+"."+this.revision}};Appcelerator.LicenseType="GNU Public License (GPL), version 3.0 or later";Appcelerator.Copyright="Copyright (c) 2006-2008 by Appcelerator, Inc. All Rights Reserved.";Appcelerator.LicenseMessage="Appcelerator is licensed under "+Appcelerator.LicenseType;Appcelerator.Parameters=$H({});(function(){if($$w.AppceleratorConfig){Appcelerator.Config=$$w.AppceleratorConfig}else{Appcelerator.Config["cookie_check"]=false;Appcelerator.Config["browser_check"]=true;Appcelerator.Config["hide_body"]=false}var E=null;$A($$d.getElementsByTagName("script")).findAll(function(M){if(M.src&&M.src.match(/appcelerator(-debug){0,1}\.js(\?.*)?$/)){E=M.src;return true}return false}).each(function(M){Appcelerator.Parameters=$H(M.src.toQueryParams())});var L=$$w.$$d.location.href.lastIndexOf("/");if(L==$$w.$$d.location.href.length-1){Appcelerator.DocumentPath=$$w.$$d.location.href}else{Appcelerator.DocumentPath=$$w.$$d.location.href.substr(0,L);if(Appcelerator.DocumentPath.substring(Appcelerator.DocumentPath.length-1)!="/"){Appcelerator.DocumentPath=Appcelerator.DocumentPath+"/"}}if(E){L=E.lastIndexOf("/");E=E.substring(0,L);if(E!=Appcelerator.DocumentPath+"js"){L=E.lastIndexOf("/");var B=E.substring(0,L+1);if(B){Appcelerator.DocumentPath=B}}}else{Appcelerator.ScriptNotFound=true}Appcelerator.ScriptPath=Appcelerator.DocumentPath+"javascripts/";Appcelerator.ImagePath=Appcelerator.DocumentPath+"images/";Appcelerator.StylePath=Appcelerator.DocumentPath+"stylesheets/";Appcelerator.ContentPath=Appcelerator.DocumentPath+"content/";Appcelerator.ModulePath=Appcelerator.DocumentPath+"widgets/";Appcelerator.WidgetPath=Appcelerator.DocumentPath+"widgets/";Appcelerator.Parameters=Appcelerator.Parameters.merge($$w.location.href.toQueryParams());if(Appcelerator.Parameters.get("instanceid")){Appcelerator.instanceid=Appcelerator.Parameters.get("instanceid")}else{Appcelerator.instanceid=Math.round(9999*Math.random())+"-"+Math.round(999*Math.random())}var A=$$n.userAgent.toLowerCase();$$AB.isPreCompiler=(A.indexOf("Appcelerator Compiler")>-1);$$AB.isOpera=(A.indexOf("opera")>-1);$$AB.isSafari=(A.indexOf("safari")>-1);$$AB.isSafari2=false;$$AB.isIE=!!($$w.ActiveXObject);$$AB.isIE6=false;$$AB.isIE7=false;$$AB.isIE8=false;if($$AB.isIE){var H=$$n.appVersion.split("MSIE");var J=parseFloat(H[1]);$$AB.isIE6=J>=6&&J<7;$$AB.isIE7=J>=7&&J<8;$$AB.isIE8=J>=8&&J<9}if($$AB.isSafari){var C=RegExp("( applewebkit/)([^ ]+)").exec(A);if(C[2]>400&&C[2]<500){$$AB.isSafari2=true}}$$AB.isGecko=!$$AB.isSafari&&(A.indexOf("gecko")>-1);$$AB.isCamino=$$AB.isGecko&&A.indexOf("camino")>-1;$$AB.isFirefox=$$AB.isGecko&&(A.indexOf("firefox")>-1||$$AB.isCamino||A.indexOf("minefield")>-1||A.indexOf("granparadiso")>-1||A.indexOf("bonecho")>-1);$$AB.isIPhone=$$AB.isSafari&&A.indexOf("iphone")>-1;$$AB.isMozilla=$$AB.isGecko&&A.indexOf("mozilla/")>-1;$$AB.isWebkit=$$AB.isMozilla&&$$AB.isGecko&&A.indexOf("applewebkit")>0;$$AB.isSeamonkey=$$AB.isMozilla&&A.indexOf("seamonkey")>-1;$$AB.isPrism=$$AB.isMozilla&&A.indexOf("prism/")>0;$$AB.isIceweasel=$$AB.isMozilla&&A.indexOf("iceweasel")>0;$$AB.isEpiphany=$$AB.isMozilla&&A.indexOf("epiphany")>0;$$AB.isWindows=false;$$AB.isMac=false;$$AB.isLinux=false;$$AB.isSunOS=false;if(A.indexOf("windows")!=-1||A.indexOf("win32")!=-1){$$AB.isWindows=true}else{if(A.indexOf("macintosh")!=-1||A.indexOf("mac os x")!=-1){$$AB.isMac=true}else{if(A.indexOf("linux")!=-1){$$AB.isLinux=true}else{if(A.indexOf("sunos")!=-1){$$AB.isSunOS=true}}}}$$AB.isFlash=false;$$AB.flashVersion=0;if($$AB.isIE){try{var F=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");var G=F.GetVariable("$version");var L=G.indexOf(" ");var K=G.substring(L+1).split(",");var J=K[0];$$AB.flashVersion=parseInt(J);$$AB.isFlash=true}catch(I){}}else{var D=$$n.plugins&&$$n.plugins.length;if(D){D=$$n.plugins["Shockwave Flash"]||$$n.plugins["Shockwave Flash 2.0"];if(D){if(D.description){var G=D.description;$$AB.flashVersion=parseInt(G.charAt(G.indexOf(".")-1));$$AB.isFlash=true}else{$$AB.flashVersion=7;$$AB.isFlash=true}}}else{D=($$n.mimeTypes&&$$n.mimeTypes["application/x-shockwave-flash"]&&$$n.mimeTypes["application/x-shockwave-flash"].enabledPlugin)?$$n.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(D&&D.description){$$AB.isFlash=true;$$AB.flashVersion=parseInt(D.description.substring(D.description.indexOf(".")-1))}}}$$AB.isBrowserSupported=false;$w("Firefox IE6 IE7 IE8 Safari Camino Opera Webkit Seamonkey Prism Iceweasel Epiphany").each(function(M){if(Appcelerator.Browser["is"+M]===true){$$AB.isBrowserSupported=true;throw $break}});$$AB.unsupportedBrowserMessage="<h1>Browser Upgrade Required</h1><p>We're sorry, but your browser version is not supported by this application.</p><p>This application requires a modern browser, such as <a href='http://www.getfirefox.com'>Firefox 2.0+</a>, <a href='http://www.apple.com/safari/'>Safari 2.0+</a>, <a href='http://www.microsoft.com/windows/products/winfamily/ie/default.mspx'>Internet Explorer 6.0+</a> or <a href='http://www.opera.com'>Opera 9.0+</a>.</p><p>Your browser reported: <font face='courier'>"+A+"</font></p>";$$AB.upgradePath=Appcelerator.DocumentPath+"upgrade.html";$$AB.autocheckBrowserSupport=true;$$AB.autoReportStats=true})();$$AR.usedModules={};$$AR.modules=[];$$AR.loadedFiles={};$$AR.fetching={};$$AR.widgets={};$$AR.widgets_css={};$$AR.widgets_js={};$$AR.moduleLoaderCallbacks={};$$AR.script_count=0;$$AR.scriptWithDependenciesQueue=[];$$AR.scriptWithDependenciesCallback;$$AR.HeadElement=$$d.getElementsByTagName("head")[0];$$AR.requireCommonCSS=function(B,C){var A=$$AR.getModuleCommonDirectory()+"/css/";$$AR.requireMultiple(function(E,D){$$AR.remoteLoadCSS(E,C)},A,B)};$$AR.requireCommonJS=function(B,C){var A=$$AR.getModuleCommonDirectory()+"/js/";$$AR.requireMultiple(function(E,D){$$AR.remoteLoadScript(E,C)},A,B)};$$AR.requireMultiple=function(D,C,F,H){if($$o.isUndefined(F)){if($$o.isFunction(H)){H()}return }if($$o.isArray(F)){F=F.compact();var B=0;var A=function(){B++;if(B==F.length){if($$o.isFunction(H)){H()}}else{$$AR.requireMultiple(D,C,F[B],A)}};$$AR.requireMultiple(D,C,F[B],A)}else{var G=C+F;var E=$$AR.loadedFiles[G];if(E){if($$o.isFunction(H)){H()}}else{D(G,function(){$$AR.loadedFiles[G]=true;if($$o.isFunction(H)){H()}})}}};$$AR.remoteLoadScript=function(B,A){$$AR.remoteLoad("script","text/javascript",B,A)};$$AR.queueRemoteLoadScriptWithDependencies=function(B,A){$$AR.scriptWithDependenciesQueue.push({"path":B,"onload":A});$$AR.remoteLoadScriptWithDependencies()};$$AR.remoteLoadScriptWithDependencies=function(){if(0<$$AR.scriptWithDependenciesQueue.length){var A=$$AR.scriptWithDependenciesQueue[0];$$AR.remoteLoad("script","text/javascript",A.path,function(){});$$AR.scriptWithDependenciesCallback=function(){A.onload();$$AR.scriptWithDependenciesQueue.shift();$$AR.remoteLoadScriptWithDependencies()}}};$$AR.remoteLoadCSS=function(B,A){$$AR.remoteLoad("link","text/css",B,A)};$$AR.remoteLoad=function(B,D,F,E){var G=$$AR.fetching[F];if(G){if(E){G.push(E)}return }if(E){$$AR.fetching[F]=[E]}var C=$$d.createElement(B);C.setAttribute("type",D);switch(B){case"script":C.setAttribute("src",F);break;case"link":C.setAttribute("href",F);C.setAttribute("rel","stylesheet");break}var A=function(){var H=$$AR.fetching[F];if(H){for(var I=0;I<H.length;I++){H[I]()}delete $$AR.fetching[F]}};if(B=="script"){if($$AB.isSafari2){A.delay(1.5)}else{(function(){var H=false;C.onload=A;C.onreadystatechange=function(){switch(this.readyState){case"loaded":case"complete":break;default:return }if(H){return }H=true;this.onreadystatechange=null;A()}})()}}else{A.defer()}$$AR.HeadElement.appendChild(C)};$$AR.loadJS=function(C,B,A){$$AR.remoteLoadScript(C,B)};$$AR.getModuleCommonDirectory=function(){return Appcelerator.ModulePath+"common"};$$AR.loadModuleCommonCSS=function(A,B){$$AR.loadModuleCSS(A,B,$$AR.getModuleCommonDirectory()+"/css")};$$AR.loadModuleCSS=function(B,F,K){B=$$AR.getModuleNameFromTag(B);var E=$$AR.modules[B];if(E){throw"module already loaded when loadModuleCSS is called. Call loadModuleCSS *before* you call registerModule for "+B+" and css: "+F}var J=K?K+"/"+F:Appcelerator.ModulePath+B+"/css/"+F;var E=$$AR.widgets_css[J];if(!E){var I=$$d.createElement("link");I.setAttribute("type","text/css");I.setAttribute("rel","stylesheet");I.setAttribute("href",J);$$AC.setElementId(I,"css_"+B);var C=null;for(var H=0;H<$$AR.HeadElement.childNodes.length;H++){var D=$$AR.HeadElement.childNodes[H];if(D.nodeType==1&&D.nodeName=="LINK"){var A=D.getAttribute("href");var G=D.getAttribute("type");if(A&&G&&G.indexOf("css")>0){C=D;break}}}if(C){$$AR.HeadElement.insertBefore(I,C)}else{$$AR.HeadElement.appendChild(I)}$$AR.widgets_css[J]=B}};$$AR.getModuleNameFromTag=function(A){return A.replace(":","_")};$$AR.requireModule=function(A,E){var A=$$AR.getModuleNameFromTag(A);var B=$$AR.modules[A];if(B){E();return }var C=$$AR.moduleLoaderCallbacks[A];if(!C){C=[];$$AR.moduleLoaderCallbacks[A]=C;C.push(E)}else{C.push(E);return }var D=Appcelerator.ModulePath+A+"/"+A+".js";$$AR.loadJS(D)};$$AR.requireWidget=$$AR.requireModule;$$AR.registerModule=function(A,B,F){A=$$AR.getModuleNameFromTag(A);$$AR.modules[A]=B;if(B.isWidget){var D=B.getWidgetName().toLowerCase();if($$AR.widgets[D]){throw"duplicate widget name detected: "+D}$$AR.widgets[D]=B}if(B.onUnload){$$w.observe(window,"unload",B.onUnload)}if(typeof (B.setPath)=="function"){var E=Appcelerator.ModulePath+A+"/";B.setPath(E)}var E=Appcelerator.ModulePath+A+"/"+A+".js";var C=($$AR.fetching[E]||[]).concat($$AR.moduleLoaderCallbacks[A]||[]);if(C){for(var G=0;G<C.length;G++){C[G]()}}delete $$AR.moduleLoaderCallbacks[A];delete $$AR.fetching[E]};if($$AB.isIE){$$AR.registerModuleWithJSInIE=function(A,C,B,H,F){var D=B[H];A=$$AR.getModuleNameFromTag(A);var I=F?F+"/"+D:Appcelerator.ModulePath+A+"/js/"+D;var G=$$d.createElement("script");G.setAttribute("type","text/javascript");G.setAttribute("src",I);G.onerror=function(J){$E("Error loading "+I+"\n Exception: "+$$o.getExceptionDetail(J))};var E=false;G.onreadystatechange=function(){switch(this.readyState){case"loaded":case"complete":break;default:return }if(E){return }E=true;this.onreadystatechange=null;H=H+1;if(H==B.length){$$AR.registerModule(A,C)}else{$$AR.registerModuleWithJSInIE(A,C,B,H,F)}};$$AR.HeadElement.appendChild(G)}}$$AR.registerWidget=$$AR.registerModule;$$AR.registerModuleWithCommonJS=function(A,B,C){$$AR.registerModuleWithJS(A,B,C,$$AR.getModuleCommonDirectory()+"/js")};$$AR.registerWidgetWithCommonJS=$$AR.registerModuleWithCommonJS;$$AR.registerModuleWithJS=function(B,C,G,A){B=$$AR.getModuleNameFromTag(B);if($$AB.isIE){$$AR.registerModuleWithJSInIE(B,C,G,0,A);return }var F={count:G.length};var E=function(){F.count--;if(F.count==0){$$AR.registerModule(B,C)}};var D=function(K){var J=G[K];var L=!$$o.isUndefined(A)?(A+"/"+J):Appcelerator.ModulePath+B+"/js/"+J;var H=$$d.createElement("script");H.setAttribute("type","text/javascript");H.setAttribute("src",L);H.onerror=function(M){$E("Error loading "+L+"\n Exception: "+$$o.getExceptionDetail(M))};if($$AB.isSafari2){E.delay(2)}else{var I=false;if(!$$AB.isOpera){H.onload=E}H.onreadystatechange=function(){switch(this.readyState){case"loaded":case"complete":break;default:return }if(I){return }I=true;this.onreadystatechange=null;E.defer()}}$$AR.HeadElement.appendChild(H);if(K+1<G.length){D.delay(0,K+1)}};D(0)};$$AR.registerWidgetWithJS=$$AR.registerModuleWithJS;$$AR.getLoadedModulesAndAttributes=function(){return $H(Appcelerator.Module).map(function(A){return[A[1].getWidgetName(),A[1].getAttributes().pluck("name")]})};$$AR.onloaders=[];$$AR.onunloaders=[];$$AR.onload=function(A,B){if(B){$$AR.onloaders.unshift(A)}else{$$AR.onloaders.push(A)}};$$AR.onunload=function(A){$$AR.onunloaders.push(A)};$$AR.onloadInvoker=function(){var A=new Date().getTime();for(var B=0;B<$$AR.onloaders.length;B++){$$AR.onloaders[B]()}$$AR.onloaders=null;$$l.info("Appcelerator v"+Appcelerator.Version+" ... loaded in "+(new Date().getTime()-A)+" ms");$$l.info(Appcelerator.Copyright);$$l.info(Appcelerator.LicenseMessage);$$l.info("More App. Less Code.")};$$AR.onunloadInvoker=function(){for(var A=0;A<$$AR.onunloaders.length;A++){$$AR.onunloaders[A]()}$$AR.onunloaders=null};Event.observe(window,"load",$$AR.onloadInvoker);Event.observe(window,"unload",$$AR.onunloadInvoker);$$AR.onload(function(){Appcelerator.TEMPLATE_VARS={rootPath:Appcelerator.DocumentPath,scriptPath:Appcelerator.ScriptPath,imagePath:Appcelerator.ImagePath,cssPath:Appcelerator.StylePath,contentPath:Appcelerator.ContentPath,modulePath:Appcelerator.ModulePath,instanceid:Appcelerator.instanceid};if($$AB.autocheckBrowserSupport&&!$$AB.isBrowserSupported&&Appcelerator.Config["browser_check"]){$$d.body.style.display="none";try{new Ajax.Request($$AB.upgradePath,{asynchronous:true,method:"get",onFailure:function(B){$$d.open();$$d.write("<html><head><meta http-equiv='pragma' content='no-cache'></head><body>"+$$AB.unsupportedBrowserMessage+"</body></html>");$$d.close();$$d.body.style.display=""},onSuccess:function(B){$$d.open();$$d.write(B.responseText);$$d.close();$$d.body.style.display=""}})}catch(A){$$d.open();$$d.write("<html><head><meta http-equiv='pragma' content='no-cache'></head><body>"+$$AB.unsupportedBrowserMessage+"</body></html>");$$d.close();$$d.body.style.display=""}}$$AR.old_document_write=$$d.write;$$d.write=function(D){var C=/src=('([^']*)'|"([^"]*)")/gm;C.lastIndex=0;var B=C.exec(D);if(B){B=B[2]||B[3];if(B=="//:"){$$AR.old_document_write(D)}else{$$AR.script_count++;$$AR.remoteLoadScript(B,function(){$$AR.script_count--;if(0==$$AR.script_count){$$AR.scriptWithDependenciesCallback()}})}}}});var APPCELERATOR_DEBUG=$$w.location.href.indexOf("debug=1")>0||Appcelerator.Parameters.get("debug")=="1";var log4javascript_threshold=Appcelerator.Parameters.get("log4javascript");var Logger=Class.create();$$l=Logger;var _logAppender=null;var _logEnabled=true;$$l.toLevel=function(B,A){if(!B){return log4javascript.Level.INFO}B=B.toUpperCase();if(B==log4javascript.Level.INFO.toString()){return log4javascript.Level.INFO}else{if(B==log4javascript.Level.WARN.toString()){return log4javascript.Level.WARN}else{if(B==log4javascript.Level.ERROR.toString()){return log4javascript.Level.ERROR}else{if(B==log4javascript.Level.FATAL.toString()){return log4javascript.Level.FATAL}else{if(B==log4javascript.Level.TRACE.toString()){return log4javascript.Level.TRACE}else{if(B==log4javascript.Level.DEBUG.toString()){return log4javascript.Level.DEBUG}}}}}}return A.getLevel()};if(log4javascript_threshold&&log4javascript_threshold!=""){_log=log4javascript.getDefaultLogger();var Level=$$l.toLevel(log4javascript_threshold,_log);$$l.infoEnabled=log4javascript.Level.INFO.isGreaterOrEqual(Level);$$l.warnEnabled=log4javascript.Level.WARN.isGreaterOrEqual(Level);$$l.errorEnabled=log4javascript.Level.ERROR.isGreaterOrEqual(Level);$$l.fatalEnabled=log4javascript.Level.FATAL.isGreaterOrEqual(Level);$$l.traceEnabled=log4javascript.Level.TRACE.isGreaterOrEqual(Level);$$l.debugEnabled=log4javascript.Level.DEBUG.isGreaterOrEqual(Level)}else{_logAppender=true;_logEnabled=_logEnabled&&typeof (console)!="undefined";_log={console:function(A,C){try{if(console&&console[A]){console[A](C)}}catch(B){}},debug:function(A){if(APPCELERATOR_DEBUG){this.console("debug",A)}},info:function(A){this.console("info",A)},error:function(A){this.console("error",A)},warn:function(A){this.console("warn",A)},trace:function(A){if(APPCELERATOR_DEBUG){this.console("debug",A)}},fatal:function(A){this.console("error",A)}};$$l.infoEnabled=_logEnabled&&console.info;$$l.warnEnabled=_logEnabled&&console.warn;$$l.errorEnabled=_logEnabled&&console.error;$$l.fatalEnabled=_logEnabled&&console.error;$$l.traceEnabled=_logEnabled&&APPCELERATOR_DEBUG&&console.debug;$$l.debugEnabled=_logEnabled&&APPCELERATOR_DEBUG&&console.debug}$$l.info=function(A){if($$l.infoEnabled){_log.info(A)}};$$l.warn=function(A){if($$l.warnEnabled){_log.warn(A)}};$$l.debug=function(A){if($$l.debugEnabled){_log.debug(A)}};$$l.error=function(A){if($$l.errorEnabled){_log.error(A)}};$$l.trace=function(A){if($$l.traceEnabled){_log.trace(A)}};$$l.fatal=function(A){if($$l.fatalEnabled){_log.fatal(A)}};function $D(){if($$l.debugEnabled){$$l.debug($$l.buildMessage(arguments))}}function $E(){if($$l.errorEnabled){$$l.error($$l.buildMessage(arguments))}}$$l.buildMessage=function(B){B=$A(B);for(var C=0;C<B.length;C++){var A=B[C];if(A){if(B[C].constructor==Object){B[C]=$$o.toJSON(B[C])}else{B[C]=B[C].toString()}}}return B.join("")};if(typeof err=="undefined"){var err={println:function(A){$E(A)}}}if(typeof out=="undefined"){var out={println:function(A){if ($$l.debugEnabled) $D(A)}}}$$o.extend(String.prototype,{trim:function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},startsWith:function(A){if(A.length<=this.length){return this.substring(0,A.length)==A}return false},toFunction:function(dontPreProcess){var str=this.trim();if(str.length==0){return Prototype.emptyFunction}if(!dontPreProcess){if(str.match(/^function\(/)){str="return "+String.unescapeXML(this)+"()"}else{if(!str.match(/return/)){str="return "+String.unescapeXML(this)}else{if(str.match(/^return function/)){str=String.unescapeXML(this)+" ();"}}}}var code="var f = function(){ var args = $A(arguments); "+str+"}; f;";var func=eval(code);if(typeof (func)=="function"){return func}throw Error("code was not a function: "+this)},toFunctionString:function(B){var C=this.trim();var A="var functionString_"+B+" = function(){ var args = $A(arguments); "+C+"}; functionString_"+B+"();";return A}});String.escapeXML=function(A){if(!A){return null}return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};String.unescapeXML=function(A){if(!A){return null}return A.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&amp;/g,"&").replace(/&quot;/g,'"')};(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";String.prototype.encode64=function(){var D=this;var B="";var K,I,G;var J,H,F,E;var C=0;do{K=D.charCodeAt(C++);I=D.charCodeAt(C++);G=D.charCodeAt(C++);J=K>>2;H=((K&3)<<4)|(I>>4);F=((I&15)<<2)|(G>>6);E=G&63;if(isNaN(I)){F=E=64}else{if(isNaN(G)){E=64}}B=B+A.charAt(J)+A.charAt(H)+A.charAt(F)+A.charAt(E)}while(C<D.length);return B};String.prototype.decode64=function(){var B="";var K,I,G;var J,H,F,E;var C=0;var D=this;D=D.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{J=A.indexOf(D.charAt(C++));H=A.indexOf(D.charAt(C++));F=A.indexOf(D.charAt(C++));E=A.indexOf(D.charAt(C++));K=(J<<2)|(H>>4);I=((H&15)<<4)|(F>>2);G=((F&3)<<6)|E;B=B+String.fromCharCode(K);if(F!=64){B=B+String.fromCharCode(I)}if(E!=64){B=B+String.fromCharCode(G)}}while(C<D.length);return B}})();String.stringValue=function(A){if(A){return'"'+A.replace(/"/g,'\\"')+'"'}else{return null}};$$o.setNestedProperty=function(E,G,D){var A=G.split(".");var F=E;var C=null;var B=null;A.each(function(H){B=H;if(F[H]){C=F;F=F[H]}else{C=F;F=F[H]={}}});C[B]=D;return E};$$o.getNestedProperty=function(C,E,B){if(C!=null&&E!=null){var A=E.split(".");if(A.length!=-1){var D=C;A.each(function(F){if(null!=D[F]){D=D[F]}else{D=null;throw $break}});return D==null?B:D}else{return C[E]==null?B:C[E]}}return B};$$o.copy=function(E,B){if(B){for(var D in B){var C=B[D];var A=typeof (C);switch(A){case"string":case"number":case"boolean":case"object":case"array":E[D]=C;break}}}return E};$$o.evalWithinScope=function(code,scope){if(code=="{}"){return{}}var func=eval('var f = function(){return eval("('+code+')")}; f;');return func.call(scope)};$$o.getExceptionDetail=function(D,C){if(!D){return"No Exception Object"}if(typeof (D)=="string"){return"message: "+D}if($$AB.isIE){return"message: "+D.message+", location: "+D.location||D.number||0}else{var B=0;try{B=D.lineNumber||0}catch(A){}return"message: "+(D.message||D)+", location: "+B+", stack: "+(C?"<code>":"")+(D.stack||"not specified")+(C?"</code>":"")}};$$o.isBoolean=function(A){return typeof (A)=="boolean"};$$o.mirror=function(B){var A=(function(){});A.prototype=B;return new A()};$$o.cloneWithout=function(C,B){var D=$$o.clone(C);for(var A in B){D[A]=undefined}return D};$$AU.DateTime={ONE_SECOND:1000,ONE_MINUTE:60000,ONE_HOUR:3600000,ONE_DAY:86400000,ONE_WEEK:604800000,ONE_MONTH:18748800000,ONE_YEAR:31536000000,timeFormat:function(C){var F="";var D=0;for(var G=0,A=C.length;G<A;G++){var B=C.charAt(G);switch(B){case",":case" ":F="";break;case"m":if(G+1<A){var E=C.charAt(G+1);if(E=="s"){D+=parseInt(F);G++}}else{D+=parseInt(F)*this.ONE_MINUTE}F="";break;case"s":D+=parseInt(F)*this.ONE_SECOND;F="";break;case"h":D+=parseInt(F)*this.ONE_HOUR;F="";break;case"d":D+=parseInt(F)*this.ONE_DAY;F="";break;case"w":D+=parseInt(F)*this.ONE_WEEK;F="";break;case"y":D+=parseInt(F)*this.ONE_YEAR;F="";break;default:F+=B;break}}if(F.length>0){D+=parseInt(F)}return D},getDurationNoFormat:function(E,B){B=B||new Date();var D=B.getTime()-E.getTime();var A=0;var C=0;var F=0;if(D>this.ONE_HOUR){A=Math.round(D/this.ONE_HOUR);D=D-(this.ONE_HOUR*A)}if(D==this.ONE_HOUR){A=1;D=D-this.ONE_HOUR}if(D>this.ONE_MINUTE){C=Math.round(D/this.ONE_MINUTE);D=D-(this.ONE_MINUTE*C)}if(D==this.ONE_MINUTE){C=1;D=D-this.ONE_MINUTE}if(D>this.ONE_SECOND){F=Math.round(D/this.ONE_SECOND);D=D-(this.ONE_SECOND*F)}if(D==this.ONE_SECOND){F=1}if(F<10){F="0"+F}if(A>0){return A+":"+C+":"+F}if(C>0){return C+":"+F}if(F>0){return"0:"+F}else{return":00"}},getDuration:function(C,A){A=A||new Date();var B=A.getTime()-C.getTime();return this.toDuration(B)},toDuration:function(B){B=B||0;if(B<0){return"0"}else{if(B<this.ONE_SECOND){var A=Math.round(B/this.ONE_SECOND);return A+" ms"}else{if(B==this.ONE_SECOND){return"1 second"}else{if(B<this.ONE_MINUTE){var A=Math.round(B/this.ONE_SECOND);return A+" second"+(A>1?"s":"")}}}}if(B==this.ONE_MINUTE){return"1 minute"}else{if(B==this.ONE_HOUR){return"1 hour"}else{if(B<this.ONE_HOUR){var A=Math.round(B/this.ONE_MINUTE);return A+" minute"+(A>1?"s":"")}else{if(B>this.ONE_HOUR&&B<this.ONE_DAY){var A=Math.round(B/this.ONE_HOUR);return A+" hour"+(A>1?"s":"")}else{if(B==this.ONE_DAY){return"1 day"}else{if(B>this.ONE_DAY&&B<this.ONE_YEAR){if(B>this.ONE_MONTH){var A=Math.round(B/this.ONE_MONTH);return A+" month"+(A>1?"s":"")}else{if(B>this.ONE_WEEK){var A=Math.round(B/this.ONE_WEEK);return A+" week"+(A>1?"s":"")}else{var A=Math.round(B/this.ONE_DAY);return A+" day"+(A>1?"s":"")}}}else{if(B==this.ONE_YEAR){return"1 year"}else{var A=Math.round(B/this.ONE_DAY);return A+" years"}}}}}}}},friendlyDiff:function(D,A,B){if(!D){return null}A=A||new Date();var E=A.getTime()-D.getTime();if(E<=this.ONE_MINUTE){if(B){return"a few secs ago"}return"a few seconds ago"}else{if(E<this.ONE_HOUR){var C=Math.round(E/this.ONE_MINUTE);if(C<10){if(B){return"a few mins ago"}return"a few minutes ago"}if(B){return C+" min"+(C>1?"s":"")+" ago"}return C+" minute"+(C>1?"s":"")+" ago"}else{if(E==this.ONE_HOUR){return"an hour ago"}else{if(E<this.ONE_DAY){var C=Math.round(E/this.ONE_HOUR);return C+" hour"+(C>1?"s":"")+" ago"}else{if(E==this.ONE_DAY){return"yesterday"}else{if(E>this.ONE_DAY&&E<this.ONE_YEAR){if(E>this.ONE_MONTH){var C=Math.round(E/this.ONE_MONTH);return C+" month"+(C>1?"s":"")+" ago"}else{if(E>this.ONE_WEEK){var C=Math.round(E/this.ONE_WEEK);return C+" week"+(C>1?"s":"")+" ago"}else{var C=Math.round(E/this.ONE_DAY);if(C==1){return"yesterday"}return C+" day"+(C>1?"s":"")+" ago"}}}else{if(E>this.ONE_YEAR){if(B){return">1 year ago"}return"more than a year ago"}}}}}}}return E},getMonthIntValue:function(A){switch(A){case"Jan":return 0;case"Feb":return 1;case"Mar":return 2;case"Apr":return 3;case"May":return 4;case"Jun":return 5;case"Jul":return 6;case"Aug":return 7;case"Sep":return 8;case"Oct":return 9;case"Nov":return 10;case"Dec":return 11}},intval:function(A){if(A){if(A.charAt(0)=="0"){A=A.substring(1)}return parseInt(A)}return 0},getFriendlyDate:function(B,C){var D=$$o.extend({today:"",yesterday:"",past:"",lowercase:false},C||"");B=B||new Date();var A=typeof (B)=="string"?$$AU.DateTime.parseRFC2822Date(B):B;if($$AU.DateTime.isToday(A)){return D["today"]+$$AU.DateTime.get12HourTime(A)}else{if($$AU.DateTime.isYesterday(A)){return D["yesterday"]+(D["lowercase"]?"yesterday":"Yesterday")}}return D["past"]+A.getDay()+" "+$$AU.DateTime.getShortMonthName(A)},isToday:function(B){var A=new Date();return(A.getFullYear()==B.getFullYear()&&A.getMonth()==B.getMonth()&&A.getDay()==B.getDay())},isYesterday:function(B){var A=new Date();return(A.getFullYear()==B.getFullYear()&&A.getMonth()==B.getMonth()&&A.getDay()-1==B.getDay())},getShortMonthName:function(A){var B=A.getMonth();switch(B){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec"}},get12HourTime:function(F,I,E){var B=F;if(B==null){B=new Date()}var D=B.getHours();var G=(D==0)?12:D;var H="AM";if(D>=12){G=(D==12)?12:(D-12);H="PM"}var C=B.getMinutes();var J=B.getSeconds();G+=":"+(C<10?"0":"")+C;if(I){G+=":"+(J<10?"0":"")+J}if(E){var A=B.getMilliseconds();G+="."+(A<10?"0":"")+A}G+=" "+H;return G},getShortDateTime:function(B){if(B&&typeof (B)=="string"){B=this.parseJavaDate(B)}var A=B||new Date();return this.getShortMonthName(A)+" "+A.getDate()+" "+this.get12HourTime(A)},parseInt:function(A){if(A){if(A.charAt(0)=="0"){return this.parseInt(A.substring(1))}return parseInt(A)}return 0},parseJavaDate:function(G){if(!G||G==""){return null}var H=parseInt(G.substring(0,4));var F=this.parseInt(G.substring(5,7))-1;var I=this.parseInt(G.substring(8,10));var D=this.parseInt(G.substring(11,13));var C=this.parseInt(G.substring(14,16));var A=this.parseInt(G.substring(17,19));var E=this.parseInt(G.substring(20));var B=new Date();B.setFullYear(H);B.setMonth(F);B.setDate(I);B.setHours(D);B.setMinutes(C);B.setSeconds(A);B.setMilliseconds(E);return B},parseRFC2822Date:function(G){var H=G.split(" ");var J=this.intval(H[1]);var F=H[2];var I=H[3];var L=H[4].split(":");var C=this.intval(L[0]);var D=this.intval(L[1]);var E=this.intval(L[2]);var B=this.intval(H[5].substring(0,3));var A=0;if(B<0){A=C-(B)}else{A=C+(B)}if(A>23){A=A-24;J+=1}else{if(A<0){A=24-A;J-=1}}var K=new Date();K.setUTCDate(J);K.setUTCMonth(this.getMonthIntValue(F));K.setUTCFullYear(I);K.setUTCHours(A,D,E);return K},getTimezoneOffset:function(){var D=new Date();var F=D.getTimezoneOffset();var A=Math.floor(F/60);var E=Math.abs(F%60);var C=new String();C+=(A>0)?"-":"+";var B=Math.abs(A);C+=(B<10)?"0"+B:B;C+=((E==0)?"00":E);return C},parse:function(A,B){return Jel.Date.parse(A,B)},format:function(A,B){return Jel.Date.format(A,B)}};Appcelerator.ServerConfig={};$$AU.ServerConfig=Class.create();$$AU.ServerConfig.listeners=[];$$AU.ServerConfig.addConfigListener=function(A){if($$AU.ServerConfig.listeners){$$AU.ServerConfig.listeners.push(A)}else{A()}};$$AU.ServerConfig.disableRemoteConfig=false;$$AU.ServerConfig.set=function(A){Appcelerator.ServerConfig=A;$$AU.ServerConfig.loadComplete()};$$AU.ServerConfig.load=function(){if($$w.location.href.indexOf("file:/")==-1){if($$AU.ServerConfig.disableRemoteConfig){return }var A=Appcelerator.DocumentPath+"appcelerator.xml";new Ajax.Request(A,{asynchronous:true,method:"get",onSuccess:function(E){var F=E.responseXML.documentElement;var C=F.childNodes;for(var H=0;H<C.length;H++){var B=C[H];if(B.nodeType==$$AU.Dom.ELEMENT_NODE){var G=B.nodeName.toLowerCase();var D={};var J=$$AU.Dom.getText(B);var I=new Template(J,/(^|.|\r|\n)(@\{(.*?)\})/);D.path=I.evaluate(Appcelerator.TEMPLATE_VARS);D.value=D.path;$$AU.Dom.eachAttribute(B,function(L,K){D[L]=K},["id"],true);Appcelerator.ServerConfig[G]=D}}$$AU.ServerConfig.loadComplete()},onFailure:function(B){$E("Failed to load configuration from "+A);$$AU.ServerConfig.loadComplete()}})}else{$$AU.ServerConfig.loadComplete()}};$$AU.ServerConfig.loadComplete=function(){$$AU.ServerConfig.listeners.each(function(A){try{A()}catch(B){$E("error calling server config listener = "+A+", Exception = "+$$o.getExceptionDetail(B))}});$$AU.ServerConfig.listeners=null};$$AR.onload($$AU.ServerConfig.load);$$AC.compileOnLoad=true;$$AC.isInterpretiveMode=true;$$AC.isCompiledMode=false;$$AC.POSITION_REMOVE=-1;$$AC.POSITION_REPLACE=0;$$AC.POSITION_TOP=1;$$AC.POSITION_BOTTOM=2;$$AC.POSITION_BEFORE=3;$$AC.POSITION_AFTER=4;$$AC.POSITION_BODY_TOP=5;$$AC.POSITION_BODY_BOTTOM=6;$$AC.POSITION_HEAD_TOP=7;$$AC.POSITION_HEAD_BOTTOM=8;$$AC.nextId=0;$$AC.functionId=1;$$AC.getAndEnsureId=function(A){if(!A.id){A.id=$$AC.generateId()}if(!A._added_to_cache){$$AC.setElementId(A,A.id)}return A.id};$$AC.setElementId=function(A,B){$$AC.removeElementId(A.id);A.id=B;A._added_to_cache=true;window["$"+B]=A;return A};$$AC.removeElementId=function(C){if(C){var A=window["$"+C];if(A){try{delete window["$"+C]}catch(B){window["$"+C]=0}if(A._added_to_cache){try{delete A._added_to_cache}catch(B){A._added_to_cache=0}}return true}}return false};(function(){if($$o.isFunction(window["$"])){try{delete window["$"]}catch(A){}}})();function $el(B){if(arguments.length>1){var A=$A(arguments);return A.collect(function(D){return $el(D)})}if($$o.isString(B)){if(B==""){return null}var C=B;B=window["$"+C];if(!B){B=$$d.getElementById(C)}}return B?Element.extend(B):null}$$AC.generateId=function(){return"app_"+($$AC.nextId++)};$$AC.attributeProcessors={"*":[]};$$AC.registerAttributeProcessor=function(C,D,E){if(typeof C=="string"){C=C||"*";var B=$$AC.attributeProcessors[C];if(!B){B=[];$$AC.attributeProcessors[C]=B}B.push([D,E])}else{for(var G=0,A=C.length;G<A;G++){var F=C[G]||"*";var B=$$AC.attributeProcessors[F];if(!B){B=[];$$AC.attributeProcessors[F]=B}B.push([D,E])}}};$$AC.forwardToAttributeListener=function(C,G){for(var B=0;B<G.length;B++){var D=G[B];var A=D[0];var F=D[1];var E=C.getAttribute(A);if(E){F.handle(C,A,E)}}};$$AC.delegateToAttributeListeners=function(A){var B=$$AC.getTagname(A);var C=$$AC.attributeProcessors[B];if(C&&C.length>0){$$AC.forwardToAttributeListener(A,C,B)}C=$$AC.attributeProcessors["*"];if(C&&C.length>0){$$AC.forwardToAttributeListener(A,C,"*")}};$$AC.containerProcessors=[];$$AC.addContainerProcessor=function(A){$$AC.containerProcessors.push(A)};$$AC.removeContainerProcessor=function(A){$$AC.containerProcessors.remove(A)};$$AC.delegateToContainerProcessors=function(C,B){if($$AC.containerProcessors.length>0){for(var F=0,A=$$AC.containerProcessors.length;F<A;F++){var D=$$AC.containerProcessors[F];var E=D.process(C,B);if(E){B=E}}}return B};$$AC.retainedWidgetAttributes=["name"];$$AC.addContainerProcessor({process:function(F,B){var D=$$AC.retainedWidgetAttributes;for(var E=0;E<D.length;E++){var A=D[E];var C=F.getAttribute(A);if(C){B.setAttribute(A,C)}}}});$$AC.checkLoadState=function(A){if(A.pending==0&&A.scanned){if(typeof (A.onfinish)=="function"){A.onfinish(code)}if(typeof (A.onafterfinish)=="function"){A.onafterfinish()}}};$$AC.dynamicCompile=function(B,C,A){if(!B){return }if ($$l.debugEnabled) $D("dynamic compile called for ",B," - id=",B.id);$$AC.doCompile(B,A)};$$AC.doCompile=function(B,A){var C=$$AC.createCompilerState();$$AC.compileElement(B,C,A);C.scanned=true;$$AC.checkLoadState(C)};$$AC.createCompilerState=function(){return{pending:0,code:"",scanned:false}};$$AC.onbeforecompileListeners=[];$$AC.oncompileListeners=[];$$AC.beforeDocumentCompile=function(A){$$AC.onbeforecompileListeners.push(A)};$$AC.afterDocumentCompile=function(A){$$AC.oncompileListeners.push(A)};$$AC.compileDocument=function(B){if ($$l.debugEnabled) $D("compiled document called");if($$AC.onbeforecompileListeners){for(var E=0;E<$$AC.onbeforecompileListeners.length;E++){$$AC.onbeforecompileListeners[E]()}delete $$AC.onbeforecompileListeners}var A=$$d.body;var D=A.style.visibility||"visible";if(Appcelerator.Config["hide_body"]){A.style.visibility="hidden"}if(!$$d.body.id){$$AC.setElementId($$d.body,"app_body")}var C=$$AC.createCompilerState();$$AC.compileElement(A,C);C.scanned=true;C.onafterfinish=function(F){(function(){if(typeof (B)=="function"){B()}if(D!=A.style.visibility){A.style.visibility=D}$$AC.compileDocumentOnFinish()}).defer()};$$AC.checkLoadState(C)};$$AC.compileDocumentOnFinish=function(){if($$AC.oncompileListeners){for(var A=0;A<$$AC.oncompileListeners.length;A++){$$AC.oncompileListeners[A]()}delete $$AC.oncompileListeners}$MQ("l:app.compiled")};$$AC.compileInterceptors=[];$$AC.addCompilationInterceptor=function(A){$$AC.compileInterceptors.push(A)};$$AC.onPrecompile=function(B){if($$AC.compileInterceptors.length>0){for(var D=0,A=$$AC.compileInterceptors.length;D<A;D++){var C=$$AC.compileInterceptors[D];if(C.onPrecompile(B)==false){return false}}}return true};$$AC.compileElement=function(E,A,D){D=D==null?true:D;$$AC.getAndEnsureId(E);$$AC.determineScope(E);if ($$l.debugEnabled) $D("compiling element => "+E.id);if(typeof (A)=="undefined"){throw"compileElement called without state for "+E.id}$$AC.onPrecompile(E);var I=E.getAttribute("compile")||"true";if(I=="false"){return }if($$AC.isInterpretiveMode){if(E.compiled){$$AC.destroy(E)}E.compiled=1}var B=$$AC.getTagname(E);if(B.indexOf(":")>0){E.style.originalDisplay=E.style.display||"block";A.pending+=1;$$AR.requireModule(B,function(){var J=$$AC.compileWidget(E,A);A.pending-=1;$$AC.checkLoadState(A)})}else{$$AC.delegateToAttributeListeners(E);if(D){if(E.nodeName.toLowerCase()!="textarea"){var H=[];for(var F=0,C=E.childNodes.length;F<C;F++){if(E.childNodes[F].nodeType==1){H.push(E.childNodes[F])}}for(var F=0,G=H.length;F<G;F++){$$AC.compileElement(H[F],A)}}}}};$$AC.getElementChildren=function(B){var D=[];for(var A=0,C=B.childNodes.length;A<C;A++){if(B.childNodes[A].nodeType==1){D.push(B.childNodes[A])}}return D};$$AC.destroy=function(C,B){if(!C){return }B=B==null?true:B;C.compiled=0;$$AC.removeElementId(C.id);if($$o.isArray(C.trashcan)){for(var F=0,A=C.trashcan.length;F<A;F++){try{C.trashcan[F]()}catch(E){$E(E)}}try{delete C.trashcan}catch(E){$E(E)}}if(B){if(C.nodeType==1&&C.childNodes&&C.childNodes.length>0){for(var F=0,A=C.childNodes.length;F<A;F++){var D=C.childNodes[F];if(D&&D.nodeType&&D.nodeType==1){try{$$AC.destroy(D,true)}catch(E){$E(E)}}}}}};$$AC.destroyContent=function(C){var D=$$AC.getElementChildren(C);for(var B=0,A=D.length;B<A;B++){$$AC.destroy(D[B],true)}};$$AC.addTrash=function(B,A){if(!B.trashcan){B.trashcan=[]}B.trashcan.push(A)};$$AC.getJsonTemplateVar=function(C,A,B){var D=$$o.getNestedProperty(C,A,B);if(typeof (D)=="object"){D=$$o.toJSON(D);D=D.replace(/"/g,"&quot;")}return D};$$AC.templateRE=/#\{(.*?)\}/g;$$AC.compileTemplate=function(html,htmlonly,varname){varname=varname==null?"f":varname;var fn=function(m,name,format,args){return"', jtv(values,'"+name+"','#{"+name+"}'),'"};var body="var "+varname+" = function(values){ var jtv = $$AC.getJsonTemplateVar; return ['"+html.replace(/(\r\n|\n)/g,"").replace(/\t/g," ").replace(/'/g,"\\'").replace($$AC.templateRE,fn)+"'].join('');};"+(htmlonly?"":varname);var result=htmlonly?body:eval(body);return result};$$AC.tagNamespaces=[];for(var x=0;x<$$d.documentElement.attributes.length;x++){var attr=$$d.documentElement.attributes[x];var name=attr.name;var value=attr.value;var idx=name.indexOf(":");if(idx>0){$$AC.tagNamespaces.push(name.substring(idx+1))}}if($$AC.tagNamespaces.length==0){$$AC.tagNamespaces.push("app")}$$AC.removeHtmlPrefix=function(A){if($$AB.isIE){A=A.gsub(/<\?xml:namespace(.*?)\/>/i,"")}return A.gsub(/html:/i,"").gsub(/><\/img>/i,"/>")};$$AC.specialMagicParseHtml=function(A,C){var B=A;for(var D=0;D<$$AC.tagNamespaces.length;D++){B=$$AC.specialMagicParseTagSet(B,$$AC.tagNamespaces[D])}return B};$$AC.specialMagicParseTagSet=function(G,H){var Q="<"+H+":";var E="</"+H+":";var N=G.indexOf(Q);if(N<0){return $$AC.removeHtmlPrefix(G)}var D=$$AC.removeHtmlPrefix(G.substring(0,N));var K=N+Q.length;var J=G.indexOf(">",K);var B=G.indexOf(" ",K);if(B<0||J<B){B=J}var C=G.substring(K,B);var P=E+C+">";while(true){var M=G.indexOf(P,K);var F=G.indexOf(">",K);var L=G.indexOf(">",M);var I=G.substring(F+1,M);var A=I.indexOf(Q+C);if(A!=-1){K=M+P.length;continue}var O=G.substring(N,M+P.length);if($$AB.isIE){O=$$AC.removeHtmlPrefix(O)}D+=O;break}D+=$$AC.specialMagicParseHtml(G.substring(L+1),H);return D};$$AC.copyAttributes=function(B,A){$$AU.Dom.eachAttribute(B,function(E,G,F,D,C){if(F){A.setAttribute(E,G)}},["style","class","id"])};$$AC.getHtml=function(B,C){C=(C==null)?true:C;var A=B.innerHTML||$$AU.Dom.getText(B);return $$AC.convertHtml(A,C)};$$AC.addIENameSpace=function(A){if($$AB.isIE){A='<?xml:namespace prefix = app ns = "http://www.appcelerator.org" /> '+A}return A};$$AC.convertHtml=function(A,B){if(A.indexOf("#%7B")!=-1){A=A.gsub("#%7B","#{").gsub("%7D","}")}A=A.gsub(/\\\"/,"&quot;");if(B){return(A!=null)?$$AC.specialMagicParseHtml(A):""}else{return A}};$$AC.getWidgetHTML=function(A,B){return $$AC.getHtml(A,B)};$$AC.isHTMLTag=function(B){if($$AB.isIE){return B.scopeName=="HTML"||!B.tagUrn}var A=$$AC.getTagName(B,true);return !A.startsWith("app:")};$$AC.getTagname=function(A){if(!A){throw"element cannot be null"}if(A.nodeType!=1){throw"node: "+A.nodeName+" is not an element, was nodeType: "+A.nodeType+", type="+(typeof A)}if(A._tagName){return A._tagName}if($$AB.isIE){if(A.scopeName&&A.tagUrn){return A.scopeName+":"+A.nodeName.toLowerCase()}}if($$AC.isInterpretiveMode){return A.nodeName.toLowerCase()}return String(A.nodeName.toLowerCase())};$$AC.addEventListener=function(C,D,E,B){var A=function(){var G=$A(arguments);if ($$l.debugEnabled) $D("on "+C.id+"."+D+" => invoking action "+E);return E.apply({data:{}},G)};var F=B>0?(function(){var H=$A(arguments);var I=H[0];if(I.keyCode){H[0]={keyCode:I.keyCode}}var G=function(){return A.apply(A,H)};G.delay(B/1000)}):A;Event.observe(C,D,F,false);$$AC.addTrash(C,function(){Event.stopObserving(C,D,F)});return C};$$AC.installChangeListener=function(A,B){(function(){if(A.type=="checkbox"){A._validatorObserver=new Form.Element.Observer(A,0.1,B)}else{A._focusChangeListener=function(){A._validatorObserver=new Form.Element.Observer(A,0.5,function(C,D){B(C,D)})};Event.observe(A,"focus",A._focusChangeListener);A._blurChangeListener=function(){if(A._validatorObserver){A._validatorObserver.stop();try{delete A._validatorObserver}catch(C){A._validatorObserver=null}B(A,Field.getValue(A))}};Event.observe(A,"blur",A._blurChangeListener)}}).defer();return A};$$AC.removeChangeListener=function(A){(function(){if(A._focusChangeListener){Event.stopObserving(A,"focus",A._focusChangeListener);try{delete A._focusChangeListener}catch(B){A._focusChangeListener=null}}if(A._blurChangeListener){Event.stopObserving(A,"blur",A._blurChangeListener);try{delete A._blurChangeListener}catch(B){A._blurChangeListener=null}}if(A._validatorObserver){A._validatorObserver.stop();try{delete A._validatorObserver}catch(B){A._validatorObserver=null}}}).defer()};$$AC.ElementFunctions={};$$AC.getFunction=function(C,A){var E=(typeof C=="string")?C:C.id;var B=E+"_"+A;var D=$$AC.ElementFunctions[B];if(D){return D}C=$el(E);if(C){return C[A]}return null};$$AC.attachFunction=function(C,A,D){var E=(typeof C=="string")?C:C.id;var B=E+"_"+A;$$AC.ElementFunctions[B]=D;return C};$$AC.executeFunction=function(D,B,A,G){G=(G==null)?false:G;A=(A==null)?[]:A;var H=(typeof D=="string")?D:D.id;D=$el(H);var C=H+"_"+B;var E=$$AC.ElementFunctions[C];if(E){switch(A.length){case 0:return E();case 1:return E(A[0]);case 2:return E(A[0],A[1]);case 3:return E(A[0],A[1],A[2]);case 4:return E(A[0],A[1],A[2],A[3]);case 5:return E(A[0],A[1],A[2],A[3],A[4]);case 6:return E(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6]);case 8:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7]);case 9:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8]);case 10:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9]);case 11:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9],A[10]);default:throw"too many arguments - only 11 supported currently for method: "+B+", you invoked with "+A.length+", args was: "+$$o.toJSON(A)}}if(D){var E=D[B];var F=typeof (E);if(E&&(F=="function"||($$AB.isIE&&F=="object"))){return D[B]()}}else{if(G){throw"element with ID: "+H+" doesn't have a function named: "+B}}};$$AC.customConditionsForWidget=[];$$AC.customConditionObservers={};$$AC.compileWidget=function(D,I,b){b=b||$$AC.getTagname(D);var C=$$AR.widgets[b];var N="";if ($$l.debugEnabled) $D("compiled widget "+D+", id="+D.id+", tag="+b+", module="+C);if(C){if($$AC.isInterpretiveMode&&C.flashRequired){var H=C.flashVersion||9;var V=null;if(!$$AB.isFlash){V="Flash version "+H+" or greater is required"}else{if($$AB.flashVersion<H){V="Flash version "+H+" or greater is required. Your version is: "+$$AB.flashVersion}}if(V){V=V+'. <a href="http://www.adobe.com/products/flashplayer/" target="_NEW">Download Flash Now</a>';var M='<div class="flash_error" style="border:1px solid #c00;padding:5px;background-color:#fcc;text-align:center;margin:5px;">'+V+"</div>";new Insertion.Before(D,M);Element.remove(D);return }}var T=$$AC.getAndEnsureId(D);var P=C.getAttributes();var Y={};for(var W=0;W<P.length;W++){var V=false;(function(){var d=P[W];var g=D.getAttribute(d.name)||d.defaultValue;if($$o.isFunction(g)){g=d.defaultValue}if(!g&&!d.optional){$$AC.handleElementException(D,null,'required attribute "'+d.name+'" not defined for '+T);V=true}Y[d.name]=g})();if(V){return }}Y["id"]=T;var S=null;if(C.getActions){S=C.getActions();for(var Z=0;Z<S.length;Z++){$$AC.buildCustomAction(S[Z])}}if(C.getConditions){$$AC.customConditionObservers[T]={};var Q=C.getConditions();$$AC.customConditionsForWidget.clear();for(var W=0;W<Q.length;W++){var J=Q[W];$$AC.customConditionsForWidget.push({"name":J,"func":$$AC.widgetCustomFunctionCallback(J)})}}if($$o.isFunction(C.dontParseOnAttributes)){if(!C.dontParseOnAttributes()){$$AC.parseOnAttribute(D)}}else{$$AC.parseOnAttribute(D)}var B=null;try{B=C.buildWidget(D,Y,I)}catch(U){$$AC.handleElementException(D,U,"building widget "+D.id);return }if(D.id!=T){$$AC.removeElementId(T);T=D.id;$$AC.getAndEnsureId(D)}var K=false;if(B){var a=B.position||$$AC.POSITION_REPLACE;var X=a==$$AC.POSITION_REMOVE;if(!X){var M=B.presentation;if(M!=null){$$AC.setElementId(D,T+"_widget");if(B.parent_tag!="none"&&B.parent_tag!=""){var R=B.parent_tag||"div";M="<"+R+' id="'+T+'_temp" style="margin:0;padding:0;display:none">'+M+"</"+R+">"}if($$AB.isIE&&M.indexOf("<app:")!=-1){M=$$AC.addIENameSpace(M)}K=true;switch(a){case $$AC.POSITION_REPLACE:new Insertion.Before(D,M);X=true;break;case $$AC.POSITION_TOP:new Insertion.Top(D,M);break;case $$AC.POSITION_BOTTOM:new Insertion.Bottom(D,M);break;case $$AC.POSITION_BEFORE:new Insertion.Before(D,M);break;case $$AC.POSITION_AFTER:new Insertion.After(D,M);break;case $$AC.POSITION_BODY_TOP:new Insertion.Top($$d.body,M);break;case $$AC.POSITION_BODY_BOTTOM:new Insertion.Bottom($$d.body,M);break;case $$AC.POSITION_HEAD_TOP:new Insertion.Top($$AR.HeadElement,M);break;case $$AC.POSITION_HEAD_BOTTOM:new Insertion.Bottom($$AR.HeadElement,M);break}}}var A=null;if(K){A=$el(T+"_temp");if(!A){A=D.ownerDocument.getElementById(T+"_temp")}$$AC.delegateToContainerProcessors(D,A)}var G=T;var O=D.getAttribute("fieldset");var L=D.id;if(X){$$AC.removeElementId(L);Element.remove(D)}if(A){if(K&&!$el(T)){$$AC.setElementId(A,T);G=T;Y["id"]=T}A.widget=C;A.widgetParameters=Y}if(S){for(var Z=0;Z<S.length;Z++){var F=S[Z];var E=C[F];if(!E){throw"couldn't find method named: "+F+" for module = "+C}(function(){var h=S[Z];var d=C[F];var g=function(i,k,l,s,p,o,r,q){try{d(i,Y,l,s,p,o,r,q)}catch(n){$E("Error executing "+h+" in module "+C.getWidgetName()+". Error "+$$o.getExceptionDetail(n)+", stack="+n.stack)}};$$AC.attachFunction(T,h,g)})()}}if(O&&!C.ignoreFieldset){$$AC.addFieldSet(A,false,O)}if(B.compile){try{C.compileWidget(Y,A)}catch(U){$$AC.handleElementException($el(T),U,"compiling widget "+T+", type "+D.nodeName);return }}if(K&&B.wire&&A){$$AC.compileElement(A,I)}if(A){A.style.display=""}if($$AB.isIE6){$$AB.fixImageIssues.defer()}}}else{if(D.style&&D.style.display!=D.style.originalDisplay){D.style.display=D.style.originalDisplay}}return N};$$AC.widgetCustomFunctionCallback=function(A){return function(H,C,F,K,I,G){var B=H.id;var D=$$AC.parameterRE.exec(C);var J=(D?D[1]:C);var E=D?D[2]:null;if(J==A){var L={"action":F,"delay":I,"elseAction":K,"ifCond":G,"params":E};if($$AC.customConditionObservers[B][A]){$$AC.customConditionObservers[B][A].push(L)}else{$$AC.customConditionObservers[B][A]=[L]}return true}return false}};$$AC.determineScope=function(A){var B=A.getAttribute("scope");if(!B){var C=A.parentNode;if(C){B=C.scope}if(!B){B="appcelerator"}}A.scope=B};$$AC.parseOnAttribute=function(B){if ($$l.debugEnabled) $D("parseOnAttribute ",B.id);var A=B.getAttribute("on");if(A&&$$o.isString(A)){$$AC.compileExpression(B,A,false);return true}return false};$$AC.smartTokenSearch=function(D,F){var G=-1;if(D.indexOf("[")>-1&&D.indexOf("]")>-1){var C=D.indexOf(F);if(C>-1){var A=false;for(var E=C;E>-1;E--){if(D.charAt(E)=="]"){break}if(D.charAt(E)=="["){A=true;break}}var B=false;for(var E=C;E<D.length;E++){if(D.charAt(E)=="["){break}if(D.charAt(E)=="]"){B=true;break}}if(A&&B){G=-1}else{G=D.indexOf(F)}}else{G=C}}else{G=D.indexOf(F)}return G};$$AC.parseExpression=function(J){if(!$$o.isString(J)){throw"value: "+J+" is not a string!"}J=J.gsub("\n"," ");J=J.gsub("\r"," ");J=J.gsub("\t"," ");J=J.trim();var T=[];var M=$$AC.smartSplit(J," or ");for(var Q=0,O=M.length;Q<O;Q++){var I=M[Q].trim();var H=I.indexOf(" then ");if(H<=0){throw"syntax error: expected 'then' for expression: "+I}var N=I.substring(0,H);var E=null;var L=I.substring(H+6);var D=$$AC.smartTokenSearch(L,"else");var S=5;if(D==-1){D=L.indexOf("otherwise");S=10}var K=null;if(D>0){K=L.substring(0,D-1);E=L.substring(D+S)}else{K=L}var A=E||K;var G=null;var P=A.indexOf(" if expr[");if(P!=-1){var U=A.substring(P+9);var B=U.indexOf("]");if(B==-1){throw"error in if expression, missing end parenthesis at: "+K}G=U.substring(0,B);if(E){E=A.substring(0,P)}else{K=A.substring(0,P)}A=U.substring(B+2)}var R=0;var C=$$AC.smartTokenSearch(L,"after ");if(C!=-1){var F=A.substring(C+6);R=$$AU.DateTime.timeFormat(F);if(!G){if(E){E=A.substring(0,C-1)}else{K=A.substring(0,C-1)}}}T.push([null,N,K,E,R,G])}return T};$$AC.compileExpression=function(C,D,A){var G=$$AC.parseExpression(D);if ($$l.debugEnabled) $D("on expression for ",C.id," has ",G.length," condition/action pairs");for(var B=0;B<G.length;B++){var F=G[B];if ($$l.debugEnabled) $D("compiling expression for ",C.id," => condition=[",F[1],"], action=[",F[2],"], elseAction=[",F[3],"], delay=[",F[4],"], ifCond=[",F[5],"]");F[0]=C;var E=$$AC.handleCondition.call(this,F);if(!E){throw"syntax error: unknown condition type: "+F[1]+" for "+D}}};$$AC.parseConditionCondition=function(G,D){var I=true;var B=G?G.evalJSON():null;if(B){for(var H=0,F=B.length;H<F;H++){var A=B[H];var E=A.key.charAt(A.key.length-1)=="!";var C=E?A.key.substring(0,A.key.length-1):A.key;var K=$$AC.getEvaluatedValue(C,D);var J=$$AC.getEvaluatedValue(A.value,D);if(E){if(K==J){I=false;break}}else{if(null==K||K!=J){I=false;break}}}}return I};$$AC.customConditions=[];$$AC.registerCustomCondition=function(A,B){B.metadata=A;$$AC.customConditions.push(B)};$$AC.handleCondition=function(D){var A=D[0];if ($$l.debugEnabled) $D("handleCondition called for ",A);for(var B=0;B<$$AC.customConditionsForWidget.length;B++){var C=$$AC.customConditionsForWidget[B].func;var E=C.apply(C,D);if(E){return true}}for(var B=0;B<$$AC.customConditions.length;B++){var C=$$AC.customConditions[B];var E=C.apply(C,D);if(E){return true}}return false};$$AC.getConditionsMetadata=function(){return Appcelerator.Compile.customConditions.pluck("metadata")};$$AC.parameterRE=/(.*?)\[(.*)?\]/i;$$AC.expressionRE=/^expr\((.*?)\)$/;$$AC.customActions={};$$AC.registerCustomAction=function(A,C){var B=$$o.clone(C);B.build=function(F,D,E){return["try {",C.build(F,D,E),"; }catch(exxx){$$AC.handleElementException",'($el("',F,'"),exxx,"Executing:',D,'");}'].join("")};if(C.parseParameters){B.parseParameters=C.parseParameters}$$AC.customActions[A]=B};$$AC.properCase=function(A){return A.charAt(0).toUpperCase()+A.substring(1)};$$AC.smartSplit=function(C,B){var E=C.split(B);if(E.length==1){return E}var G=[];var D=null;for(var F=0;F<E.length;F++){var A=E[F];if(!D&&A.indexOf("[")>=0&&A.indexOf("]")==-1){if(D){D+=B+A}else{D=A}}else{if(D&&A.indexOf("]")==-1){D+=B+A}else{if(D){G.push(D+B+A);D=null}else{G.push(A)}}}}return G};$$AC.makeConditionalAction=function(E,D,C,A){var B=null;if(C){B="if ("+C+") { "+$$AC.makeAction(E,D,A)+" } "}else{B=$$AC.makeAction(E,D,A)}return B.toFunction(true)};$$AC.makeAction=function(B,P,C){var J="";var H=$$AC.smartSplit(P," and ");for(var N=0,M=H.length;N<M;N++){var O=H[N].trim();var I=O.startsWith("remote:")||O.startsWith("r:");var E=!I&&(O.startsWith("local:")||O.startsWith("l:"));var D=$$AC.parameterRE.exec(O);var G=D!=null?$$AC.getParameters(D[2],(I||E)):null;var F=D!=null?D[1]:O;if(E||I){G=(G||{});if(E&&G["id"]==null){G["id"]=B}if(C){for(var A in C){G[A]=C[A]}}J+='$$AC.fireServiceBrokerMessage("'+B+'","'+F+'",'+$$o.toJSON(G)+", this);"}else{var K=$$AC.customActions[F];if(!K){throw"syntax error: unknown action: "+F+" for "+B}var L=K.parseParameters;if(L&&typeof (L)=="function"){G=L(B,F,D?D[2]||O:O)}J+=K.build(B,F,G)}if(N+1<M){J+="; "}}return J};$$AC.convertMessageType=function(A){return A.replace(/^r:/,"remote:").replace(/^l:/,"local:")};$$AC.getMessageType=function(B){var A=$$AC.parameterRE.exec(B);return $$AC.convertMessageType(A&&A.length>0?A[1]:B)};$$AC.fireServiceBrokerMessage=function(D,B,A,C){(function(){var I=A||{};var J=$el(D);var Q=null;var P=null;if(J){Q=J.getAttribute("fieldset");P=J.scope}for(var F in I){I[F]=$$AC.getEvaluatedValue(I[F],I,C)}var N=B.startsWith("local:")||B.startsWith("l:");if(Q){var K=$$AC.fieldSets[Q];if(K&&K.length>0){for(var M=0,L=K.length;M<L;M++){var H=K[M];var O=$el(H);var E=O.name||H;if(null==I[E]){if(O.type=="radio"&&!O.checked){continue}var G=$$AC.getElementValue(O,true,N);var R=typeof (G);if(G!=null&&(R=="object"||G.length>0||R=="boolean")){I[E]=G}else{I[E]=""}}}}}if(N){if(I["id"]==null){I["id"]=D}if(I["element"]==null){I["element"]=$el(I["id"])}}if(!P||P=="*"){P="appcelerator"}$MQ(B,I,P)}).defer()};$$AC.getElementValue=function(B,D,A){B=$el(B);D=(D==null)?true:D;var C=B.widget;if(C){if(B.widget.getValue){return B.widget.getValue(B.id,B.widgetParameters)}}else{switch($$AC.getTagname(B)){case"input":return $$AC.getInputFieldValue(B,true,A);case"img":return B.src;case"form":return"";default:if(B.value!=undefined){return B.value}return B.innerHTML}}};$$AC.getInputFieldValue=function(B,A,F){var G=$$AC.getTagname(B);if(G!="input"&&G!="textarea"&&G!="select"){return null}F=F==null?true:F;A=(A==null)?false:A;var E=B.getAttribute("type")||"text";var H=Form.Element.Methods.getValue(B);switch(E){case"checkbox":return(H=="on"||H=="checked");case"password":if(!F){var I=B.getAttribute("hash");if(I){var D="";I.split(",").each(function(K){var J=$el(I);if(J){D+=$$AC.getInputFieldValue(J,false,true)}});var C=$$AU.MD5.hex_md5(H+D);return{"hash":C,"auth":$$AU.MD5.hex_md5(C+$$AU.Cookie.GetCookie("appcelerator-auth"))}}}}return $$AC.formatValue(H,!A)};$$AC.getKeyValue=function(A){if(!A){return null}if(A.charAt(0)=="$"){return A}else{if($$AC.expressionRE.test(A)){return A}}return $$AC.formatValue(A,false)};$$AC.getEvaluatedValue=function(H,E,I){if(H&&typeof (H)=="string"){if(H.charAt(0)=="$"){var D=H.substring(1);var A=$el(D);if(A){return $$AC.getElementValue(A,true)}}else{if(!isNaN(parseFloat(H))){return H}else{var F=$$AC.expressionRE.exec(H);if(F){var G=F[1];var B=G.toFunction();var K=I||{};if(E){for(var C in E){if($$o.isString(C)){K[C]=E[C]}}}return B.call(K)}if(I){var J=$$o.getNestedProperty(I,H,null);if(J){return J}}if(E){return $$o.getNestedProperty(E,H,H)}}}}return H};$$AC.formatValue=function(C,A){A=(A==null)?true:A;if(C!=null){var B=typeof (C);if(B=="boolean"||B=="array"||B=="object"){return C}if(C=="true"||C=="false"){return C=="true"}if(C.charAt(0)=="'"&&A){return C}if(C.charAt(0)=='"'){C=C.substring(1,C.length-1)}if(A){return"'"+C+"'"}return C}return""};$$AC.dequote=function(A){if(A&&typeof A=="string"){if(A.charAt(0)=="'"||A.charAt(0)=='"'){A=A.substring(1)}if(A.charAt(A.length-1)=="'"||A.charAt(A.length-1)=='"'){A=A.substring(0,A.length-1)}}return A};$$AC.convertInt=function(A){if(A.charAt(0)=="0"){if(A.length==1){return 0}return $$AC.convertInt(A.substring(1))}return parseInt(A)};$$AC.convertFloat=function(A){return parseFloat(A)};$$AC.numberRe=/^[-+]{0,1}[0-9]+$/;$$AC.floatRe=/^[0-9]*[\.][0-9]*[f]{0,1}$/;$$AC.booleanRe=/^(true|false)$/;$$AC.quotedRe=/^['"]{1}|['"]{1}$/;$$AC.jsonRe=/^\{(.*)?\}$/;var STATE_LOOKING_FOR_VARIABLE_BEGIN=0;var STATE_LOOKING_FOR_VARIABLE_END=1;var STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER=2;var STATE_LOOKING_FOR_VALUE_BEGIN=3;var STATE_LOOKING_FOR_VALUE_END=4;var STATE_LOOKING_FOR_VALUE_AS_JSON_END=5;$$AC.decodeParameterValue=function(C,B){var E=null;if(C!=null&&C.length>0&&!B){var A=$$AC.jsonRe.exec(C);if(A){E=String(A[0]).evalJSON()}if(!E){var D=$$AC.quotedRe.test(C);if(D){E=$$AC.dequote(C)}else{if($$AC.floatRe.test(C)){E=$$AC.convertFloat(C)}else{if($$AC.numberRe.test(C)){E=$$AC.convertInt(C)}else{if($$AC.booleanRe.test(C)){E=(C=="true")}else{E=C}}}}}}if(C=="null"||E=="null"){return null}return E==null?C:E};$$AC.parameterSeparatorRE=/[=:]+/;$$AC.getParameters=function(K,L){if(K==null||K.length==0){return L?{}:[]}if(!$$AC.parameterSeparatorRE.test(K)){if(L){return{key:K,value:null}}else{return[{key:K,value:null}]}}var C=0;var G="";var M=null;var E=L?{}:[];var B=false,I=false;for(var J=0,H=K.length;J<H;J++){var A=K.charAt(J);var D=true;switch(A){case'"':case"'":switch(C){case STATE_LOOKING_FOR_VARIABLE_BEGIN:quoted=true;D=false;C=STATE_LOOKING_FOR_VARIABLE_END;B=A=='"';I=A=="'";break;case STATE_LOOKING_FOR_VARIABLE_END:var F=K.charAt(J-1);if(B&&A=="'"||I&&A=='"'){}else{if(F!="\\"){C=STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER;D=false;M=G.trim();G=""}}break;case STATE_LOOKING_FOR_VALUE_BEGIN:D=false;B=A=='"';I=A=="'";C=STATE_LOOKING_FOR_VALUE_END;break;case STATE_LOOKING_FOR_VALUE_END:var F=K.charAt(J-1);if(B&&A=="'"||I&&A=='"'){}else{if(F!="\\"){C=STATE_LOOKING_FOR_VARIABLE_BEGIN;D=false;if(L){E[M]=$$AC.decodeParameterValue(G,B||I)}else{E.push({key:M,value:$$AC.decodeParameterValue(G,B||I)})}M=null;B=false,I=false;G=""}}break}break;case"=":case":":switch(C){case STATE_LOOKING_FOR_VARIABLE_END:D=false;C=STATE_LOOKING_FOR_VALUE_BEGIN;M=G.trim();G="";break;case STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER:D=false;C=STATE_LOOKING_FOR_VALUE_BEGIN;break}break;case",":switch(C){case STATE_LOOKING_FOR_VARIABLE_BEGIN:D=false;C=STATE_LOOKING_FOR_VARIABLE_BEGIN;break;case STATE_LOOKING_FOR_VALUE_END:if(!B&&!I){C=STATE_LOOKING_FOR_VARIABLE_BEGIN;D=false;if(L){E[M]=$$AC.decodeParameterValue(G,B||I)}else{E.push({key:M,value:$$AC.decodeParameterValue(G,B||I)})}M=null;B=false,I=false;G=""}break}break;case" ":break;case"\n":case"\t":case"\r":D=false;break;case"{":switch(C){case STATE_LOOKING_FOR_VALUE_BEGIN:C=STATE_LOOKING_FOR_VALUE_AS_JSON_END}break;case"}":if(C==STATE_LOOKING_FOR_VALUE_AS_JSON_END){C=STATE_LOOKING_FOR_VARIABLE_BEGIN;D=false;G+="}";if(L){E[M]=$$AC.decodeParameterValue(G,B||I)}else{E.push({key:M,value:$$AC.decodeParameterValue(G,B||I)})}M=null;B=false,I=false;G=""}break;default:switch(C){case STATE_LOOKING_FOR_VARIABLE_BEGIN:C=STATE_LOOKING_FOR_VARIABLE_END;break;case STATE_LOOKING_FOR_VALUE_BEGIN:C=STATE_LOOKING_FOR_VALUE_END;break}}if(D){G+=A}if(J+1==H&&M){G=G.strip();if(L){E[M]=$$AC.decodeParameterValue(G,B||I)}else{E.push({key:M,value:$$AC.decodeParameterValue(G,B||I)})}}}return E};$$AC.executeAfter=function(D,A,B){var C=(B!=null)?function(){D.call(B)}:D;if(A>0){C.delay(A/1000)}else{C()}};$$AC.handleElementException=function(C,F,B){var E=false;if(!C){var H=$$AC.generateId();new Insertion.Bottom($$d.body,'<div id="'+H+'"></div>');E=true;C=$el(H)}var A=C?$$AC.getTagname(C):$$d.body;var G="<strong>Appcelerator Processing Error:</strong><div>Element ["+A+"] ith ID: "+(C.id||C)+" has an exception: <div>"+$$o.getExceptionDetail(F,true)+"</div><div>in <code>"+(B||"unknown")+"</code></div></div>";$E(G);switch(A){case"input":case"textbox":C.value=C.id;E=true;break;case"select":C.options.length=0;C.options[0]=new Option(C.id,C.id);E=true;break;case"img":C.src=Appcelerator.ImagePath+"/warning.png";E=true;break;case"a":$$AC.setHTML(C,C.id);E=true;break;case"script":E=true;break}if(A.indexOf(":")>0){E=true}if(E){Element.remove(C);var H=$$AC.generateId();new Insertion.Top($$d.body,'<div style="2px dotted #900"><img src="'+Appcelerator.ImagePath+'warning.png"/> <span id="'+H+'"></span></div>');C=$el(H);var D=C.parentNode;D.style.font="auto";D.style.display="block";D.style.visibility="visible";D.style.color="black";D.style.margin="0px auto";D.style.padding="5px";D.style.border="1px solid #c00";D.style.zIndex="9999";D.style.opacity="1.0";D.style.backgroundColor="#fcc"}$$AC.setHTML(C,G)};$$AC.fieldSets={};$$AC.addFieldSet=function(C,D,B){D=(D==null)?false:D;B=B||C.getAttribute("fieldset");if(B){var A=$$AC.fieldSets[B];if(!A){A=[];$$AC.fieldSets[B]=A}if(false==D){if ($$l.debugEnabled) $D("adding = ",C.id," to field = ",B,", values=",A);A.push(C.id)}return A}return null};$$AC.removeFieldSet=function(C){var B=C.getAttribute("fieldset");if(B){var A=$$AC.fieldSets[B];if(A){A.remove(C.id)}}};$$AC.updateFieldsetValues=function(K,J,I){var C=$$o.getNestedProperty(J,I,null);if(!C){C=J}if(K){var E=$$AC.fieldSets[K];if(E&&E.length>0){for(var G=0,F=E.length;G<F;G++){var D=E[G];var H=$el(D);var A=H.name||H.getAttribute("name")||D;var B=$$o.getNestedProperty(C,A,null);if(B){$$AC.setElementValue(H,B)}}}}};$$AC.setElementValue=function(C,F){var H;if(C&&F){var E=C.widget;if(E){if(E.setValue){try{E.setValue(C.id,C.widgetParameters,F)}catch(G){$E(G)}}}else{switch($$AC.getTagname(C)){case"input":var D=C.getAttribute("type")||"text";switch(D){case"password":case"hidden":case"text":H=true;C.value=F;break;case"button":case"submit":C.value=F;break;case"checkbox":H=true;if(F==true||F=="true"){C.checked=true}else{C.checked=false}break}break;case"textarea":H=true;C.value=F;break;case"select":var A=C.options;for(var B=0;B<A.length;B++){if(A[B].value==F){C.selectedIndex=B;break}}break;case"a":C.href=F;break;case"img":C.src=F;break;default:C.innerHTML=F;break}}}if(H){$$AC.executeFunction(C,"revalidate")}};$$AC.CSSAttributes=["color","cursor","font","font-family","font-weight","border","border-right","border-bottom","border-left","border-top","border-color","border-style","border-width","background","background-color","background-attachment","background-position","position","display","visibility","overflow","opacity","filter","top","left","right","bottom","width","height","margin","margin-left","margin-right","margin-bottom","margin-top","padding","padding-left","padding-right","padding-bottom","padding-top"];$$AC.isCSSAttribute=function(C){if(C=="style"){return true}for(var F=0,A=$$AC.CSSAttributes.length;F<A;F++){if($$AC.CSSAttributes[F]==C){return true}var D=$$AC.CSSAttributes[F];var B=D.indexOf("-");if(B>0){var E=D.substring(0,B)+D.substring(B+1).capitalize();if(E==C){return true}}}return false};$$AC.convertCSSAttribute=function(B){var A=B.indexOf("-");if(A>0){var C=B.substring(0,A)+B.substring(A+1).capitalize();return C}return B};$$AU.ServerConfig.addConfigListener(function(){if($$AC.compileOnLoad){var A=Prototype.K;$$AC.compileDocument(A)}});$$AC.setHTML=function(B,A){$el(B).update(A);if($$AB.isIE6){$$AB.fixImageIssues.defer()}};var AppceleratorCompilerMethods={on:function(B,E,C){$$AC.destroy(B);if(C){for(var A in C){if($$o.isString(A)){var D=C[A];if($$o.isString(D)||$$o.isNumber(D)||$$o.isBoolean(D)){B.setAttribute(A,D)}}}$$AC.delegateToAttributeListeners(B)}$$AC.compileExpression(B,E,false);return B},get:function(A){return $el(A)}};Element.addMethods(AppceleratorCompilerMethods);$$o.extend(Array.prototype,{on:function(C,A){for(var D=0;D<this.length;D++){var B=this[D];if(B&&$$o.isElement(B)&&$$o.isFunction(B.on)){B.on(C,A)}}return this},withoutAll:function(A){return this.without.apply(this,A)}});$$AU.Dom={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,eachAttribute:function(B,F,J,E){E=E==null?true:E;J=J||[];if(B.attributes){var A=B.attributes;for(var I=0,G=A.length;I<G;I++){var K=A[I];if(K&&K.value!=null&&E==K.specified){var H=typeof (K);if(K.value.startsWith("function()")){continue}if(H=="function"||H=="native"||K.name.match(/_moz\-/)){continue}if(J.length>0){var L=false;for(var D=0,C=J.length;D<C;D++){if(J[D]==K.name){L=true;break}}if(L){continue}}F(K.name,K.value,K.specified,I,A.length)}}return I>0}return false},getTagAttribute:function(B,E,A,D){try{var C=B.getElementsByTagName(E)[0].getAttribute(A);if(null!=C){return C}}catch(F){}return D},each:function(D,B,C){if(typeof (D)=="array"){D.each(function(H){if(H.nodeType==B){C(H)}})}else{if(typeof (D)=="object"||typeof (D)=="function"&&$$n.userAgent.match(/WebKit/i)){for(var G=0,A=D.length;G<A;G++){var F=D[G];if(typeof F.nodeType!="undefined"&&F.nodeType==B){try{C(F)}catch(E){if(E==$break){break}else{if(E!=$continue){throw E}}}}}}else{throw ("unsupported dom nodelist type: "+typeof (D))}}},getText:function(D,E,F,K,A){var J=[];var C=D.childNodes;var G=C?C.length:0;for(var H=0;H<G;H++){var B=C[H];if(F){B=F(B)}if(B.nodeType==this.COMMENT_NODE){if(!A){J.push("<!-- "+B.nodeValue+" -->")}continue}if(B.nodeType==this.ELEMENT_NODE){J.push(this.toXML(B,true,null,null,E,K,A))}else{if(B.nodeType==this.TEXT_NODE){var I=B.nodeValue;if(I){J.push(I);if(K){J.push("\n")}}}else{if(B.nodeValue==null){J.push(this.toXML(B,true,null,null,E,K,A))}else{J.push(B.nodeValue||"")}}}}return J.join("")},hasAttribute:function(D,F,B){if(!D.hasAttribute){if(D.attributes){for(var E=0,A=D.attributes.length;E<A;E++){var C=D.attributes[E];if(C&&C.specified){if(B&&C.name==F||!B&&C.name.toLowerCase()==F.toLowerCase()){return true}}}}return false}else{return D.hasAttribute(F)}},getAttribute:function(D,F,B){if(B){return D.getAttribute(F)}else{for(var E=0,A=D.attributes.length;E<A;E++){var C=D.attributes[E];if(C&&C.specified){if(C.name.toLowerCase()==F.toLowerCase()){return C.value}}}return null}},toXML:function(I,H,N,C,D,P,B){N=(N||I.nodeName.toLowerCase());var E=[];E.push("<"+N);if(C){E.push(" id='"+C+"' ")}if(I.attributes){var M=0;var A=I.attributes;for(var L=0,F=A.length;L<F;L++){var O=A[L];if(O&&O.value!=null&&O.specified){var K=typeof (O);if(O.value&&O.value.startsWith("function()")){continue}if(K=="function"||K=="native"||O.name.match(/_moz\-/)){continue}if(C!=null&&O.name=="id"){continue}if($$AB.isIE&&!D&&O.name=="style"&&I.style&&I.style.cssText){var J=I.style.cssText;E.push(' style="'+J+'"');M++;continue}var G=String.escapeXML(O.value);E.push(" "+O.name+'="'+G+'"');M++}}}E.push(">");if(H&&I.childNodes&&I.childNodes.length>0){E.push("\n");E.push(this.getText(I,D,null,P,B))}E.push("</"+N+">"+(P?"\n":""));return E.join("")},getAndRemoveAttribute:function(B,A){var C=B.getAttribute(A);if(C){B.removeAttribute(A)}return C},getAttributesString:function(B,C){var A="";this.eachAttribute(B,function(D,E){if(false==(C&&C.indexOf(D)>-1)){A+=D+'="'+String.escapeXML(E||"")+'" '}},null,true);return A},createElement:function(B,A){var C=$$d.createElement(B);if(A){if(A["parent"]){A["parent"].appendChild(C)}if(A["className"]){C.className=A["className"]}if(A["html"]){C.innerHTML=A["html"]}if(A["children"]){A["children"].each(function(D){C.appendChild(D)})}}return C}};try{if(typeof (DOMNodeList)=="object"){DOMNodeList.prototype.length=DOMNodeList.prototype.getLength}if(typeof (DOMNode)=="object"){DOMNode.prototype.childNodes=DOMNode.prototype.getChildNodes;DOMNode.prototype.parentNode=DOMNode.prototype.getParentNode;DOMNode.prototype.nodeType=DOMNode.prototype.getNodeType;DOMNode.prototype.nodeName=DOMNode.prototype.getNodeName;DOMNode.prototype.nodeValue=DOMNode.prototype.getNodeValue}}catch(e){}$$AU.Cookie=Class.create();$$AU.Cookie={toString:function(){return"[$$AU.Cookie]"},getCookieVal:function(B){var A=$$d.cookie.indexOf(";",B);if(A==-1){A=$$d.cookie.length}return unescape($$d.cookie.substring(B,A))},GetCookie:function(D){var B=escape(D)+"=";var F=B.length;var A=$$d.cookie.length;var E=0;while(E<A){var C=E+F;var H=$$d.cookie.substring(E,C);if(H==B){var G=this.getCookieVal(C);if(G!=null&&G!=""){if ($$l.debugEnabled) $D(this,"GetCookie",D+"="+G);return G}else{if ($$l.debugEnabled) $D(this,"GetCookie",D+"=null");return null}}E=$$d.cookie.indexOf(" ",E)+1;if(E==0){break}}if ($$l.debugEnabled) $D(this,"GetCookie",D+"=null");return null},SetCookie:function(B,H){var G=this.SetCookie.arguments;var E=this.SetCookie.arguments.length;var D=(E>2)?G[2]:null;var I=(E>3)?G[3]:null;var F=(E>4)?G[4]:null;var A=(E>5)?G[5]:false;var C=escape(B)+"="+escape(H)+((D==null)?"":("; expires="+D.toGMTString()))+((I==null)?"":("; path="+I))+((F==null)?"":("; domain="+F))+((A)?"; secure":"");if ($$l.debugEnabled) $D(this,"SetCookie",C);$$d.cookie=C},DeleteCookie:function(){var D=new Date();D.setTime(D.getTime()+(-1*24*60*60*1000));var A="; expires="+D.toGMTString();var C=$A(arguments);var B=this;C.each(function(E){if ($$l.debugEnabled) $D(B,"DeleteCookie",E);$$d.cookie=E+"="+A+"; path=/";$$d.cookie=E+"="+A+";"})},HasCookie:function(A){return this.GetCookie(A)!=null}};if($$w.location.protocol!="file:"){(function(){if(Appcelerator.Config["cookie_check"]){$$AU.Cookie.SetCookie("CookieCheck","1");var A=$$AU.Cookie.GetCookie("CookieCheck");if(!A){$$w.location=Appcelerator.DocumentPath+"upgrade_cookies.html"}else{$$AU.Cookie.DeleteCookie("CookieCheck")}}})()}$$AU.ServiceBroker={DEBUG:false,init:false,instanceid:Appcelerator.instanceid,serverPath:Appcelerator.DocumentPath+"servicebroker",interceptors:[],messageQueue:[],localMessageQueue:[],localTimer:null,localTimerPoll:10,initQueue:[],timer:null,time:null,serverDown:false,poll:false,fetching:false,localDirectListeners:{},remoteDirectListeners:{},localPatternListeners:[],remotePatternListeners:[],devmode:($$w.location.href.indexOf("devmode=1")>0),disabled:this.devmode||($$w.location.href.indexOf("file:/")==0)||Appcelerator.Parameters.get("mbDisabled")=="1",remoteDisabled:this.disabled||Appcelerator.Parameters.get("remoteDisabled")=="1",marshaller:"xml/json",transport:"appcelerator",multiplex:true,toString:function(){return"[ServiceBroker]"},addInterceptor:function(A){if ($$l.debugEnabled) $D(this.toString()+" Adding interceptor: "+A);this.interceptors.push(A)},removeInterceptor:function(A){if ($$l.debugEnabled) $D(this.toString()+"Removing interceptor: "+A);this.interceptors.remove(A)},convertType:function(A){if(A.startsWith("l:")){return A.replace(/^l:/,"local:")}if(A.startsWith("r:")){return A.replace(/^r:/,"remote:")}return A},addListenerByType:function(I,H){I=this.convertType(I.trim());var G=I.indexOf(":");var E=(G!=-1)?(I.substring(0,G)):"both";var D=(G!=-1)?I.substring(G+1):I;var F=D.charAt(0)=="~";if(E=="local"||E=="both"){var C=null;if(F){this.localPatternListeners.push([H,new RegExp(D.substring(1))]);var B=H["_removePatternListenerArrays"];if(!B){B=[];H["_removePatternListenerArrays"]=B}B.push(this.localPatternListeners)}else{C=this.localDirectListeners[D];if(!C){C=[];this.localDirectListeners[D]=C}var A=H["_removeListenerArrays"];if(!A){A=[];H["_removeListenerArrays"]=A}A.push(C);C.push(H)}}if(E=="remote"||E=="both"){var C=null;if(F){this.remotePatternListeners.push([H,new RegExp(D.substring(1))]);var B=H["_removePatternListenerArrays"];if(!B){B=[];H["_removePatternListenerArrays"]=B}B.push(this.remotePatternListeners)}else{C=this.remoteDirectListeners[D];if(!C){C=[];this.remoteDirectListeners[D]=C}var A=H["_removeListenerArrays"];if(!A){A=[];H["_removeListenerArrays"]=A}A.push(C);C.push(H)}}},addListener:function(F){var D=new Date().getTime();var C=F["accept"];if(!C){alert("add listener problem, callback incorrect and has no accept function\n"+F);return }var B=C.call(F);if(B.length==1){this.addListenerByType(B[0],F)}else{for(var E=0,A=B.length;E<A;E++){this.addListenerByType(B[E],F)}}if(this.DEBUG){if ($$l.debugEnabled) $D(this.toString()+" Added listener: "+F+" ("+(new Date().getTime()-D)+" ms)")}},removeListener:function(J){var A=new Date().getTime();var C=J["_removeListenerArrays"];if(C&&C.length>0){for(var H=0,E=C.length;H<E;H++){C[H].remove(J)}delete J["_removeListenerArrays"]}var D=J["_removePatternListenerArrays"];if(D&&D.length>0){for(var H=0,E=D.length;H<E;H++){var G=D[H];if(G&&G.length>0){var K=null;for(var I=0,B=G.length;I<B;I++){var F=G[I];if(F[0]==J){K=F;break}}if(K){G.remove(K)}}}}if(this.DEBUG){if ($$l.debugEnabled) $D(this.toString()+" Removed listener: "+J+" ("+(new Date().getTime()-A)+" ms)")}},triggerComplete:function(){this.compileComplete=true;this.runInitQueue();this.startLocalTimer()},triggerConfig:function(){this.configComplete=true;this.runInitQueue()},runInitQueue:function(){if(this.compileComplete&&this.configComplete){this.init=true;if(this.initQueue&&this.initQueue.length>0){for(var A=0;A<this.initQueue.length;A++){this.queue(this.initQueue[A][0],this.initQueue[A][1])}this.initQueue=null}}},queue:function(B,M){if(!$$AU.ServiceBroker.init){if ($$l.debugEnabled) $D(B.type+" will be queued, not yet initialized");this.initQueue.push([B,M]);return }var J=B["type"];if(!J){throw"type must be specified on the message"}J=this.convertType(J);var O=B["scope"]||"appcelerator";var H=B["version"]||"1.0";if(this.interceptors.length>0){var D=true;for(var I=0,G=this.interceptors.length;I<G;I++){var F=this.interceptors[I];var C=F["interceptQueue"];if(C){var P=C.apply(F,[B,M,J,O,H]);if(this.DEBUG){if ($$l.debugEnabled) $D(self.toString()+" Invoked interceptor: "+F+", returned: "+P+" for message: "+J)}if(P!=null&&!P){D=false;break}}}if(!D){if ($$l.debugEnabled) $D(this+" interceptor squashed event: "+B["type"]);return }}var K=J.indexOf(":");var L=K!=-1?J.substring(0,K):"local";var A=K!=-1?J.substring(K+1):J;B["type"]=A;var E=(B["data"])?B["data"]:{};if($$l.debugEnabled){var N=null;switch(typeof (E)){case"object":case"array":N=$$o.toJSON(E);break;default:N=E.toString();break}if ($$l.debugEnabled) $D(this+" message queued: "+A+", data: "+N+", version: "+H+", scope: "+O)}this.localMessageQueue.push([A,E,L,O,H]);if(L=="remote"){if(this.messageQueue){if(!this.devmode&&!this.remoteDisabled){this.messageQueue.push([B,M,O,H]);this.startTimer(B["immediate"]||false)}}else{$E(this+" message:"+A+" ignored since we don't have a messageQueue!")}}},dispatch:function(B){var Q=B.requestid;var M=B.type;var G=B.datatype;var O=B.scope;var F=B.data;if(this.interceptors.length>0){var D=true;for(var L=0,I=this.interceptors.length;L<I;L++){var H=this.interceptors[L];var C=H["interceptDispatch"];if(C){var P=C.apply(H,[Q,M,B,G,O]);if(P!=null&&!P){D=false;break}}}if(!D){return }}var E=$$AU.Performance.createStat();var J=this.remoteDirectListeners[M];if(J&&J.length>0){for(var L=0,I=J.length;L<I;L++){this.sendToListener(J[L],M,F,G,"remote",O)}}if(this.remotePatternListeners.length>0){for(var L=0,I=this.remotePatternListeners.length;L<I;L++){var N=this.remotePatternListeners[L];var A=N[0];var K=N[1];if(K.test(M)){this.sendToListener(A,M,F,G,"remote",O)}}}$$AU.Performance.endStat(E,M,"remote")},sendToListener:function(C,K,B,F,L,M){if(this.interceptors.length>0){var E=true;for(var J=0,H=this.interceptors.length;J<H;J++){var G=this.interceptors[J];var D=G.interceptSendToListener;if(D){var N=D.apply(G,[C,K,B,F,L,M]);if(N!=null&&!N){E=false;break}}}if(!E){return }}var A=C.acceptScope;if(A){if(!A(M)){return }}if ($$l.debugEnabled) $D(this.toString()+" forwarding "+K+" to "+C+", direction:"+L+", datatype:"+F+", data: "+B);try{C.onMessage.apply(C,[K,B,F,L,M])}catch(I){$E("Unhandled Exception dispatching:"+K+", "+B+", to listener:"+C+", "+$$o.getExceptionDetail(I))}return true},XML_REGEXP:/^<(.*)>$/,deliver:function(C){if(this.messageQueue==null){$E(this.toString()+", deliver called but no message queue");return }if(this.remoteDisabled){return }var E=$$AU.ServiceBrokerMarshaller[this.marshaller];if(!E){$E(this+" - no marshaller defined, will not send message to remote endpoint");this.remoteDisabled=true;return }var F=$$AU.ServiceBrokerTransportHandler[this.transport];if(!F){$E(this+" - no transport handler defined, will not send message to remote endpoint");this.remoteDisabled=true;return }this.fetching=true;var J=E.serialize(this.messageQueue,this.multiplex);var H=J.postBody;var I=J.contentType;var G=F.prepare(this,C,H,I);if(this.multiplex){this.messageQueue.clear()}else{if(this.messageQueue.length>0){this.messageQueue.removeAt(0)}}var B=G.url;var A=G.method;var D=G.postBody;var I=G.contentType;this.sendRequest(B,A,D,I,E,F);if(!this.multiplex&&this.messageQueue.length>0){this.deliver.defer()}},sendRequest:function(B,A,F,H,D,E,G){G=(G||0)+1;if(G>3){$E("failed to send request too many times to "+B);return }var I=this;var C=false;new Ajax.Request(B,{asynchronous:true,method:A,postBody:F,contentType:H,evalJSON:false,evalJS:false,onComplete:function(){I.fetching=false},onSuccess:function(J){(function(){I.fetching=false;I.startTimer(false);if(J&&J.status&&J.status>=200&&J.status<300){if(I.serverDown){I.serverDown=false;var L=new Date().getTime()-I.serverDownStarted;if($$l.infoEnabled){$$l.info("["+$$AU.DateTime.get12HourTime(new Date(),true,true)+"] "+I.toString()+" Server is UP at "+I.serverPath)}I.queue({type:"local:appcelerator.servicebroker.server.up",data:{path:this.serverPath,downtime:L}})}var K=parseInt(J.getResponseHeader("Content-Length")||"1");var O=J.getResponseHeader("Content-Type")||"unknown";if(K>0){var M=D.deserialize(J,parseInt(K),O);if(M&&M.length>0){for(var N=0;N<M.length;N++){I.localMessageQueue.push([M[N].type,M[N].data,"remote",M[N].scope,M[N].version||"1.0"])}}}}}).defer()},onFailure:function(M,K){if(M.status==400){if(C){I.queue({type:"l:appcelerator.servicebroker.failed",data:{}});$$l.warn("Failed authentication");return }else{C=true;var J=E.prepare(I,false,F,H);var L=J.url;I.sendRequest(L,A,F,H,D,E,G+1);return }}if(M.status==406){I.sendRequest(B,A,F,H,D,G);return }I.fetching=false;if(M.status>=500||M.status==404){I.serverDown=true;I.serverDownStarted=new Date().getTime();$$l.warn(I.toString()+" Server is DOWN at "+I.serverPath);I.queue({type:"local:appcelerator.servicebroker.server.down",data:{path:I.serverPath}})}else{$E(I.toString()+" Failure: "+M.status+" "+M.statusText)}I.startTimer(false)},onException:function(N,J){var M=new String(J);var K=true;var L=true;I.fetching=false;if(M.indexOf("NS_ERROR_NOT_AVAILABLE")!=-1&&M.indexOf("nsIXMLHttpRequest.status")!=-1){K=false}if(M.indexOf("NS_ERROR_FILE_NOT_FOUND")!=-1){L=false}if(K){$E(I.toString()+" Exception: "+M)}if(L){I.startTimer(false)}}})},destroy:function(){this.cancelTimer();this.cancelLocalTimer();if(this.messageQueue){this.messageQueue.clear()}if(this.localMessageQueue){this.localMessageQueue.clear()}this.messageQueue=null;this.time=null;if(this.localDirectListeners){for(var B in this.localDirectListeners){var A=this.localDirectListeners[B];if($$o.isArray(A)){A.clear()}}this.localDirectListeners=null}if(this.remoteDirectListeners){for(var B in this.remoteDirectListeners){var A=this.remoteDirectListeners[B];if($$o.isArray(A)){A.clear()}}this.remoteDirectListeners=null}if(this.localPatternListeners){this.localPatternListeners.clear()}this.localPatternListeners=null;if(this.remotePatternListeners){this.remotePatternListeners.clear()}this.remotePatternListeners=null},cancelLocalTimer:function(){if(this.locaTimer){clearInterval(this.locaTimer);this.locaTimer=0}},cancelTimer:function(){if(this.timer){clearTimeout(this.timer);this.timer=0}},onServiceBrokerInvalidContentType:function(A){if($$l.fatalEnabled){$$l.fatal(this+", received an invalid content type ("+(A||"none")+"), probably need to re-login, redirecting to landing page")}},onServiceBrokerInvalidLogin:function(){if($$l.fatalEnabled){$$l.fatal(this+", received an invalid credentials, probably need to re-login, redirecting to landing page")}},startLocalTimer:function(){this.localTimer=setInterval(function(){var F=this.localMessageQueue;if(F&&F.length){var O=F[0];var A=O[0];var D=O[1];var L=O[2];var N=O[3];var H=O[4];var E=$$AU.Performance.createStat();switch(L){case"remote":var C=this.remoteDirectListeners[A];var M=this.remotePatternListeners;if(C){for(var J=0,G=C.length;J<G;J++){this.sendToListener(C[J],A,D,"JSON",L,N,H)}}if(M){for(var J=0,G=M.length;J<G;J++){var K=M[J];var B=K[0];var I=K[1];if(I.test(A)){this.sendToListener(B,A,D,"JSON",L,N,H)}}}break;case"local":C=this.localDirectListeners[A];M=this.localPatternListeners;if(C){for(var J=0,G=C.length;J<G;J++){this.sendToListener(C[J],A,D,"JSON",L,N,H)}}if(M){for(var J=0,G=M.length;J<G;J++){var K=M[J];var B=K[0];var I=K[1];if(I.test(A)){this.sendToListener(B,A,D,"JSON",L,N,H)}}}break}$$AU.Performance.endStat(E,A,L);F.remove(O)}}.bind(this),this.localTimerPoll)},startTimer:function(D){if(!this.init){if ($$l.debugEnabled) $D(this.toString()+" - startTimer called but not running yet");return }if(this.disabled){return }this.cancelTimer();if(this.messageQueue){if(!this.poll){if(this.messageQueue.length>0&&!this.fetching){this.emptyQueueHits=0;this.deliver(true);return }return }if(D&&!this.fetching){this.emptyQueueHits=0;this.deliver(D);return }var B=new Date().getTime();if(this.time){if(this.messageQueue.length>0&&B-this.time>=150&&!this.fetching){this.emptyQueueHits=0;this.deliver(false);return }}this.time=B;var A=this;var C=this.downServerPoll;if(!this.serverDown){if(this.messageQueue.length>1){C=this.moreThanOneEntryQueuePoll;this.emptyQueueHits=0}else{if(this.messageQueue.length>0){C=this.oneEntryQueuePoll;this.emptyQueueHits=0}else{C=Math.min(this.emptyQueuePollMax,this.emptyQueuePoll+(this.emptyQueueHits*this.emptyQueueDecay));this.emptyQueueHits++}}}this.timer=setTimeout(function(){if(!A.fetching){A.deliver(false)}},C)}else{$E(toString()+" startTimer called and we have no message queue")}},maxWaitPollTime:200,maxWaitPollTimeWhenSending:0,moreThanOneEntryQueuePoll:50,oneEntryQueuePoll:200,emptyQueuePoll:2000,emptyQueuePollMax:30000,emptyQueueDecay:500,emptyQueueHits:0,downServerPoll:10000};function $MQ(C,D,B,A){$$AU.ServiceBroker.queue({type:C,data:D||{},scope:B,version:A||"1.0"})}function $MQL(B,E,D,A){var C={accept:function(){if($$o.isArray(B)){return B}return[B]},acceptScope:function(F){if(D){return D=="*"||F==D}return true},onMessage:function(H,J,G,K,F){try{E.apply(E,[H,J,G,K,F])}catch(I){$$AC.handleElementException(A,I)}}};$$AU.ServiceBroker.addListener(C);if(A){$$AC.addTrash(A,function(){$$AU.ServiceBroker.removeListener(C)})}return C}$$AU.ServiceBrokerMarshaller={};$$AU.ServiceBrokerMarshaller["xml/json"]={currentRequestId:1,jsonify:function(G){var E=this.currentRequestId++;var D=G[2];var A=G[3];var C="JSON";var F=G[0]["data"];var B="<message requestid='"+E+"' type='"+G[0]["type"]+"' datatype='"+C+"' scope='"+D+"' version='"+A+"'>";B+="<![CDATA["+$$o.toJSON(F)+"]]>";B+="</message>";return B},serialize:function(I,A){var D=null;if(I.length>0){D="";var B=new Date();var G=B.getTime();D="<?xml version='1.0' encoding='UTF-8'?>\n";var C=B.getTimezoneOffset()/60;var E=$$AU.IdleManager.getIdleTimeInMS();D+="<request version='1.0' idle='"+E+"' timestamp='"+G+"' tz='"+C+"'>\n";if(A){for(var H=0,F=I.length;H<F;H++){D+=this.jsonify(I[H])}}else{D+=this.jsonify(I[0])}D+="</request>"}return{"postBody":D,"contentType":"text/xml"}},deserialize:function(D,B,L){if(D.status==202){return null}if(L.indexOf("text/xml")==-1&&L.indexOf("application/xml")==-1){$E(this+", invalid content type: "+L+", expected: text/xml or application/xml");return null}var G=D.responseXML;if(!G){return null}var C=G.documentElement.childNodes;var K=null;if(C&&C.length>0){K=[];for(var J=0;J<C.length;J++){var A=C.item(J);if(A.nodeType==$$AU.Dom.ELEMENT_NODE){var O=A.getAttribute("requestid");try{var I=A.getAttribute("type");var F=A.getAttribute("datatype");var N=A.getAttribute("scope")||"appcelerator";var E,M;try{M=$$AU.Dom.getText(A);E=M.evalJSON();E.toString=function(){return $$o.toJSON(this)}}catch(H){$E("Error received evaluating: "+M+" for type: "+I+", error: "+$$o.getExceptionDetail(H));return }if ($$l.debugEnabled) $D(this.toString()+" received remote message, type:"+I+",data:"+E);K.push({type:I,data:E,datatype:F,scope:N,requestid:O})}catch(H){$E(this+" - Error in dispatch of message. "+$$o.getExceptionDetail(H))}}}}return K}};$$AU.ServiceBrokerMarshaller["application/json"]={prepareMsg:function(B){var A={};A["type"]=B[0]["type"];A["scope"]=B[2];A["version"]=B[3];A["data"]=B[0]["data"];return A},serialize:function(D,C){var B={};if(D.length>0){var E={};var F=new Date();B["timestamp"]=F.getTime()+(F.getTimezoneOffset()*60*1000);B["version"]="1.0";B["messages"]=[];if(C){for(var G=0,A=D.length;G<A;G++){B["messages"].push(this.prepareMsg(D[G]))}}else{B["messages"].push(this.prepareMsg(D[0]))}}return{"postBody":$$o.toJSON(B),"contentType":"application/json"}},deserialize:function(B,A,J){if(B.status==202){return null}if(J.indexOf("application/json")==-1){$E(this+", invalid content type: "+J+", expected: application/json");return null}var L=B.responseText.evalJSON();var C=L["messages"];var I=[];for(var G=0;G<C.length;G++){try{message=C[G];var H=message["type"];var E=message["datatype"];var K=message["scope"]||"appcelerator";var D=message["data"];message["datatype"]="JSON";if ($$l.debugEnabled) $D(this.toString()+" received remote message, type:"+H+",data:"+D);I.push({type:H,data:D,datatype:E,scope:K})}catch(F){$E(this+" - Error in dispatch of message. "+$$o.getExceptionDetail(F))}}return I}};function jsonParameterEncode(A,B,E){switch(typeof (B)){case"string":case"number":case"boolean":E.push(A+"="+encodeURIComponent(B));break;case"array":case"object":if($$o.isArray(B)){for(var D=0;D<B.length;D++){jsonParameterEncode(A+"."+D,B[D],E)}}else{for(var C in B){jsonParameterEncode(A+"."+C,B[C],E)}}break;case"function":break;default:E.push(encodeURIComponent(A)+"=");break}}function jsonToQueryParams(B){var C=[];for(var A in B){var D=B[A];jsonParameterEncode(A,D,C)}return C.join("&")}function json_encode_xml(C,A){var E={};var D=A[C.nodeName];if(D){if($$o.isArray(D)){D.push(E)}else{A[C.nodeName]=[D,E]}}else{A[C.nodeName]=E}$$AU.Dom.eachAttribute(C,function(G,H){E[G]=H});var B=false;$$AU.Dom.each(C.childNodes,$$AU.Dom.ELEMENT_NODE,function(G){json_encode_xml(G,E);B=true});if(!B){var F=$$AU.Dom.getText(C);A[C.nodeName]=F}}$$AU.ServiceBrokerMarshaller["application/x-www-form-urlencoded"]={currentRequestId:1,parameterize:function(G){var D=this.currentRequestId++;var C=G[2];var A=G[3];var B="JSON";var E=G[0]["data"];var F="$messagetype="+G[0]["type"]+"&$requestid="+D+"&$datatype="+B+"&$scope="+C+"&$version="+A;if(E){F+="&"+jsonToQueryParams(E)}return F},serialize:function(D,C){var B=null;if(D.length>0){B="";if(C){for(var E=0,A=D.length;E<A;E++){B+=this.parameterize(D[E])}}else{B+=this.parameterize(D[0])}}return{"postBody":B,"contentType":"application/x-www-form-urlencoded"}},deserialize:function(A,B,C){if(A.status==202){return null}if(C.indexOf("/json")==-1){$E(this+", invalid content type: "+C+", expected json mimetype");return null}return A.responseText.evalJSON(true)}};$$AU.ServiceBrokerTransportHandler={};$$AU.ServiceBrokerTransportHandler["appcelerator"]={prepare:function(G,C,F,I){var E=Appcelerator.ServerConfig["sessionid"].value||"JSESSIONID";var H=$$AU.Cookie.GetCookie(E);var D=(H)?$$AU.MD5.hex_md5(H+G.instanceid):"";var J="?maxwait="+((!C&&F)?G.maxWaitPollTime:G.maxWaitPollTimeWhenSending)+"&instanceid="+G.instanceid+"&auth="+D+"&ts="+new Date().getTime();var B=G.serverPath+J;var A=F?"post":"get";return{"url":B,"method":A,"postBody":F||"","contentType":I}}};$$AU.ServiceBrokerInterceptor=Class.create();$$o.extend($$AU.ServiceBrokerInterceptor.prototype,{initialize:function(){},toString:function(){return"[$$AU.ServiceBrokerInterceptor]"},interceptQueue:function(A,B){return true},interceptDispatch:function(C,B,D,A){return true},interceptSendToListener:function(C,B,D,A){return true}});if($$AU.ServiceBroker.disabled||$$AU.ServiceBroker.remoteDisabled){$$AU.ServiceBroker.triggerConfig();$$l.warn("[ServiceBroker] remote delivery of messages is disabled")}else{$$AU.ServerConfig.addConfigListener(function(){var A=Appcelerator.ServerConfig["servicebroker"];if(!A||A["disabled"]=="true"){$$AU.ServiceBroker.disabled=true;$$AU.ServiceBroker.remoteDisabled=true;$$AU.ServiceBroker.triggerConfig();$$l.warn("[ServiceBroker] remote delivery of messages is disabled");return }$$AU.ServiceBroker.serverPath=A.value;$$AU.ServiceBroker.poll=(A.poll=="true");$$AU.ServiceBroker.multiplex=A.multiplex?(A.multiplex=="true"):true;$$AU.ServiceBroker.transport=A.transport||$$AU.ServiceBroker.transport;$$AU.ServiceBroker.marshaller=A.marshaller||$$AU.ServiceBroker.marshaller;var C=Appcelerator.ServerConfig["sessionid"].value||"unknown_cookie_name";var B=$$AU.Cookie.GetCookie(C);if(!B){new Ajax.Request($$AU.ServiceBroker.serverPath+"?initial=1",{asynchronous:true,method:"get",evalJSON:false,evalJS:false,onSuccess:function(D){$$AU.ServiceBroker.triggerConfig();$$AU.ServiceBroker.startTimer();$$l.info("ServiceBroker ready")}});return }$$AU.ServiceBroker.triggerConfig();$$AU.ServiceBroker.startTimer();$$l.info("ServiceBroker ready")});if($$w.parent==null||$$w.parent==window){var screenHeight=screen.height;var screenWidth=screen.width;var colorDepth=screen.colorDepth||-1;$$AR.onload(function(){if($$AB.autoReportStats){var C=new Date();var A=$$AB.isWindows?"win":$$AB.isMac?"mac":$$AB.isLinux?"linux":$$AB.isSunOS?"sunos":"unknown";var B={"userAgent":$$n.userAgent,"flash":$$AB.isFlash,"flashver":$$AB.flashVersion,"screen":{"height":screenHeight,"width":screenWidth,"color":colorDepth},"os":A,"referrer":$$d.referrer,"path":$$w.location.href,"cookies":($$d.cookie||"").split(";").collect(function(E){var D=E.split("=");return D&&D.length>0?{name:D[0],value:D[1]}:{name:null,value:null}}),"tz":C.getTimezoneOffset()/60};$MQ("remote:appcelerator.status.report",B)}})}}$$AR.onunload($$AU.ServiceBroker.destroy.bind($$AU.ServiceBroker));$$AC.afterDocumentCompile(function(){$$AU.ServiceBroker.triggerComplete()});$$AU.Performance=Class.create();$$AU.Performance={logStats:($$w.location.href.indexOf("logStats=1")>0),stats:$H({}),createStat:function(){if(this.logStats){return new Date()}},endStat:function(H,C,D,E){if(this.logStats){var G=C;if(D){G=G+"."+D}else{D=""}var A=new Date();var B=this.stats.get(G);var F=(A.getTime()-H.getTime());if(!B){var B={"type":C,"category":D,"hits":0,"mean":0,"min":F,"max":F,"total":0};this.stats.set(G,B)}B.hits++;B.last=F;B.total+=F;B.mean=B.total/B.hits;B.max=(B.last>B.max?B.last:B.max);B.min=(B.last<B.min?B.last:B.min);$$l.info("stats: "+C+" last:"+B.last+"ms mean:"+B.mean+"ms hits:"+B.hits+" min:"+B.min+"ms max:"+B.max+"ms total:"+B.total+"ms")}},reset:function(C,A,B){this.stats=$H({})}};$MQL("l:get.performance.request",function(B,C,A,D){$MQ("l:get.performance.response",{"stats":$$AU.Performance.stats.values()})});$MQL("l:reset.performance.request",function(B,C,A,D){$$AU.Performance.reset()});Appcelerator.Types={};Appcelerator.Types.enumeration=function(){var A="^("+$A(arguments).join(")|(")+")$";return{name:"Enumeration",values:$A(arguments),regex:RegExp(A)}};Appcelerator.Types.openEnumeration=function(){var A="^("+$A(arguments).join(")|(")+")|(.*)$";return{name:"Enumeration",values:$A(arguments),regex:RegExp(A)}};Appcelerator.Types.pattern=function(B,A){A=A||"pattern";return{name:A,regex:B}};Appcelerator.Types.bool=Appcelerator.Types.enumeration("true","false");Appcelerator.Types.bool.name="Boolean";Appcelerator.Types.number=Appcelerator.Types.pattern(/^-?[0-9]+(\.[0-9]+)$/,"Number");Appcelerator.Types.naturalNumber=Appcelerator.Types.pattern(/[0-9]+/,"Natural Number");Appcelerator.Types.cssDimension=Appcelerator.Types.pattern(/^-?[0-9]+(\.[0-9]+)(%|(em)|(en)|(px)|(pc)|(pt))?$/,"CSS Dimension");Appcelerator.Types.identifier=Appcelerator.Types.pattern(/^[a-zA-Z_][a-zA-Z0-9_.]*$/,"Identifier");Appcelerator.Types.messageSend=Appcelerator.Types.pattern(/^((l:)|(r:)|(local:)|(remote:))[a-zA-Z0-9_.]+/,"Appcelerator Message Send");Appcelerator.Types.messageReceive=Appcelerator.Types.pattern(/^((l:)|(r:)|(local:)|(remote:))((~.+)|([a-zA-Z0-9_.]+))/,"Appcelerator Message Reception");Appcelerator.Types.onExpr={name:"On Expression"};Appcelerator.Types.fieldset={name:"Fieldset"};Appcelerator.Types.json={name:"JSON Object"};Appcelerator.Types.javascriptExpr={name:"Javascript Expression"};Appcelerator.Types.pathOrUrl={name:"Path or url to resource"};Appcelerator.Types.cssClass={name:"CSS Class name"};Appcelerator.Types.color={name:"Color value"};Appcelerator.Types.time={name:"Time value"};Appcelerator.Types.elementId={name:"Element Id"};Appcelerator.Types.commaSeparated={name:"Comma Separated Values"};Appcelerator.Types.languageId={name:"Localization String Id"};Appcelerator.Types.isInstance=function(C,A){if(A.regex){return A.regex.match(C)}switch(A){case Appcelerator.Types.onExpr:try{var B=$$AC.parseExpression(C);return B&&B.length>0}catch(D){return false}case Appcelerator.Types.time:return C&&!isNaN($$AU.DateTime.timeFormat(C));case Appcelerator.Types.fieldset:return true;default:return true}};Appcelerator.Types.getTypeId=function(A){try{return $H(Appcelerator.Types).find(function(C){return C[1]==A})[0]}catch(B){return null}};$$AC.registerCustomAction("show",{build:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;return"Element.show('"+A+"')"}else{return"Element.show('"+E+"')"}}});$$AC.registerCustomAction("hide",{build:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;return"Element.hide('"+A+"')"}else{return"Element.hide('"+E+"')"}}});$$AC.registerCustomAction("visible",{build:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;return"Element.setStyle('"+A+"',{visibility:'visible'})"}else{return"Element.setStyle('"+E+"',{visibility:'visible'})"}}});$$AC.registerCustomAction("hidden",{build:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;return"Element.setStyle('"+A+"',{visibility:'hidden'})"}else{return"Element.setStyle('"+E+"',{visibility:'hidden'})"}}});$$AC.effects=$H(Effect).select(function(C){var B=C[0];var D=C[1];var A=B.charAt(0).toLowerCase()+B.substring(1);return Effect.Methods[A]||D.superclass==Effect.Base}).pluck("0");$$AC.registerCustomAction("effect",{metadata:{requiresParameters:true,shorthandParameters:true,optionalParameterKeys:$$AC.effects,description:"Invokes a Scriptaculous visual effect on this element"},build:function(H,D,F){if(F&&F.length>0){var C="";var E=H;var B=F[0].key.split(",");var A=B[0];if(B.length>1){if(B[1]=="id"){E=F[0].value}else{C+=B[1]+":'"+F[0].value+"'";C+=(F.length>1)?",":""}}if(F.length>1){for(var G=1;G<F.length;G++){if(F[G].key=="id"){E=F[G].value}else{C+=F[G].key+":'"+F[G].value+"'";C+=(G!=F.length-1)?",":""}}}A=A.dasherize().camelize();A=A.charAt(0).toUpperCase()+A.substring(1);if(!Effect[A]){throw"syntax error: unsupported effect type: "+A}return"Element.visualEffect('"+E+"','"+A+"',{"+C+"})"}else{throw"syntax error: effect action must have parameters"}}});$$AC.registerCustomAction("toggle",{metadata:{requiresParameters:true,description:"Toggles a CSS property, or boolean attribute on this element"},build:function(H,C,G){if(G&&G.length>0){var E=G[0];var A=E.key;var F=E.value;var B=null;if(A=="class"){B='if (Element.hasClassName("'+H+'","'+F+'")) Element.removeClassName("'+H+'","'+F+'"); else Element.addClassName("'+H+'","'+F+'")'}else{if($$AC.isCSSAttribute(A)){A=$$AC.convertCSSAttribute(A);switch(A){case"display":case"visibility":var D="";if(!F){F=(A=="display")?"block":"visible"}switch(F){case"inline":D="none";break;case"block":D="none";break;case"none":D="block";break;case"hidden":D="visible";break;case"visible":D="hidden";break}B='var a = Element.getStyle("'+H+'","'+A+'"); if (a!="'+D+'") Element.setStyle("'+H+'",{"'+A+'":"'+D+'"}); else Element.setStyle("'+H+'",{"'+A+'":"'+F+'"})';break;default:B='var a = Element.getStyle("'+H+'","'+A+'"); if (a) Element.setStyle("'+H+'",{"'+A+'":""}); else Element.setStyle("'+H+'",{"'+A+'":"'+F+'"})';break}}else{B='var a = $el("'+H+'"); if (!a) throw "no element with ID: '+H+'"; var v = a.getAttribute("'+A+'"); if (v) a.removeAttribute("'+A+'"); else a.setAttribute("'+A+'","'+F+'")'}}return B}else{throw"syntax error: toggle action must have parameters"}}});$$AC.generateSetter=function(A){return'$$AC.getEvaluatedValue("'+A+'",this.data||{})'};(function(){var A=function(H,E,G){if(G.length==0){throw"syntax error: expected parameter key:value for action: "+E}var F=G[0];var B=F.key;var D=F.value;if($$AC.isCSSAttribute(B)){B=$$AC.convertCSSAttribute(B);return"Element.setStyle('"+H+"',{'"+B+"':"+$$AC.generateSetter(D)+"})"}else{if(B=="class"){if(E=="set"){return"$el('"+H+"').className = "+$$AC.generateSetter(D)}return"Element.addClassName('"+H+"',"+$$AC.generateSetter(D)+")"}else{if(B.startsWith("style")){return"$el('"+H+"')."+B+"="+$$AC.generateSetter(D)}var C='var e = $el("'+H+'"); if (!e) throw "syntax error: element with ID: '+H+" doesn't exist\";";C+="var isOperaSetIframe =  "+$$AB.isOpera+" && e.nodeName=='IFRAME' && '"+B+"'=='src';";C+="if (e.nodeName=='IFRAME' && '"+B+"'=='src'){";C+="var onload=e.getAttribute('onloaded');";C+="if (onload){";C+="$$AU.IFrame.monitor(e,function(){$MQ(onload,{},e.scope);});";C+="}";C+="}";C+='if (e["'+B+'"]!=null){';switch(B){case"checked":case"selected":case"disabled":C+="e."+B+" = ('true' == ''+"+$$AC.generateSetter(D)+")";break;default:C+="if(isOperaSetIframe) {e.location.href="+$$AC.generateSetter(D)+"; }";C+="else { e."+B+" = "+$$AC.generateSetter(D)+"; }"}C+="} else {";C+="e.setAttribute('"+B+"',"+$$AC.generateSetter(D)+")";C+="}";return C}}};$$AC.registerCustomAction("add",{metadata:{description:"Add a CSS property or attribute on this element"},build:A});$$AC.registerCustomAction("set",{metadata:{description:"Set a CSS property or attribute on this element"},build:A})})();$$AC.registerCustomAction("remove",{build:function(F,C,E){if(E.length==0){throw"syntax error: expected parameter key:value for action: "+C}var D=E[0];var A=D.key;var B=D.value;switch(A){case"class":return"Element.removeClassName('"+F+"',"+$$AC.formatValue(B)+")";default:return"$el('"+F+"').removeAttribute('"+A+"')"}}});$$AC.registerCustomAction("statechange",{metadata:{requiresParameters:true},build:function(D,B,C){if(C.length==0){throw"syntax error: expected parameters in format 'statechange[statemachine=state]'"}var A=C.map(function(G){var E=G.key;var F=G.value;return'$$AC.StateMachine.fireStateMachineChange("'+E+'","'+F+'",true,true,false)'});return A.join(";")}});(function(){var A={metadata:{requiresParameters:true,description:"Executes a line of javascript"},parseParameters:function(D,B,C){return C},build:function(D,B,C){return C}};$$AC.registerCustomAction("javascript",A);$$AC.registerCustomAction("function",A);$$AC.registerCustomAction("script",A)})();$$AC.findParameter=function(C,A){if(C){if(C[A]){return C[A]}else{if(C.length>0){for(var D=0;D<C.length;D++){var B=C[D];if(B.key==A){return B.value}}}}}return null};$$AC.buildActionFunction=function(H,G,F,B){var E=$$AC.findParameter(F,"id")||H;var C="";var D="";var A=$$o.toJSON(F);if(B){C='try{ var e=$el("'+E+'"); if (e && !e.disabled && Element.showing(e)) ';D="}catch(xxx_){}"}return C+'$$AC.executeFunction("'+E+'","'+G+'",["'+E+'","'+G+'",this.data,this.scope,this.version,'+A+",this.direction,this.type])"+D};$$AC.registerCustomAction("selectOption",{build:function(G,E,F){if(F.length==0){throw"syntax error: expected parameter property for action: "+E}var A=$el(G);if(!A.options){throw"syntax error: selectOption must apply to a select tag"}var B=F[0].key;var D=F[0].value||B;if(D=="$null"){D=""}var C='var selectedValue = $$o.getNestedProperty(this.data, "'+B+'","'+D+'");';C+=' var targetSelect = $el("'+G+'");';C+=" for (var j=0;j<targetSelect.options.length;j++)";C+=" {";C+="   if (targetSelect.options[j].value == selectedValue)";C+="   {";C+="      targetSelect.selectedIndex = j;";C+="      break;";C+="    }";C+="  }";C+='$$AC.executeFunction(targetSelect,"revalidate");';return C}});var ResetAction={build:function(A,F,E){var I=$$AC.findParameter(E,"id")||A;var H=$el(I);var B=false;var C=null;var G='$el("'+I+'")';var D="";var J='""';switch($$AC.getTagname(H)){case"input":case"textarea":D="value";B=true;break;case"select":D="selectedIndex";J="0";B=true;break;case"img":D="src";break;case"a":D="href";J="#";break;case"form":return'Form.reset("'+I+'"); Form.Methods.getInputs("'+I+'").each(function(i){$$AC.executeFunction(i,"revalidate");});';default:D="innerHTML";C=G+".update("+J+")";break}if(!C){C=G+"."+D+"="+J}if(B){C+="; $$AC.executeFunction("+G+',"revalidate");'}return C}};$$AC.registerCustomAction("clear",ResetAction);$$AC.registerCustomAction("reset",ResetAction);var ResetFormAction={build:function(G,D,F){var E=$$AC.findParameter(F,"id")||G;var A=$el(E);var C=null;var B=null;switch($$AC.getTagname(A)){case"form":B='$el("'+E+'")';break;case"input":case"select":case"textarea":default:B='$el("'+E+'").form';break}C=B+".reset()";return C}};$$AC.registerCustomAction("clearform",ResetFormAction);$$AC.registerCustomAction("popup",{re:/([+|-]{0,1})([0-9])+/,getPosition:function(B){var C={value:"0",relative:true};var A=this.re.exec(B);if(A){C.relative=(A[1]=="+"||A[1]=="-");C.value=B}return C},build:function(B,F,E){var H=B;var I="0",D="0";var L=true,C=true;var M="appear";if(E&&E.length>0){var G=E[0];if(E.length==1){if(G.key=="id"){H=G.value}else{H=G.key}}else{for(var J=0;J<E.length;J++){var G=E[J];switch(G.key){case"id":H=G.value;break;case"x":var K=this.getPosition(G.value);I=K.value;L=K.relative;break;case"y":var K=this.getPosition(G.value);D=K.value;C=K.relative;break;case"effect":M=G.value;break}}}}var A="var event = args[0]; var x = Event.pointerX(event); var y = Event.pointerY(event);"+((L)?"x+="+I:"x="+I)+";"+((L)?"y+="+D:"y="+D)+';Element.setStyle("'+H+'",{top:(y||0)+"px",left:(x||0)+"px"}); setTimeout(function(){ Element.ensureVisible("'+H+'"); },50); '+((!M||M=="")?'Element.show("'+H+'"); ':'Element.visualEffect("'+H+'","'+M+'"); ');return A}});$$AC.registerCustomAction("value",{metadata:{requiresParameters:true,requiredParameterKeys:["value"],optionalParameterKeys:["text","append","id","property"],description:"Sets the value of the current element with data from the message payload"},parseParameters:function(C,A,B){return B},build:function(a,D,p){var G=a;var g=false;var O=null;var B=p;var b=false;var X=p;var Z=false;if(p.charAt(0)=='"'||p.charAt(0)=="'"){O=p}else{B=$$AC.getParameters(p,false);for(var r=0,S=B.length;r<S;r++){var K=B[r];if(B.length==1&&null==K.value&&K.key.charAt(0)=="$"){G=K.key;g=true}else{if(K.key=="id"){if(K.value!=null){G=K.value;g=true}else{g=false}}else{if(K.key=="append"){b=K.value==true||K.value=="true"}else{if(K.key=="value"){if(K.value=="expr("){var q=p.indexOf("expr(");var o=p.lastIndexOf(")");X=p.substring(q,o+1)}else{X=K.value}}}}}}var T=$$AC.expressionRE.exec(X);if(T){O="(function(){ return "+T[1]+" }).call(this);"}else{if(B[0].key.charAt(0)=="$"){O='$$AC.getElementValue($el("'+B[0].key.substring(1)+'"))'}else{var R=B[0].key;var U=B[0].value||R;if(U=="$null"){U=""}O='$$o.getNestedProperty(this.data, "'+R+'","'+U+'")'}}if(O==null){if(G.charAt(0)=="$"){G=G.substring(1)}var A=$el(G);if(!A){throw"syntax error: couldn't find target with ID: "+G+" for value action"}O='$$AC.getElementValue($el("'+G+'"))'}}var P=$el(a);var Y="";var k='$el("'+a+'")';var d="";var V="";var E=false;switch($$AC.getTagname(P)){case"input":E=true;var s=P.getAttribute("type")||"text";switch(s){case"password":case"hidden":case"text":d="value";break;case"checkbox":d="checked";b=false;V="==true || "+O+"=='true'";break;case"button":case"submit":d="value";break}break;case"textarea":E=true;d="value";break;case"select":var F="";var m=$$AC.findParameter(B,"property");var Q=$$AC.findParameter(B,"row");var h=$$AC.findParameter(B,"value");var W=$$AC.findParameter(B,"text");if(!m){throw"required parameter named 'property' not found in value parameter list"}if(!h){throw"required parameter named 'value' not found in value parameter list"}if(!W){W=h}F="var ar = "+$$AC.generateSetter(m)+"; ";F+="var s = "+k+";";if(!b){F+="s.options.length = 0;"}F+="if (ar) {";F+="for (var c=0;c<ar.length;c++){";if(Q){F+=' var row = $$o.getNestedProperty(ar[c],"'+Q+'");'}else{F+=" var row = ar[c];"}F+=" if (row){";F+='  s.options[s.options.length] = new Option($$o.getNestedProperty(row,"'+W+'"),$$o.getNestedProperty(row,"'+h+'"));';F+=" }";F+="}";F+="}";F+=E?'; $$AC.executeFunction(s,"revalidate");':"";return F;case"div":case"span":case"p":case"a":case"h1":case"h2":case"h3":case"h4":case"h5":case"td":case"code":case"li":case"blockquote":d="innerHTML";break;case"img":b=false;d="src";break;case"form":var H=a+"_no_submit";if(!$el(H)){var I=$$d.createElement("input");I.id=H;I.type="text";I.style.display="none";I.name="no_submit_guarantee";P.appendChild(I)}Z=true;var L="value["+p+"]";var M=this.findMatchingFormClause(P,L);var C=P.descendants();for(var r=0;r<C.length;r++){var J=C[r];$$AC.getAndEnsureId(J);var N="";switch($$AC.getTagname(J)){case"select":case"textarea":case"input":N=J.getAttribute("name")||J.id||"";break;default:N=J.getAttribute("name")||""}if(N!=""){var D="value["+p+"."+N+"]";M[0]=J;M[2]=D;$$AC.handleCondition.call(this,M)}}break;default:throw"syntax error: "+P.nodeName+" not supported for value action"}var n=E?"; $$AC.executeFunction("+k+',"revalidate");':"";if ($$l.debugEnabled) $D("built expression=> ",k,".",d,"=",O,V,n);var Y="";if(!Z){if(b){Y="var value_"+P.id+" = "+k+"."+d+";";Y+=k+"."+d+" = value_"+P.id+" + "+O+V}else{Y=k+"."+d+"="+O+V}Y+=n}return Y},findMatchingFormClause:function(B,D){var C=$$AC.parseExpression(B.getAttribute("on"));for(var A=0;A<C.length;A++){var E=C[A][2];if(E==D){return C[A]}}return[]}});$$AC.registerCustomAction("bind",{metadata:{requiresParameters:false,description:"Sets the value to all elements with the same fieldset to the data from the payload"},parseParameters:function(C,A,B){return B},build:function(G,F,E){var C=$el(G);var A=C.getAttribute("fieldset");if(!A||A==""){throw"syntax error: element has no field set attribute "+C}var B=E;var D='$$AC.updateFieldsetValues("'+A+'",this.data,"'+B+'")';return D}});var GenericActionFunction=Class.create();$$o.extend(GenericActionFunction.prototype,{initialize:function(A,B){this.checkenabled=A;this.widgetAction=!!B},build:function(C,A,B){return $$AC.buildActionFunction(C,A,B,this.checkenabled)}});$$AC.GenericFunctions=[["execute",false],["enable",false],["disable",false],["focus",true],["blur",true],["select",false],["selected",false],["unselect",false],["click",false],["submit",false]];for(var c=0,len=$$AC.GenericFunctions.length;c<len;c++){var gf=$$AC.GenericFunctions[c];var f=new GenericActionFunction(gf[1]);$$AC.registerCustomAction(gf[0],f)}$$AC.buildCustomAction=function(A){var C=$$AC.customActions[A];if(!C){var B=new GenericActionFunction(false,true);$$AC.registerCustomAction(A,B)}};$$AC.registerCustomAction("history",{build:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;return'Appcelerator.History.go("'+A+'");'}else{throw"required parameter for history action"}}});$$o.extend(Array.prototype,{remove:function(C){var A=[];for(var B=0;B<this.length;B++){if(this[B]!=C){A.push(this[B])}}this.clear();for(var B=0;B<A.length;B++){this.push(A[B])}return A}});$$AC.registerCustomCondition({conditionNames:["dragstart","drag","dragend","dragover","drop"],description:"Respond to drag-and-drop events on the element"},function(E,B,C,I,F,D){var G=null;switch(B){case"dragstart":G="onStart";break;case"drag":G="onDrag";break;case"dragend":G="onEnd";break;case"dragover":if(!E.getAttribute("droppable")){throw"dragover condition only applies to elements that have droppable attribute"}if(!E.hoverListeners){E.hoverListeners=[]}var J=$$AC.makeConditionalAction(E.id,C,D);E.hoverListeners.push({onHover:function(K){$$AC.executeAfter(J,F,{id:E.id,dragged:K.id})}});return true;case"drop":if(!E.getAttribute("droppable")){throw"drop condition only applies to elements that have droppable attribute"}if(!E.dropListeners){E.dropListeners=[]}var J=$$AC.makeConditionalAction(E.id,C,D);E.dropListeners.push({onDrop:function(K){$$AC.executeAfter(J,F,{id:E.id,dropped:K.id})}});return true}if(G){var A=E.id;var J=$$AC.makeConditionalAction(E.id,C,D);var H={};H[G]=function(L,K){if(K.element.id==A){$$AC.executeAfter(J,F,{id:A})}};Draggables.addObserver(H);$$AC.addTrash(E,function(){Draggables.removeObserver(E)});return true}return false});$$AC.registerCustomCondition({conditionNames:["enter","enter!"],description:"Respond to 'enter' keypress on a form"},function(E,B,C,I,F,D){switch(B){case"enter":case"enter!":if($$AC.getTagname(E)!="form"){throw"invalid condition: "+B+" on element of type: "+E.tagName+", only supported on form elements"}var A=E.id;var K=$$AC.makeConditionalAction(A,C,D,{id:A});var C=function(L){$$AC.executeAfter(K,F,{id:A});if(B=="enter!"){Event.stop(Event.getEvent(L))}};var G=Form.Methods.getInputs(E);for(var H=0;H<G.length;H++){var J=G[H];$$AC.getAndEnsureId(J);$$AU.KeyManager.installHandler($$AU.KeyManager.KEY_ENTER,J,C);$$AC.addTrash(J,function(){$$AU.KeyManager.removeHandler($$AU.KeyManager.KEY_ENTER,J)})}return true}return false});$$AC.Events=["click","focus","blur","dblclick","mousedown","mouseout","mouseover","mousemove","change","scroll","contextmenu","mousewheel","input","paste","orientationchange"];$$AC.EventTargets=["this","parent","down","after","next","sibling","next-sibling","before","up","prev-sibling","previous-sibling","child","children","window","body"];$$AC.actionId=0;$$AC.isEventSelector=function(C){if(C.indexOf(":")!=-1||C.indexOf("[")!=-1){return false}if(C.charAt(C.length-1)=="!"){C=C.substring(0,C.length-1)}for(var D=0,A=$$AC.Events.length;D<A;D++){if(C==$$AC.Events[D]){return true}var B=C.indexOf(".");realtoken=C.substring(B+1);if(realtoken==$$AC.Events[D]){return true}}return false};$$AC.registerCustomCondition({conditionPrefixes:$$AC.EventTargets.map(function(A){return A+"."}),conditionSuffixes:$$AC.Events,prefixOptional:true,description:"Respond to standard DOM event"},function(I,D,G,O,K,H){if(!$$AC.isEventSelector(D)){return false}if(O){throw"syntax error: 'else' action not supported on event conditions for: "+D}var E=false;if(D.charAt(D.length-1)=="!"){E=true;D=D.substring(0,D.length-1)}var J=D.indexOf(".");var A=D,M=I.id,C=false;if(J>0){var F=D.substring(0,J);switch(F){case"this":M=I.id;break;case"parent":M=I.parentNode.id;break;case"down":case"after":case"next":case"sibling":case"next-sibling":M=I.nextSibling.id;break;case"before":case"up":case"prev-sibling":case"previous-sibling":M=I.previousSibling.id;break;case"child":case"children":C=true;break;case"window":M="window";break;case"body":M=$$d.body.id;break;default:M=F}A=D.substring(J+1)}if(A=="orientationchange"){M=$$d.body.id}if($$AC.getTagname(I)=="select"&&A=="change"&&(C||M==I.id)){var L=function(T){var U=I.options[I.selectedIndex||0];var S=U;if(Element.isDisabled(S)||Element.isDisabled(S.parentNode)){return }var R=$$AC.makeConditionalAction(I.id,G,H,{value:U.value,text:U.text});R();if(E){Event.stop(T);return false}};$$AC.addEventListener(I,A,L,K)}else{if(A=="change"){var P=$$AC.makeConditionalAction(I.id,G,H);I._validatorObserver=new Form.Element.Observer(I,0.5,function(R,S){P(R,S)})}else{if(C){for(var N=0;N<I.childNodes.length;N++){(function(){var T=I.childNodes[N];if(T.nodeType==1){$$AC.getAndEnsureId(T);if ($$l.debugEnabled) $D("adding listener to "+T.id+" for event: "+A);var S=function(Y){var X=T;if(Element.isDisabled(X)||Element.isDisabled(X.parentNode)){return }var W=$$AC.makeConditionalAction($$AC.getAndEnsureId(T),G,H);var U=W,V=$A(arguments);return U.apply(this,[Y||$$w.event].concat(V))};var R=S;if(E){R=function(U){S(U);Event.stop(U);return false}}$$AC.addEventListener(T,A,R,K)}})()}}else{if($$o.isString(M)){M=M=="window"?window:$el(M)}if(!M){throw"syntax error: target not found for "+D}if ($$l.debugEnabled) $D("adding listener to "+M+", name: "+M.nodeName+", id: "+M.id+" for event: "+A);var P=$$AC.makeConditionalAction(M.id,G,H);var Q={id:M.id};var B=function(U){var T=$el(Q.id);if(Element.isDisabled(T)||Element.isDisabled(T.parentNode)){return }var R=P,S=$A(arguments);return R.apply(Q,[U||$$w.event].concat(S))};var L=B;if(E){L=function(R){B(R);Event.stop(R);return false}}$$AC.addEventListener(M,A,L,K)}}}return true});if($$AB.isIPhone){$$w.onorientationchange=function(){var A=$$d.createEvent("Events");A.initEvent("orientationchange",true,true);$$d.body.dispatchEvent(A)}}$$AC.registerCustomCondition({conditionPrefixes:["history:==","history:!="],suffixOptional:true,description:"Respond to back/forward navigation"},function(G,C,E,J,H,F){var D=null;if(C.startsWith("history:")){D=C.substring(8)}if(C.startsWith("history[")){D=C.substring(8,C.indexOf("]"))}if(!D){return false}var A=G.id;var K=$$AC.makeConditionalAction(A,E,F);var I=J?$$AC.makeConditionalAction(A,J,null):null;var B="==";if(D.charAt(0)=="!"){D=D.substring(1);B="!="}else{if(D=="*"){B="*"}}D=D.length==0||D=="_none_"||D==="null"?null:D;Appcelerator.History.onChange(function(N,M,L){switch(B){case"==":if(N==D){$$AC.executeAfter(K,H,{data:M})}else{if(I){$$AC.executeAfter(I,H,{data:M})}}break;case"!=":if(N!=D){$$AC.executeAfter(K,H,{data:M})}else{if(I){$$AC.executeAfter(I,H,{data:M})}}break;case"*":if(N){$$AC.executeAfter(K,H,{data:M})}break}});return true});$$AC.registerCustomCondition({conditionNames:["keypress","keyup","keydown"],description:"Respond to key events on the element"},function(B,M,J,E,Q,G){if(M.indexOf("keypress")==-1&&M.indexOf("keyup")==-1&&M.indexOf("keydown")==-1){return false}if(E){throw"syntax error: 'else' action not supported on event conditions for: "+M}var D=M;var P=false;if(M.charAt(D.length-1)=="!"){M=M.substring(0,M.length-1);P=true}var L=M.indexOf(".");var K=M,R=B.id,C=false;if(L>0){var N=M.substring(0,L);switch(N){case"this":R=B.id;break;case"parent":R=B.parentNode.id;break;case"down":case"after":case"next":case"sibling":case"next-sibling":R=B.nextSibling.id;break;case"before":case"up":case"prev-sibling":case"previous-sibling":R=B.previousSibling.id;break;case"child":case"children":C=true;break;case"window":R="window";break;case"body":R=$$d.body.id;break;default:R=N}K=M.substring(L+1)}var L=M.indexOf("[");var H=null;if(L>0){H=M.substring(L+1,M.indexOf("]"));K=K.substring(0,L)}if(K=="keypress"||K=="keydown"||K=="keyup"){if($$o.isString(R)){R=R=="window"?window:$el(R)}if(!R){throw"syntax error: target not found for "+M}if ($$l.debugEnabled) $D("adding listener to "+R+", name: "+R.nodeName+", id: "+R.id+" for event: "+K);var F=$$AC.makeConditionalAction(R.id,J,G);var A={id:R.id};var I=function(Z){var X=$el(A.id);if(Element.isDisabled(X)||Element.isDisabled(X.parentNode)){return }var U=Z.keyCode;var Y={key:U,event:Z};if(H){var W=H.split("+");var V=W[W.length-1];switch(V){case"enter":if(U!=Event.KEY_RETURN){return }break;case"esc":if(U!=Event.KEY_ESC){return }break;case"left":if(U!=Event.KEY_LEFT){return }break;case"right":if(U!=Event.KEY_RIGHT){return }break;case"up":if(U!=Event.KEY_UP){return }break;case"down":if(U!=Event.KEY_DOWN){return }break;case"tab":if(U!=Event.KEY_TAB){return }break;case"delete":if(U!=Event.KEY_DELETE){return }break;case"backspace":if(U!=Event.KEY_BACKSPACE){return }break;default:if(U!=V){return }break}if(W.length>1){for(var T=0;T<(W.length-1);T++){var S=W[T];switch(S){case"ctrl":if(!Z.ctrlKey){return }break;case"alt":if(!Z.altKey){return }break;case"shift":if(!Z.shiftKey){return }break;case"meta":if(!Z.metaKey){return }break}}}}$$AC.executeAfter(F,0,Y)};var O=I;if(P){O=function(S){I(S);Event.stop(S);return false}}$$AC.addEventListener(R,K,O,Q);return true}return false});$$AC.registerCustomCondition({conditionPrefixes:["local:","remote:","l:","r:"],freeformSuffix:true,description:"Respond to a local or remote message"},function(G,B,E,K,H,F){if(B.startsWith("local:")||B.startsWith("l:")||B.startsWith("remote:")||B.startsWith("r:")){var A=G.id;var C=$$AC.parameterRE.exec(B);var I=(C?C[1]:B);var D=C?C[2]:null;var L=$$AC.makeConditionalAction(A,E,F);var J=(K?$$AC.makeConditionalAction(A,K,null):null);return $$AC.MessageAction.makeMBListener(G,I,L,D,H,J)}return null});$$AC.MessageAction={};$$AC.MessageAction.onMessage=function(G,C,D,J,K,F,A,E,I){var H=$$AC.parseConditionCondition(F,C);var B={type:G,datatype:D,direction:J,data:C,scope:K};if(H){$$AC.executeAfter(A,E,B)}else{if(I){$$AC.executeAfter(I,E,B)}}};$$AC.MessageAction.makeMBListener=function(D,G,C,B,F,H){var A=B?$$AC.getParameters(B,false):null;var E=A?G.indexOf("["):0;if(E>0){G=G.substring(0,E)}var I=(A)?$$o.toJSON(A):null;$MQL(G,function(L,M,K,N,J){$$AC.MessageAction.onMessage(L,M,K,N,J,I,C,F,H)},D.scope,D);return true};$$AC.registerCustomCondition({conditionNames:["resize"],description:("Respond to resizing of an element, requires that the <i>resizable</i> attribute be set")},function(D,G,F,A,B,E){if(G=="resize"){if(!D.getAttribute("resizable")){throw'resize condition only applies to elements that have resizable="true"'}if(!D.resizeListeners){D.resizeListeners=[]}var C=$$AC.makeConditionalAction(D.id,F,E);D.resizeListeners.push({onResize:function(H){$$AC.executeAfter(C,B,{id:D.id})}});return true}return false});$$AC.Selected={};$$AC.Selected.makeSelectedListener=function(C,G,E,A,B,D){var F=$$AC.getAndEnsureId(C);$$AC.attachFunction(C,"selected",function(K,L,H){if(K){var J=$$AC.makeConditionalAction(F,E,D,{count:L,unselect:H});$$AC.executeAfter(J,B,{count:L,id:F,unselect:H})}else{if(A){var I=$$AC.makeConditionalAction(F,A,null,{count:L,unselect:H});$$AC.executeAfter(I,B,{count:L,id:F,unselect:H})}}})};$$AC.registerCustomCondition({conditionPrefixes:["parent.","child.","children."],conditionSuffixes:["selected"],prefixOptional:true,description:("Respond to selection of this element, requires the <i>selectable</i> attribute be set")},function(C,H,E,A,B,D){switch(H){case"selected":Element.addClassName(C,"app_selectable");$$AC.Selected.makeSelectedListener(C,H,E,A,B,D);break;case"parent.selected":Element.addClassName(C,"app_selectable");$$AC.Selected.makeSelectedListener(C.parentNode,H,E,A,B,D);break;case"children.selected":case"child.selected":Element.addClassName(C,"app_selectgroup");for(var G=0;G<C.childNodes.length;G++){var F=C.childNodes[G];if(F.nodeType==1){Element.addClassName(F,"app_selectable");$$AC.Selected.makeSelectedListener(F,H,E,A,B,D)}}break;default:return false}return true});$$AC.registerCustomCondition({conditionNames:["sortupdate","sortchange"],description:"Respond to sortable events on the element"},function(E,H,G,B,C,F){var A=null;switch(H){case"sortupdate":if(!E.getAttribute("sortable")){throw"sortupdate condition only applies to elements that have sortable attribute"}if(!E.updateListeners){E.updateListeners=[]}var D=$$AC.makeConditionalAction(E.id,G,F);E.updateListeners.push({onUpdate:function(I){$$AC.executeAfter(D,C,{id:I.id})}});return true;case"sortchange":if(!E.getAttribute("sortable")){throw"sortchange condition only applies to elements that have sortable attribute"}if(!E.changeListeners){E.changeListeners=[]}var D=$$AC.makeConditionalAction(E.id,G,F);E.changeListeners.push({onChange:function(I){$$AC.executeAfter(D,C,{id:I.id})}});return true}return false});$$AC.StateMachine={};$$AC.StateMachine.APP_STATES={};$$AC.StateMachine.CompiledStateConditionCache={};$$AC.StateMachine.isStateCondition=function(A){return $$AC.parameterRE.test(A)};$$AC.registerCustomCondition({pattern:/([^\[]*)\[([^\]]*)\]/},function(A,O,N,D,S,J){if(!$$AC.StateMachine.isStateCondition(O)){return false}var M=A.id;var K=O.split(" ");var O="";var E=[];for(var R=0,P=K.length;R<P;R++){var C=K[R].trim();if(C.length==0){continue}switch(C){case"and":O+=" && ";continue;case"||":case"&&":O+=" "+C+" ";continue;default:break}var I="";if(C.charAt(0)=="!"){I="!";C=C.substring(1)}else{if(C.startsWith("not ")){I="!";C=C.substring(4)}}var G=$$AC.parameterRE.exec(C);var L=G[1];var B=G[2];E.push([L,B]);O+=I+'$$AC.StateMachine.isStateValid("'+L+'","'+B+'")'}var H=$$AC.makeConditionalAction(M,N,J);var Q=(D?$$AC.makeConditionalAction(M,D,null):null);var F=$$AC.StateMachine.CompiledStateConditionCache[O];if(!F){F=O.toFunction();$$AC.StateMachine.CompiledStateConditionCache[O]=F;if ($$l.debugEnabled) $D("compiled state => "+O)}for(var R=0,P=E.length;R<P;R++){var L=E[R][0];var B=E[R][1];if ($$l.debugEnabled) $D("adding state change listener for "+L+"["+B+"]");$$AC.StateMachine.registerStateListener(L,function(V,U,W){var T=F();if ($$l.debugEnabled) $D("statemachine: "+V+"["+U+"] logic returned => "+T);if(T){$$AC.executeAfter(H,S)}else{if(Q){$$AC.executeAfter(Q,S)}}});$$AC.StateMachine.addOnLoadStateCheck(L)}return true});$$AC.StateMachine.isStateMachine=function(A){return $$AC.StateMachine.APP_STATES[A]!=null};$$AC.StateMachine.isStateValid=function(B,C){var A=$$AC.StateMachine.APP_STATES[B];if(A){if(A.active){return(C=="*"||A.states["state_"+C]==true)}}return false};$$AC.StateMachine.disableStateMachine=function(B){var C=$$AC.StateMachine.getActiveState(B,true);var A=$$AC.StateMachine.APP_STATES[B];if(A){A.active=false;A.init=true;if ($$l.debugEnabled) $D("disable state machine="+B+"["+C+"]");if(C){$$AC.StateMachine.fireStateMachineChange(B,C,false)}A.activeState=C}};$$AC.StateMachine.enableStateMachine=function(B){var A=$$AC.StateMachine.APP_STATES[B];if(A){A.active=true;A.init=true;var C=A.activeState;if ($$l.debugEnabled) $D("enable state machine="+B+"["+C+"]");if(C){A.activeState=null;$$AC.StateMachine.fireStateMachineChange(B,C,true,true)}}};$$AC.StateMachine.addState=function(C,D,B){var A=$$AC.StateMachine.APP_STATES[C];if(!A){A=$$AC.StateMachine.createStateMachine(C)}A.states["state_"+D]=B};$$AC.StateMachine.createStateMachine=function(B){var A={"states":{},"listeners":[],"active":true,"activeState":null,"init":false};$$AC.StateMachine.APP_STATES[B]=A;return A};$$AC.StateMachine.registerStateListener=function(B,C){var A=$$AC.StateMachine.APP_STATES[B];if(!A){A=$$AC.StateMachine.createStateMachine(B)}A.listeners.push(C)};$$AC.StateMachine.unregisterStateListener=function(C,D){var B=$$AC.StateMachine.APP_STATES[C];if(B){var A=B.indexOf(D);if(A>=0){B.removeAt(A);return true}}return false};$$AC.StateMachine.getActiveState=function(B,D){var A=$$AC.StateMachine.APP_STATES[B];if(A&&(A.active||D==true)){if(A.activeState!=null){return A.activeState}for(var C in A.states){if(C.startsWith("state_")){if(true==A.states[C]){return C.substring(6)}}}}return null};$$AC.StateMachine.fireStateMachineChange=function(H,A,J,C,K){if ($$l.debugEnabled) $D("fireStateMachineChange => "+H+"["+A+"] = "+J+", force="+(C==true)+",init="+K);var F=$$AC.StateMachine.APP_STATES[H];if(F){var B=false;var M="state_"+F.activeState;for(var L in F.states){if(L.startsWith("state_")){if(A==L.substring(6)){var E=F.states[L];if(K==true||C==true||J==null||E==null||(E!=null&&E!=J)){F.states[L]=J;F.activeState=J?L.substring(6):null;B=M==L?false:true}}else{if(J!=null&&J==true){F.states[L]=false}}}}if ($$l.debugEnabled) $D("setting activeState = "+F.activeState+" for "+H);F.init=true;B=C==true?true:B;if(B&&F.listeners.length>0){for(var I=0,G=F.listeners.length;I<G;I++){var D=F.listeners[I];D.apply(D,[H,A,J])}}}};$$AC.StateMachine.addOnLoadStateCheck=function(A){if($$AC.StateMachine.initialStateInit){if($$AC.StateMachine.initialStateInit.indexOf(A)<0){$$AC.StateMachine.initialStateInit.push(A)}}};$$AC.StateMachine.resetOnStateListeners=function(){if(!$$AC.StateMachine.initialStateLoaders){$$AC.StateMachine.initialStateLoaders=[];$$AC.StateMachine.initialStateInit=[]}};$$AC.StateMachine.fireOnStateListeners=function(){if($$AC.StateMachine.initialStateLoaders&&$$AC.StateMachine.initialStateLoaders.length>0){var C=[];for(var F=0,A=$$AC.StateMachine.initialStateLoaders.length;F<A;F++){var E=$$AC.StateMachine.initialStateLoaders[F];if ($$l.debugEnabled) $D("firing initial state change = "+E[0]+"["+E[1]+"]");$$AC.StateMachine.fireStateMachineChange(E[0],E[1],true,false,true);C.push(E[0])}if($$AC.StateMachine.initialStateInit&&$$AC.StateMachine.initialStateInit.length>0){for(var F=0;F<$$AC.StateMachine.initialStateInit.length;F++){var B=$$AC.StateMachine.initialStateInit[F];if(C.indexOf(B)<0){var D=$$AC.StateMachine.getActiveState(B);if(D){$$AC.StateMachine.fireStateMachineChange(B,D,true,true,false);C.push(B)}}}}}$$AC.StateMachine.initialStateLoaders=null;$$AC.StateMachine.initialStateInit=null};$$AC.StateMachine.re=/[\s\n\r]+or[\s\n\r]+/;$$AC.StateMachine.compileStateCondition=function(B,L){var A={"name":B,"states":{},"types":[]};if(L){var K=L.split($$AC.StateMachine.re);for(var J=0,G=K.length;J<G;J++){var C=K[J];var E=$$AC.parameterRE.exec(C);var I=$$AC.convertMessageType(E?E[1]:C);var D=E?E[2]:null;var M=D?$$AC.getParameters(D,false):null;var H=M?$$AC.StateMachine.compileMessageConditionExpression(M):null;var F=A.states[I];if(!F){A.types.push(I);F=[];A.states[I]=F}F.push(H||"1==1")}}return A};$$AC.StateMachine.compileMessageConditionExpression=function(D){var C="";for(var H=0,A=D.length;H<A;H++){var G=D[H];var E=null;var F="==";var B=G.key;if(B.endsWith("!")){F="!=";B=B.substring(0,B.length-1)}switch(typeof (G.value)){case"string":E='"'+G.value+'"';break;case"number":case"boolean":E=G.value;break}C+='$$o.getNestedProperty(this.data,"'+B+'")'+F+E;if(H+1<A){C+=" && "}}return C};$$AC.StateMachine.buildConditions=function(E){var H={};for(var I=0,G=E.length;I<G;I++){var B=E[I];for(var K=0,C=B.types.length;K<C;K++){var J=B.types[K];var D=H[J];if(!D){D=[];D.push('case "'+J+'": { ');H[J]=D}var L=B.states[J];D.push("if ("+L.join(" || ")+') return "'+B.name+'";')}}var A=[];var F=[];for(var J in H){F.push(J);var D=H[J];A.push(D.join("")+"break; } ")}return{types:F.uniq(),code:"switch(this.messagetype) { "+A.join("")+" default: return null; } "}};$$AC.StateMachine.initialStateLoaders=[];$$AC.StateMachine.initialStateInit=[];$$AC.afterDocumentCompile($$AC.StateMachine.fireOnStateListeners);$$o.extend(Appcelerator.Decorator,{invalidImage:Appcelerator.ImagePath+"warning.png",validImage:Appcelerator.ImagePath+"confirm.png",toString:function(){return"[Appcelerator.Decorator]"},decoratorId:0,names:[],addDecorator:function(B,A){Appcelerator.Decorator[B]=A;$$AD.names.push(B)},checkInvalid:function(C,D,A,E,B){if(A){var G=$el(A);if(G){if(B){if(D){$$AC.setHTML(G,'<img src="'+$$AD.validImage+'"/> <span class="success_color">'+E+"</span>");$$AC.dynamicCompile(G)}}else{if(!D){$$AC.setHTML(G,'<img src="'+$$AD.invalidImage+'" style="margin: 3px 0 -3px 0"/> '+E);$$AC.dynamicCompile(G)}Element.setStyle(A,{visibility:(D?"hidden":"visible")})}}}else{var F="decorate_"+C.id;var G=$el(F);if(!G){new Insertion.After(C.id,'<span id="'+F+'" style="font-size:11px;color:#ff0000"></span>');G=$el(F)}if(B){$$AC.setHTML(G,'<img src="'+$$AD.validImage+'"/> <span class="success_color">'+E+"</span>");$$AC.dynamicCompile(G)}else{if(!D){$$AC.setHTML(G,'<img src="'+$$AD.invalidImage+'" style="margin: 3px 0 -3px 0"/> '+E);$$AC.dynamicCompile(G)}Element.setStyle(F,{visibility:(D?"hidden":"visible")})}}}});(function(){var A=$$AD.addDecorator;A("defaultDecorator",function(B,C){});A("custom",function(C,D,B){if(!B){throw"invalid custom decorator, decoratorId attribute must be specified"}var E=$el(B);if(!E){throw"invalid custom decorator, decorator with ID: "+B+" not found"}if(!D){if(E.style.display=="none"){E.style.display=""}if(E.style.visibility=="hidden"){E.style.visibility=""}}else{if(E.style.display!="none"){E.style.display="none"}if(E.style.visibility!="hidden"){E.style.visibility="hidden"}}});A("termsAccepted",function(C,D,B){this.checkInvalid(C,D,B,"must accept terms and conditions")});A("required",function(C,D,B){this.checkInvalid(C,D,B,"required")});A("email",function(C,D,B){this.checkInvalid(C,D,B,"enter a valid email address")});A("date",function(C,D,B){this.checkInvalid(C,D,B,"invalid date")});A("number",function(C,D,B){this.checkInvalid(C,D,B,"invalid number")});A("fullname",function(C,D,B){this.checkInvalid(C,D,B,"enter first and last name")});A("alphanumeric",function(C,D,B){this.checkInvalid(C,D,B,"enter an alphanumeric value")});A("noSpaces",function(C,D,B){this.checkInvalid(C,D,B,"value must contain no spaces")});A("password",function(C,D,B){this.checkInvalid(C,D,B,"password must be at least 6 characters")});A("url",function(C,D,B){this.checkInvalid(C,D,B,"enter a valid URL")});A("checked",function(C,D,B){this.checkInvalid(C,D,B,"item must be checked")});A("wholenumber",function(C,D,B){this.checkInvalid(C,D,B,"enter a whole number")});A("length",function(E,F,C){if(!F){var D=E.getAttribute("validatorMinLength")||"0";var B=E.getAttribute("validatorMaxLength")||"999999";this.checkInvalid(E,F,C,"value must be between "+D+"-"+B+" characters")}else{this.checkInvalid(E,F,C,E.value.length+" characters",true)}})})();$MQL("appcelerator.download",function(I,D,E,J){var A=D["name"];var H=D["ticket"];var G=Appcelerator.ServerConfig["download"];var B=G?G.path:Appcelerator.DocumentPath+"/download";var C=$$AU.UUID.generateNewId();B=B+"?ticket="+encodeURIComponent(H)+"&name="+encodeURIComponent(A)+"&reqid="+C;var F='<iframe id="'+C+'" src="'+B+'" height="1" width="1" style="position:absolute;left:-400px;top:-400px;height:1px;width:1px;"></iframe>';new Insertion.Bottom($$d.body,F)});$$o.extend(Effect.Transitions,{elastic:function(A){return -1*Math.pow(4,-8*A)*Math.sin((A*6-1)*(2*Math.PI)/2)+1},swingFromTo:function(B){var A=1.70158;return((B/=0.5)<1)?0.5*(B*B*(((A*=(1.525))+1)*B-A)):0.5*((B-=2)*B*(((A*=(1.525))+1)*B+A)+2)},swingFrom:function(B){var A=1.70158;return B*B*((A+1)*B-A)},swingTo:function(B){var A=1.70158;return(B-=1)*B*((A+1)*B+A)+1},bounce:function(A){if(A<(1/2.75)){return(7.5625*A*A)}else{if(A<(2/2.75)){return(7.5625*(A-=(1.5/2.75))*A+0.75)}else{if(A<(2.5/2.75)){return(7.5625*(A-=(2.25/2.75))*A+0.9375)}else{return(7.5625*(A-=(2.625/2.75))*A+0.984375)}}}},bouncePast:function(A){if(A<(1/2.75)){return(7.5625*A*A)}else{if(A<(2/2.75)){return 2-(7.5625*(A-=(1.5/2.75))*A+0.75)}else{if(A<(2.5/2.75)){return 2-(7.5625*(A-=(2.25/2.75))*A+0.9375)}else{return 2-(7.5625*(A-=(2.625/2.75))*A+0.984375)}}}},easeFromTo:function(A){if((A/=0.5)<1){return 0.5*Math.pow(A,4)}return -0.5*((A-=2)*Math.pow(A,3)-2)},easeFrom:function(A){return Math.pow(A,4)},easeTo:function(A){return Math.pow(A,0.25)}});Element.getDocumentSize=function(){var E,A;var D,B;if($$w.innerHeight&&$$w.scrollMaxY){E=$$d.body.scrollWidth;A=$$w.innerHeight+$$w.scrollMaxY}else{if($$d.body.scrollHeight>$$d.body.offsetHeight){E=$$d.body.scrollWidth;A=$$d.body.scrollHeight}else{E=$$d.body.offsetWidth;A=$$d.body.offsetHeight}}var C,F;if(self.innerHeight){C=self.innerWidth;F=self.innerHeight}else{if($$d.documentElement&&$$d.documentElement.clientHeight){C=$$d.documentElement.clientWidth;F=$$d.documentElement.clientHeight}else{if($$d.body){C=$$d.body.clientWidth;F=$$d.body.clientHeight}}}if(A<F){D=F}else{D=A}if(E<C){B=C}else{B=E}return[B,D,C,F]};Element.getPageScroll=function(){var A;if(self.pageYOffset){A=self.pageYOffset}else{if($$d.documentElement&&$$d.documentElement.scrollTop){A=$$d.documentElement.scrollTop}else{if($$d.body){A=$$d.body.scrollTop}}}return A};Element.getCenteredTopPosition=function(B,A){var C=Element.getDimensions(B);var D=Element.getDimensions(A).width;return(C.height-D)/2};Element.center=function(A,B,I){var E=$el(B);var F=Element.getDimensions(A);var C=F.width;var J=F.height;var H=Element.getDimensions(B).width;var D=(C-H)/2;E.style.position="absolute";E.style.left=D+"px";E.style.right=D+C+"px";if(I){E.style.top=I+"px"}else{var G=E.offsetHeight||parseInt(E.style.height)||200;E.style.top=(J-G)/2+"px"}};Element.findParentForm=function(A){var B=null;Element.ancestors(A).each(function(C){if(C.nodeName=="FORM"){B=C;throw $break}});return B};Element.showing=function(A,B){if(!Element.visible(A)){return false}B=B||A.ancestors();var C=true;B.each(function(D){if(!Element.visible(D)){C=false;throw $break}});return C};Element.findNonShowingAncestor=function(A,B){if(!Element.visible(A)){return A}B=B||A.ancestors();var C=null;B.each(function(D){if(!Element.visible(D)){C=D;throw $break}});return C};Element.setHeight=function(A,B){A=$el(A);A.style.height=B+"px"};Element.setWidth=function(B,A){B=$el(B);B.style.width=A+"px"};Element.setTop=function(B,A){B=$el(B);B.style.top=A+"px"};Element.isVisible=function(A){return A.style.visibility!="hidden"&&A.style.display!="none"};Element.ensureVisible=function(D){D=$el(D);Position.prepare();var H=Position.cumulativeOffset(D);var F=Element.getDocumentSize();var I=Element.getPageScroll();var A=I+F[3];var B=H[1]>=I+25;var E=H[1]<=A-25;var C=(B&&E);if(!C){var G=Math.max(0,H[1]-30);$$w.scrollTo(0,G)}};Element.isDisabled=function(A){A=$el(A);return(A&&(A.disabled||A.getAttribute("disabled")=="true"))};$$o.extend(Event,{getEvent:function(A){A=A||$$w.event;return A?typeof (A.inspect)=="function"?A:Event.extend(A):null},isEventObject:function(A){A=this.getEvent(A);if(A){if(typeof (A.cancelBubble)!="undefined"&&typeof (A.qualifier)!="undefined"){return true}if(typeof (A.stopPropagation)!="undefined"&&typeof (A.preventDefault)!="undefined"){return true}}return false},getKeyCode:function(B){var A;if(B){if(typeof (B.keyCode)!="undefined"){A=B.keyCode}else{if(typeof (B.which)!="undefined"){A=B.which}}}else{A=$$w.event.keyCode}return A},isKey:function(B,A){return Event.getKeyCode(B)==A},isEscapeKey:function(A){return Event.isKey(A,Event.KEY_ESC)||Event.isKey(A,A.DOM_VK_ESCAPE)},isEnterKey:function(A){return Event.isKey(A,Event.KEY_RETURN)||Event.isKey(A,A.DOM_VK_ENTER)},isSpaceBarKey:function(A){return Event.isKey(A,Event.KEY_SPACEBAR)||Event.isKey(A,A.DOM_VK_SPACE)},isPageUpKey:function(A){return Event.isKey(A,Event.KEY_PAGEUP)||Event.isKey(A,A.DOM_VK_PAGE_UP)},isPageDownKey:function(A){return Event.isKey(A,Event.KEY_PAGEDOWN)||Event.isKey(A,A.DOM_VK_PAGE_DOWN)},isHomeKey:function(A){return Event.isKey(A,Event.KEY_HOME)||Event.isKey(A,A.DOM_VK_HOME)},isEndKey:function(A){return Event.isKey(A,Event.KEY_END)||Event.isKey(A,A.DOM_VK_END)},isDeleteKey:function(A){return Event.isKey(A,Event.KEY_DELETE)||Event.isKey(A,A.DOM_VK_DELETE)},isLeftKey:function(A){return Event.isKey(A,Event.KEY_LEFT)||Event.isKey(A,A.DOM_VK_LEFT)},isRightKey:function(A){return Event.isKey(A,Event.KEY_RIGHT)||Event.isKey(A,A.DOM_VK_RIGHT)},KEY_SPACEBAR:0,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_END:35,KEY_HOME:36,KEY_DELETE:46});Appcelerator.History={};Appcelerator.History.changeListeners=[];Appcelerator.History.currentState=false;Appcelerator.History.onChange=function(A){Appcelerator.History.changeListeners.push(A)};Appcelerator.History.go=function(A){$$d.location.hash=A};Appcelerator.History.fireChange=function(C){if(C&&C.charAt(0)=="#"){C=C.substring(1)}if(C===""){C=null}if(Appcelerator.History.currentState!=C){Appcelerator.History.currentState=C;var B={state:C};for(var D=0;D<Appcelerator.History.changeListeners.length;D++){var A=Appcelerator.History.changeListeners[D];A(C,B)}}};if($$AB.isIE){Appcelerator.History.loadIE=function(){var C=$$d.createElement("iframe");C.id="app_hist_frame";C.style.position="absolute";C.style.left="-10px";C.style.top="-10px";C.style.width="1px";C.style.height="1px";C.src="javascript:false";$$d.body.appendChild(C);var E=$el("app_hist_frame");var A=null;var D=null;var B=false;setInterval(function(){var G=E.contentWindow.document;if(!G){return }A=G.getElementById("state");var H=$$d.location.hash;if(H!==B){B=H;G.open();G.write('<html><body><div id="state">'+H+"</div></body></html>");G.close();Appcelerator.History.fireChange(H)}else{if(A){var F=A.innerText;if(D!=F){D=F;if(F==null||F===""){if($$d.location.hash){B="#";$$d.location.hash="";Appcelerator.History.fireChange("#")}}else{if(F!=$$d.location.hash){$$d.location.hash=F;Appcelerator.History.fireChange($$d.location.hash)}}}}else{if(B){B=false}}}},50)}}$$AC.afterDocumentCompile(function(){if($$AB.isIE){Appcelerator.History.loadIE()}else{if($$AC.isCompiledMode){return }else{counter=history.length;hash=null;setInterval(function(){var A;var B;A=$$d.location.hash;B=history.length;if(A!==hash){hash=A;counter=B;Appcelerator.History.fireChange(A)}else{if(B!==counter){hash=A;counter=B;Appcelerator.History.fireChange(A)}}},50)}}});$$AU.IdleManager=Class.create();$$AU.IdleManager={IDLE_TIME:60000,timestamp:null,activeListeners:[],idleListeners:[],idle:false,started:false,install:function(){if(this.started){return }this.started=true;this.event=this.onActivity.bind(this);this.timestamp=new Date().getTime();Event.observe($$w.document,"keypress",this.event,false);Event.observe($$w.document,"mousemove",this.event,false);var A=this;Event.observe(window,"unload",function(){Event.stopObserving($$w.document,"keypress",A.event,false);Event.stopObserving($$w.document,"mousemove",A.event,false);A.event=null},false);this.startTimer()},startTimer:function(){this.stopTimer();this.timer=setInterval(this.onTimer.bind(this),500)},stopTimer:function(){if(this.timer){clearInterval(this.timer);this.timer=0}},onTimer:function(){if(this.isIdle()){this.stopTimer();this.idle=true;if(this.idleListeners.length>0){this.idleListeners.each(function(A){A.call(A)})}}},registerIdleListener:function(A){$$AU.IdleManager.install();this.idleListeners.push(A)},unregisterIdleListener:function(A){this.idleListeners.remove(A)},registerActiveListener:function(A){$$AU.IdleManager.install();this.activeListeners.push(A)},unregisterActiveListener:function(A){this.activeListeners.remove(A)},isIdle:function(){return this.getIdleTimeInMS()>=this.IDLE_TIME},getIdleTimeInMS:function(){return(new Date().getTime()-this.timestamp)},onActivity:function(){this.timestamp=new Date().getTime();if(this.idle){this.idle=false;if(this.activeListeners.length>0){this.activeListeners.each(function(A){A.call(A)})}this.startTimer()}return true}};if($$AB.isIE6){try{$$d.execCommand("BackgroundImageCache",false,true)}catch(e){}$$AB.buildIEImage=function(F,B,J,A){var G=(F.id)?"id='"+F.id+"' ":"";var I=(F.className)?"class='"+F.className+"' ":"";var E=(F.title)?"title='"+F.title+"' ":"title='"+F.alt+"' ";var H="display:inline-block;"+F.style.cssText;if(F.align=="left"){H="float:left;"+H}if(F.align=="right"){H="float:right;"+H}if(F.parentElement&&F.parentElement.href){H="cursor:hand;"+H}var C="<img "+G+I+E;var D="width:"+B+"px; height:"+J+"px;";C+=' style="'+D+H+";filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+(A||F.src)+"', sizingMethod='image');\" src='"+Appcelerator.ImagePath+"blank_1x1.gif' />";return C};$$d.getElementsByTagNameNS=function(G,B){var C=$A($$d.getElementsByTagName("*"));if(G=="http://www.w3.org/1999/xhtml"){G=""}var E=[];for(var F=0,A=C.length;F<A;F++){var D=C[F];if(D.tagUrn==G&&(B=="*"||D.nodeName==B)){E.push(D)}}return E};$$AB.fixBackgroundPNG=function(B){if(B.style.backgroundImage.indexOf("blank_1x1.gif")>0){B.style.backgroundImage=""}B.style.filter="";var A=B.currentStyle.backgroundImage;var D=A.substring(5,A.length-2);var C=B.currentStyle.backgroundRepeat=="no-repeat"?"image":"scale";B.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+D+"', sizingMethod='"+C+"')";B.style.backgroundImage="url("+Appcelerator.ImagePath+"blank_1x1.gif)"};$$AB.fixImage=function(C,F){C=$el(C);F=F||C.src;if($$AB.isIE6&&F){var B=F.toUpperCase();if(B.substring(B.length-3,B.length)=="PNG"){var A=C.height,D=C.width;if(!A||!D){var E=new Image();E.onload=function(){C.outerHTML=$$AB.buildIEImage(C,E.width,E.height,F.trim())};E.src=F}else{C.outerHTML=$$AB.buildIEImage(C,D,A,F.trim())}}}};$$AB.fixImageIssues=function(){if($$AB.isIE6){for(var A=$$d.all.length-1,B=null;(B=$$d.all[A]);A--){if(B.currentStyle.backgroundImage.match(/(\.png)|(blank_1x1\.gif)/i)!=null){$$AB.fixBackgroundPNG(B)}else{if(B.nodeName=="IMG"){$$AB.fixImage(B)}}}}};$$AR.onload($$AB.fixImageIssues)}else{$$AB.fixImageIssues=Prototype.K}$$AU.IFrame={fetch:function(D,C,B,A){setTimeout(function(){A=(A==null)?false:A;var E="frame_"+new Date().getTime()+"_"+Math.round(Math.random()*99);var H=$$d.createElement("iframe");$$AC.setElementId(H,E);if(!$$AB.isFirefox){H.setAttribute("name",E)}if(D.indexOf("/")==0){H.setAttribute("src",D)}else{H.setAttribute("src",Appcelerator.DocumentPath+D)}H.style.position="absolute";H.style.width=H.style.height=H.borderWidth="1px";H.style.left="-50px";H.style.top="-50px";var G=$$d.body.appendChild(H);if($$w.frames&&$$w.frames[E]){G=$$w.frames[E]}G.name=E;var F={iframe:G,frameid:E,onload:C,removeOnLoad:(B==null)?true:B,src:D,copyContent:A};if(!$$AB.isFirefox){setTimeout($$AU.IFrame.checkIFrame.bind(F),10)}else{G.onload=$$AU.IFrame.doIFrameLoad.bind(F)}},0)},monitor:function(C,B){var A={iframe:C,frameid:C.id,onload:B,removeOnLoad:false};if(!$$AB.isFirefox){setTimeout($$AU.IFrame.checkIFrame.bind(A),10)}else{C.onload=$$AU.IFrame.doIFrameLoad.bind(A)}},doIFrameLoad:function(){var C=this.iframe.contentDocument||this.iframe.document;var A=C.documentElement.getElementsByTagName("body")[0];if($$AB.isSafari&&$$AB.isWindows&&A.childNodes.length==0){$$AU.IFrame.fetch(this.src,this.onload,this.removeOnLoad);return }if(this.copyContent){var E=$$d.createElement("div");$$AU.IFrame.loadStyles(C.documentElement);var D=$$d.createElement("div");D.innerHTML=A.innerHTML;E.appendChild(D);this.onload(E)}else{this.onload(A)}if(this.removeOnLoad){var B=this.frameid;if($$AB.isFirefox){setTimeout(function(){Element.remove(B)},50)}else{Element.remove(B)}}},checkIFrame:function(){var B=this.iframe.contentDocument||this.iframe.document;var A=B.readyState;if(A=="complete"||(!$$d.getElementById&&A=="interactive")){$$AU.IFrame.doIFrameLoad.call(this)}else{setTimeout($$AU.IFrame.checkIFrame.bind(this),10)}},loadStyles:function(B){for(var A=0;A<B.childNodes.length;A++){var E=B.childNodes[A];if(E.nodeName=="STYLE"){if($$AB.isIE){var C=$$d.createStyleSheet();C.cssText=E.styleSheet.cssText}else{var C=$$d.createElement("style");C.setAttribute("type","text/css");try{C.appendChild($$d.createTextNode(E.innerHTML))}catch(F){C.cssText=E.innerHTML}$$AR.HeadElement.appendChild(C)}}else{if(E.nodeName=="LINK"){var D=$$d.createElement("link");D.setAttribute("type",E.type);D.setAttribute("rel",E.rel);D.setAttribute("href",E.getAttribute("href"));$$AR.HeadElement.appendChild(D)}}$$AU.IFrame.loadStyles(E)}}};$$AU.EventBroadcaster=Class.create();$$o.extend($$AU.EventBroadcaster.prototype,{listeners:[],addListener:function(A){this.listeners.push(A)},removeListener:function(A){if(!this.listeners){return false}return this.listeners.remove(A)},dispose:function(){if(this.listeners){this.listeners.clear()}},fireEvent:function(){if(!this.listeners||this.listeners.length==0){if ($$l.debugEnabled) $D(this+" not firing event: registered no listeners");return }var B=$A(arguments);if(undefined==B||0==B.length){throw"fire event not correct for "+this+", requires at least a event name parameter"}var A=B.shift();var C=A.charAt(0).toUpperCase();var D="on"+C+A.substring(1);if ($$l.debugEnabled) $D(this+" firing event: "+D+", listeners: "+this.listeners.length);this.listeners.each(function(F){var E=F[D];if(E){E.apply(F,B)}else{if(typeof (F)=="function"){F.apply(F,B)}}})}});$$AU.KeyManager=Class.create();$$o.extend($$AU.KeyManager,{monitors:[],KEY_ENTER:1,KEY_ESCAPE:2,KEY_SPACEBAR:3,disabled:false,installed:false,toString:function(){return"[$$AU.KeyManager]"},disable:function(){this.disabled=true},enable:function(){this.disabled=false},install:function(){this.installed=true;this.keyPressFunc=this.onkeypress.bindAsEventListener(this);$$d.body.onkeypress=this.keyPressFunc;$$AR.onunload(this.dispose.bind(this))},dispose:function(){$$d.body.onkeypress=null;this.keyPressFunc=null;var A=this;this.monitors.each(function(B){A.removeHandler(B[0],B[1])});this.monitors=null},removeHandler:function(H,A){if(A){var C=A["_focusHandler_"+H];var B=A["_blurHandler_"+H];if(C){Event.stopObserving(A,"focus",C,false);try{delete A["_focusHandler_"+H]}catch(I){}}if(B){Event.stopObserving(A,"blur",B,false);try{delete A["_blurHandler_"+H]}catch(I){}}}if(this.monitors.length>0){var J=null;for(var F=0,D=this.monitors.length;F<D;F++){var G=this.monitors[F];if(G[0]==H&&G[1]==A){J=G;break}}if(J){this.monitors.remove(J)}}},installHandler:function(D,C,E){if(!this.installed){this.install.bind(this)}var B=this;this.removeHandler(D,C);var G=[D,C,E];if(C){var A=function(H){H=Event.getEvent(H);C.focused=true;B.monitors.remove(G);B.monitors.push(G);return true};var F=function(H){H=Event.getEvent(H);C.focused=false;B.monitors.remove(G);return true};C["_focusHandler_"+D]=A;C["_blurHandler_"+D]=F;Event.observe(C,"focus",A,false);Event.observe(C,"blur",F,false)}else{this.monitors.push(G)}},onkeypress:function(E){if(this.monitors.length>0&&!this.disabled){E=Event.getEvent(E);var C=false;for(var F=0,B=this.monitors.length;F<B;F++){var A=this.monitors[F];if((Event.isEnterKey(E)&&A[0]==$$AU.KeyManager.KEY_ENTER)||(Event.isEscapeKey(E)&&A[0]==$$AU.KeyManager.KEY_ESCAPE)||(Event.isSpaceBarKey(E)&&A[0]==$$AU.KeyManager.KEY_SPACEBAR)){var D=Event.element(E);if(A[1]==null||D==A[1]){A[2](E);C=true;break}}}if(C){Event.stop(E);return false}}return true}});$$AR.onload($$AU.KeyManager.install.bind($$AU.KeyManager));$$AL.currentLanguage="en";$$AL.LanguageMap={};$$AL.addLanguageBundle=function(C,A,B){B=B==null?$H():typeof (B.get)=="function"?B:$H(B);$$AL.LanguageMap["language_"+C]={"map":B,"display":A}};$$AL.updateLanguageBundle=function(D,B,C){C=C==null?$H():typeof (C.get)=="function"?C:$H(C);var A=$$AL.LanguageMap["language_"+D];if(!A){$$AL.addLanguageBundle(D,B,C)}else{A.map=A.map.merge(C)}};$$AL.getLanguages=function(){var B=[];for(var A in $$AL.LanguageMap){if(A.startsWith("language_")){B.push({id:A.substring(9),name:$$AL.LanguageMap[A].display})}}return B};$$AL.set=function(A,B,D){D=(D==null)?$$AL.currentLanguage:D;var C=$$AL.LanguageMap["language_"+D];if(!C){throw"language bundle not found for language: "+D}C.set(A,B)};$$AL.get=function(B,D,E){E=(E==null)?$$AL.currentLanguage:E;var A=$$AL.LanguageMap["language_"+E];if(A&&A.map){var C=A.map.get(B);return C||D}return D};$$AL.compiledTemplates={};$$AL.getWithFormat=function(B,D,F,A){F=(F==null)?$$AL.currentLanguage:F;var E=B+":"+F;var G=$$AL.compiledTemplates[E];if(!G){var C=$$AL.get(B,D,F);G=$$AC.compileTemplate(C);$$AL.compiledTemplates[E]=G}return G.call(G,A)};$$AL.supportedTags=["div","span","input","a","td","select","option","li","h1","h2","h3","h4","ol","legend"];$$AL.registerTag=function(A){if($$AL.supportedTags.indexOf(A)==-1){$$AL.supportedTags.push(A)}};$$AL.unregisterTag=function(A){var B=$$AL.supportedTags.indexOf(A);if(B!=-1){$$AL.supportedTags.removeAt(B)}};$$AL.addLanguageBundle("en","English",{});$$AU.MD5={hexcase:0,b64pad:"",chrsz:8,hex_md5:function(A){return this.binl2hex(this.core_md5(this.str2binl(A),A.length*this.chrsz))},b64_md5:function(A){return this.binl2b64(this.core_md5(this.str2binl(A),A.length*this.chrsz))},str_md5:function(A){return this.binl2str(this.core_md5(this.str2binl(A),A.length*this.chrsz))},hex_hmac_md5:function(A,B){return this.binl2hex(this.core_hmac_md5(A,B))},b64_hmac_md5:function(A,B){return this.binl2b64(this.core_hmac_md5(A,B))},str_hmac_md5:function(A,B){return this.binl2str(this.core_hmac_md5(A,B))},md5_vm_test:function(){return this.hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"},core_md5:function(K,F){K[F>>5]|=128<<((F)%32);K[(((F+64)>>>9)<<4)+14]=F;var J=1732584193;var I=-271733879;var H=-1732584194;var G=271733878;for(var C=0;C<K.length;C+=16){var E=J;var D=I;var B=H;var A=G;J=this.md5_ff(J,I,H,G,K[C+0],7,-680876936);G=this.md5_ff(G,J,I,H,K[C+1],12,-389564586);H=this.md5_ff(H,G,J,I,K[C+2],17,606105819);I=this.md5_ff(I,H,G,J,K[C+3],22,-1044525330);J=this.md5_ff(J,I,H,G,K[C+4],7,-176418897);G=this.md5_ff(G,J,I,H,K[C+5],12,1200080426);H=this.md5_ff(H,G,J,I,K[C+6],17,-1473231341);I=this.md5_ff(I,H,G,J,K[C+7],22,-45705983);J=this.md5_ff(J,I,H,G,K[C+8],7,1770035416);G=this.md5_ff(G,J,I,H,K[C+9],12,-1958414417);H=this.md5_ff(H,G,J,I,K[C+10],17,-42063);I=this.md5_ff(I,H,G,J,K[C+11],22,-1990404162);J=this.md5_ff(J,I,H,G,K[C+12],7,1804603682);G=this.md5_ff(G,J,I,H,K[C+13],12,-40341101);H=this.md5_ff(H,G,J,I,K[C+14],17,-1502002290);I=this.md5_ff(I,H,G,J,K[C+15],22,1236535329);J=this.md5_gg(J,I,H,G,K[C+1],5,-165796510);G=this.md5_gg(G,J,I,H,K[C+6],9,-1069501632);H=this.md5_gg(H,G,J,I,K[C+11],14,643717713);I=this.md5_gg(I,H,G,J,K[C+0],20,-373897302);J=this.md5_gg(J,I,H,G,K[C+5],5,-701558691);G=this.md5_gg(G,J,I,H,K[C+10],9,38016083);H=this.md5_gg(H,G,J,I,K[C+15],14,-660478335);I=this.md5_gg(I,H,G,J,K[C+4],20,-405537848);J=this.md5_gg(J,I,H,G,K[C+9],5,568446438);G=this.md5_gg(G,J,I,H,K[C+14],9,-1019803690);H=this.md5_gg(H,G,J,I,K[C+3],14,-187363961);I=this.md5_gg(I,H,G,J,K[C+8],20,1163531501);J=this.md5_gg(J,I,H,G,K[C+13],5,-1444681467);G=this.md5_gg(G,J,I,H,K[C+2],9,-51403784);H=this.md5_gg(H,G,J,I,K[C+7],14,1735328473);I=this.md5_gg(I,H,G,J,K[C+12],20,-1926607734);J=this.md5_hh(J,I,H,G,K[C+5],4,-378558);G=this.md5_hh(G,J,I,H,K[C+8],11,-2022574463);H=this.md5_hh(H,G,J,I,K[C+11],16,1839030562);I=this.md5_hh(I,H,G,J,K[C+14],23,-35309556);J=this.md5_hh(J,I,H,G,K[C+1],4,-1530992060);G=this.md5_hh(G,J,I,H,K[C+4],11,1272893353);H=this.md5_hh(H,G,J,I,K[C+7],16,-155497632);I=this.md5_hh(I,H,G,J,K[C+10],23,-1094730640);J=this.md5_hh(J,I,H,G,K[C+13],4,681279174);G=this.md5_hh(G,J,I,H,K[C+0],11,-358537222);H=this.md5_hh(H,G,J,I,K[C+3],16,-722521979);I=this.md5_hh(I,H,G,J,K[C+6],23,76029189);J=this.md5_hh(J,I,H,G,K[C+9],4,-640364487);G=this.md5_hh(G,J,I,H,K[C+12],11,-421815835);H=this.md5_hh(H,G,J,I,K[C+15],16,530742520);I=this.md5_hh(I,H,G,J,K[C+2],23,-995338651);J=this.md5_ii(J,I,H,G,K[C+0],6,-198630844);G=this.md5_ii(G,J,I,H,K[C+7],10,1126891415);H=this.md5_ii(H,G,J,I,K[C+14],15,-1416354905);I=this.md5_ii(I,H,G,J,K[C+5],21,-57434055);J=this.md5_ii(J,I,H,G,K[C+12],6,1700485571);G=this.md5_ii(G,J,I,H,K[C+3],10,-1894986606);H=this.md5_ii(H,G,J,I,K[C+10],15,-1051523);I=this.md5_ii(I,H,G,J,K[C+1],21,-2054922799);J=this.md5_ii(J,I,H,G,K[C+8],6,1873313359);G=this.md5_ii(G,J,I,H,K[C+15],10,-30611744);H=this.md5_ii(H,G,J,I,K[C+6],15,-1560198380);I=this.md5_ii(I,H,G,J,K[C+13],21,1309151649);J=this.md5_ii(J,I,H,G,K[C+4],6,-145523070);G=this.md5_ii(G,J,I,H,K[C+11],10,-1120210379);H=this.md5_ii(H,G,J,I,K[C+2],15,718787259);I=this.md5_ii(I,H,G,J,K[C+9],21,-343485551);J=this.safe_add(J,E);I=this.safe_add(I,D);H=this.safe_add(H,B);G=this.safe_add(G,A)}return Array(J,I,H,G)},md5_cmn:function(F,C,B,A,E,D){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(C,F),this.safe_add(A,D)),E),B)},md5_ff:function(C,B,G,F,A,E,D){return this.md5_cmn((B&G)|((~B)&F),C,B,A,E,D)},md5_gg:function(C,B,G,F,A,E,D){return this.md5_cmn((B&F)|(G&(~F)),C,B,A,E,D)},md5_hh:function(C,B,G,F,A,E,D){return this.md5_cmn(B^G^F,C,B,A,E,D)},md5_ii:function(C,B,G,F,A,E,D){return this.md5_cmn(G^(B|(~F)),C,B,A,E,D)},core_hmac_md5:function(C,F){var E=this.str2binl(C);if(E.length>16){E=this.core_md5(E,C.length*this.chrsz)}var A=Array(16),D=Array(16);for(var B=0;B<16;B++){A[B]=E[B]^909522486;D[B]=E[B]^1549556828}var G=this.core_md5(A.concat(this.str2binl(F)),512+F.length*this.chrsz);return this.core_md5(D.concat(G),512+128)},safe_add:function(A,D){var C=(A&65535)+(D&65535);var B=(A>>16)+(D>>16)+(C>>16);return(B<<16)|(C&65535)},bit_rol:function(A,B){return(A<<B)|(A>>>(32-B))},str2binl:function(D){var C=Array();var A=(1<<this.chrsz)-1;for(var B=0;B<D.length*this.chrsz;B+=this.chrsz){C[B>>5]|=(D.charCodeAt(B/this.chrsz)&A)<<(B%32)}return C},binl2str:function(C){var D="";var A=(1<<this.chrsz)-1;for(var B=0;B<C.length*32;B+=this.chrsz){D+=String.fromCharCode((C[B>>5]>>>(B%32))&A)}return D},binl2hex:function(C){var B=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";var D="";for(var A=0;A<C.length*4;A++){D+=B.charAt((C[A>>2]>>((A%4)*8+4))&15)+B.charAt((C[A>>2]>>((A%4)*8))&15)}return D},binl2b64:function(D){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var F="";for(var B=0;B<D.length*4;B+=3){var E=(((D[B>>2]>>8*(B%4))&255)<<16)|(((D[B+1>>2]>>8*((B+1)%4))&255)<<8)|((D[B+2>>2]>>8*((B+2)%4))&255);for(var A=0;A<4;A++){if(B*8+A*6>D.length*32){F+=this.b64pad}else{F+=C.charAt((E>>6*(3-A))&63)}}}return F}};if(!$$AB.isSafari){String.prototype.gsub=function(G,E){var A=[],F=this,C;if(typeof G=="string"){G=new RegExp(G,"g")}else{var B=(G.multiline?"m":"")+(G.ignoreCase?"i":"")+"g";G=new RegExp(G.source,B)}E=arguments.callee.prepareReplacement(E);var D=0;var C=G.exec(F);while(C){A.push(F.slice(D,C.index));D=G.lastIndex;A.push(String.interpret(E(C)));C=G.exec(F)}A.push(F.slice(D,F.length));return A.join("")};String.prototype.gsub.prepareReplacement=function(B){if($$o.isFunction(B)){return B}var A=new Template(B);return function(C){return A.evaluate(C)}}}$$AC.registerAttributeProcessor(["div","input","button"],"activators",{handle:function(B,A,I){if(I&&(B.nodeName=="DIV"||B.getAttribute("type")=="button"||B.nodeName=="BUTTON")){$$AC.addFieldSet(B,true);var E=I.split(",");if(E.length>0){var D=function(){var L=true;for(var N=0,K=E.length;N<K;N++){var M=$el(E[N]);var J=M.validatorValid;if(!J){L=false;break}}B.setAttribute("disabled",!L);B.disabled=!L;if(B.disabled&&B.onActivatorsDisable){B.onActivatorsDisable()}if(!B.disabled&&B.onActivatorsEnable){B.onActivatorsEnable()}};for(var G=0,F=E.length;G<F;G++){var C=E[G];var H=$el(C);if(!H){throw"syntax error: invalid field: "+C+" specified for activator on field: "+B.id}if(!$$AC.getFunction(H,"addValidationListener")){throw"syntax error: non-validator field: "+C+" specified for activator on field: "+B.id}$$AC.executeFunction(H,"addValidationListener",[D])}D()}}},metadata:{description:("")}});$$AC.registerAttributeProcessor("form","disablesubmit",{handle:function(B,C,D){if(D=="true"){var A=$$d.createElement("input");A.type="text";A.style.display="none";A.name="disablesubmit";B.appendChild(A)}},metadata:{description:("When set to true, then it will disable the form from auto-submit when a user hits enter.")}});$$AC.registerAttributeProcessor("div","draggable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();var E=new Draggable(B.id,A);$$AC.addTrash(B,function(){E.destroy()})}},metadata:{description:("Make this element draggable. Dragged elements can be dropped on a droppable.")}});$$AC.registerAttributeProcessor("div","droppable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();A.onHover=function(G){var F=B.hoverListeners;if(F&&F.length>0){for(var H=0;H<F.length;H++){var E=F[H];E.onHover(G)}}};A.onDrop=function(G){var F=B.dropListeners;if(F&&F.length>0){for(var H=0;H<F.length;H++){var E=F[H];E.onDrop(G)}}};Droppables.add(B.id,A);$$AC.addTrash(B,function(){Droppables.remove(B)})}},metadata:{description:("Make this element a possible drop target.")}});$$AC.registerAttributeProcessor("*","fieldset",{handle:function(A,B,C){if(C&&A.getAttribute("type")!="button"){$$AC.addFieldSet(A,false);$$AC.addTrash(A,function(){$$AC.removeFieldSet(A)})}},metadata:{description:("Groups fields together. Messages sent from an element with a <i>fieldset</i> will contain a payload built from all the elements in the fieldset.<br/>The keys of the payload will be the names (or, lacking names, the ids) of the fieldset elements and the payload values will be the result of $$AC.getInputFieldValue() on each element.")}});$$AC.Image={};if($$AB.isIE6){$$AC.registerAttributeProcessor("img","src",{handle:function(A,B,C){if(C){$$AB.fixImage(A,C)}}})}$$AC.registerAttributeProcessor("img","srcexpr",{handle:function(img,attribute,value){if(value){img.src=eval(String.unescapeXML(value));if($$AB.isIE6){$$AB.fixImage(img,img.src)}}}});$$AL.AttributeProcessor={handle:function(B,C,D){if(D){var A=$$AL.get(D);if(!A){$$l.error("couldn't find localization key for "+D);return }switch($$AC.getTagname(B)){case"select":B.options.length=0;for(var F=0;F<A.length;F++){var E=A[F];B.options[B.options.length]=new Option(E.value,E.id)}break;case"option":if(typeof A=="object"){B.text=A.value;B.value=A.id}else{B.value=B.text=A}break;case"input":B.value=A;break;default:B.innerHTML=A;break}}},metadata:{description:("Specify a language bundle key that will be used to lookup localized text for this element.")}};$$AC.registerAttributeProcessor($$AL.supportedTags,"langid",$$AL.AttributeProcessor);$$AC.registerAttributeProcessor("*","on",{handle:function(A,B,C){if(C){$$AC.parseOnAttribute(A)}},metadata:{description:("Contains a Web Expression: a mapping between event triggers and actions. Independent trigger/action pairs can be join with the <b>or</b> keyword.<br/> Multiple actions for a single trigger can be combined with the <b>and</b> keyword.<br/> ")}});$$AC.registerAttributeProcessor(["img"],"reflectable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();Reflection.add(B,A)}},metadata:{description:("Add reflection to any image across all browsers.")}});var Reflection={defaultHeight:0.5,defaultOpacity:0.5,add:function(D,O){Reflection.remove(D);doptions={"height":Reflection.defaultHeight,"opacity":Reflection.defaultOpacity};if(O){for(var I in doptions){if(!O[I]){O[I]=doptions[I]}}}else{O=doptions}try{var L=$$d.createElement("div");var B=D;var E=B.className.split(" ");var H="";for(j=0;j<E.length;j++){if(E[j]!="reflect"){if(H){H+=" "}H+=E[j]}}var J=Math.floor(B.height*O["height"]);var G=Math.floor(B.height*(1+O["height"]));var N=B.width;if($$d.all&&!$$w.opera){if(B.parentElement.tagName=="A"){var L=$$d.createElement("a");L.href=B.parentElement.href}L.className=H;B.className="reflected";L.style.cssText=B.style.cssText;B.style.cssText="vertical-align: bottom";var F=$$d.createElement("img");F.src=B.src;F.style.width=N+"px";F.style.display="block";F.style.height=B.height+"px";F.style.marginBottom="-"+(B.height-J)+"px";F.style.filter="flipv progid:DXImageTransform.Microsoft.Alpha(opacity="+(O["opacity"]*100)+", style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy="+(O["height"]*100)+")";L.style.width=N+"px";L.style.height=G+"px";B.parentNode.replaceChild(L,B);L.appendChild(B);L.appendChild(F)}else{var C=$$d.createElement("canvas");if(C.getContext){L.className=H;B.className="reflected";L.style.cssText=B.style.cssText;B.style.cssText="vertical-align: bottom";var A=C.getContext("2d");C.style.height=J+"px";C.style.width=N+"px";C.height=J;C.width=N;L.style.width=N+"px";L.style.height=G+"px";B.parentNode.replaceChild(L,B);L.appendChild(B);L.appendChild(C);A.save();A.translate(0,D.height-1);A.scale(1,-1);A.drawImage(D,0,0,N,D.height);A.restore();A.globalCompositeOperation="destination-out";var M=A.createLinearGradient(0,0,0,J);M.addColorStop(1,"rgba(255, 255, 255, 1.0)");M.addColorStop(0,"rgba(255, 255, 255, "+(1-O["opacity"])+")");A.fillStyle=M;if($$n.appVersion.indexOf("WebKit")!=-1){A.fill()}else{A.fillRect(0,0,N,J*2)}}}}catch(K){}},remove:function(A){if(A.className=="reflected"){A.className=A.parentNode.className;A.parentNode.parentNode.replaceChild(A,A.parentNode)}}};$$AC.registerAttributeProcessor(["div","img","table"],"resizable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();A.resize=function(G){var F=B.resizeListeners;if(F&&F.length>0){for(var H=0;H<F.length;H++){var E=F[H];E.onResize(G)}}};B.resizable=new Resizeable(B.id,A);$$AC.addTrash(B,function(){B.resizable.destroy()})}},metadata:{description:("")}});$$AC.SelectableGroups={};$$AC.retainedWidgetAttributes.push("selectable");$$AC.wireSelectable=function(G,K){G=$el(G);var A=K;var D=false;var J=A.split(",");if(J.length>1){D=J[1]=="multiselect"}var B=G.id;var M=G.getAttribute("supressAutoStyles")=="true";var F=$$AC.SelectableGroups[A];if(!F){var L=D?[]:null;F={selected:L,members:[]};$$AC.SelectableGroups[A]=F}var E=function(O,P,Q,N){Q=Q||0;if(!M){if(P){O.setAttribute("selected","true");Element.addClassName(O,"selected")}else{O.removeAttribute("selected");Element.removeClassName(O,"selected")}}$$AC.executeFunction(O,"selected",[P,Q,N])};for(var I=0,H=G.childNodes.length;I<H;I++){var C=G.childNodes[I];if(C&&C.nodeType&&C.nodeType==1){(function(){var O=$$AC.getAndEnsureId(C);F.members.push(O);var N={};N.element=C;C.app_selectable=true;var Q=function(W,a){W=Event.getEvent(W);var X=this.element;if(W){var Z=Event.element(W);if(Z==this.element){if(W._selectedEventSeen){return }W._selectedEventSeen=true}else{var T=Z.parentNode;while(T&&T!=$$d.body){if(T.app_selectable){X=T;if(W._selectedEventSeen){return }if(X==F.selected){return }W._selectedEventSeen=true;break}else{T=T.parentNode}}}}a=a!=null?a==true:false;var R=false;var U=a;var S=(!a&&F.selected&&F.selected!=X);if(F.selected||(a&&!F.selected)){if(D){var Y=F.selected.indexOf(X.id);if(Y>=0){U=true;E(X,false,F.selected.length-1,U);F.selected.removeAt(Y);R=true;return }}else{var Z=F.selected;E(F.selected,false,S?1:0,true);R=true;F.selected=null;if(Z==X){return }}}if(!a){var V=1;if(D){F.selected.push(X.id);V=F.selected.length}else{F.selected=X}E(X,true,V,false);R=true}else{if(!R){var Y=F.selected.indexOf(X.id);if(Y>=0){E(X,false,F.selected.length-1,U);F.selected.removeAt(Y);R=true;return }$$l.warn("not removed on unselected "+X.id+",current="+F.selected.join(","))}}};var P=Q.bind(N);$$AC.attachFunction(C,"unselect",function(){Q.apply(this,[null,true])}.bind(N));$$AC.attachFunction(C,"select",function(){Q.apply(this,[null,false])}.bind(N));Event.observe(C,"click",P,false);$$AC.addTrash(C,function(){Q.apply(this,[null,true]);F.members.remove(this.element.id);Event.stopObserving(this.element,"click",P)}.bind(N))})()}}};$$AC.registerAttributeProcessor(["div","ul","ol","tr"],"selectable",{handle:function(A,B,C){if(C){$$AC.wireSelectable(A,C)}}});$$AC.registerAttributeProcessor(["div","ul","ol"],"sortable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();if(!A.tag){Element.cleanWhitespace(B);var E=B.down();if(E){A.tag=$$AC.getTagname(E)}}A.onUpdate=function(H){var G=B.updateListeners;if(G&&G.length>0){for(var I=0;I<G.length;I++){var F=G[I];F.onUpdate(H)}}};A.onChange=function(H){var G=B.changeListeners;if(G&&G.length>0){for(var I=0;I<G.length;I++){var F=G[I];F.onChange(H)}}};Sortable.create(B.id,A);$$AC.addTrash(B,function(){Sortable.destroy(B)})}}});$$AC.registerAttributeProcessor(["textarea","input","select"],"validator",{handle:function(H,B,J){if(J&&H.getAttribute("type")!="button"){var G=Appcelerator.Validator[J];if(!G){throw"syntax error: validator specified is not registered: "+J}var G=Appcelerator.Validator[J];var J=$$AC.getInputFieldValue(H,true,true);H.validatorValid=G(J,H)||false;var D=H.getAttribute("decorator");var F=null,K=null;if(D){F=Appcelerator.Decorator[D];if(!F){throw"syntax error: decorator specified is not registered: "+D}K=F?H.getAttribute("decoratorId"):null}var A=null;var E=0;var C=function(){E=0;$$AC.executeFunction(H,"revalidate")};$$AC.installChangeListener(H,function(){if(A){clearTimeout(A);A=null}if(E++<10){A=setTimeout(C,100)}else{C()}return true});var I=[];$$AC.attachFunction(H,"revalidate",function(){var O=$$AC.getInputFieldValue(H,true,true);var M=G(O,H);var Q=M==H.validatorValid;H.validatorValid=M;if(F){F.apply(Appcelerator.Decorator,[H,H.validatorValid,K])}if(Q){return M}if(I.length>0){for(var P=0,L=I.length;P<L;P++){var N=I[P];N.apply(N,[H,H.validatorValid])}}return H.validatorValid});$$AC.attachFunction(H,"removeValidationListener",function(M){var L=I.indexOf(M);if(L>=0){I.removeAt(L)}});$$AC.attachFunction(H,"addValidationListener",function(L){I.push(L)});$$AC.addTrash(H,function(){$$AC.removeChangeListener(H);I=null});$$AC.executeFunction(H,"revalidate")}}});$$AU.UUID={dateSeed:new Date().getTime(),generateNewId:function(){var B=Math.round(9999999999*Math.random());var A=Math.round(9999999999*Math.random());var C=Math.round(this.dateSeed*Math.random());return B+"-"+A+"-"+C}};$$o.extend(Appcelerator.Validator,{toString:function(){return"[Appcelerator.Validator]"},uniqueId:0,names:[],addValidator:function(A,B){Appcelerator.Validator[A]=B;$$AV.names.push(A)},URI_REGEX:/(ftp|http|https|file):(\/){1,2}(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,ALPHANUM_REGEX:/^[0-9a-zA-Z]+$/,DECIMAL_REGEX:/^[-]?([1-9]{1}[0-9]{0,}(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|\.[0-9]{1,2})$/,EMAIL_REGEX:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,dtCh:"/",minYear:1000,maxYear:3000,stripCharsInBag:function(C,D){var B;var A="";for(B=0;B<C.length;B++){var E=C.charAt(B);if(D.indexOf(E)==-1){A+=E}}return A},daysInFebruary:function(A){return(((A%4==0)&&((!(A%100==0))||(A%400==0)))?29:28)},DaysArray:function(B){for(var A=1;A<=B;A++){this[A]=31;if(A==4||A==6||A==9||A==11){this[A]=30}if(A==2){this[A]=29}}return this}});(function(){var A=$$AV.addValidator;A("required",function(B){if(null==B){return false}if(typeof (B)=="boolean"){return B}B=""+B;return B.trim().length>0});A("email_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.EMAIL_REGEX.test(B)});A("email",function(B){return $$AV.EMAIL_REGEX.test(B)});A("fullname_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.fullname(B)});A("fullname",function(B){return((B.split(" ")).length>1)});A("noSpaces_optional",function(B){if(!B){return true}return $$AV.noSpaces(B)});A("noSpaces",function(B){if(!$$AV.required(B)){return false}return B.indexOf(" ")==-1});A("password_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.password(B)});A("password",function(B){return(B.length>=6)});A("number",function(B){if(!B||B.trim().length==0||B<0){return false}return $$AV.DECIMAL_REGEX.test(B)});A("number_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.number(B)});A("wholenumber_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.wholenumber(B)});A("wholenumber",function(C){if(!C||C<0){return false}for(var B=0;B<C.length;B++){var D=C.charAt(B);if(((D<"0")||(D>"9"))){return false}}return true});A("url_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.url(B)});A("url",function(B){return $$AV.URI_REGEX.test(B)});A("checked",function(B){return B||B=="on"});A("length",function(F,E){if(F){try{var D=parseInt(E.getAttribute("validatorMinLength")||"1");var B=parseInt(E.getAttribute("validatorMaxLength")||"999999");var C=F.length;return C>=D&&C<=B}catch(G){}}return false});A("alphanumeric_optional",function(C,B){if(!C||C.trim().length==0){return true}return $$AV.ALPHANUM_REGEX.test(C)==true});A("alphanumeric",function(C,B){return $$AV.ALPHANUM_REGEX.test(C)==true});A("date_optional",function(B){if(!B||B.trim().length==0){return true}return $$AV.date(B)});A("date",function(J){var B=$$AV.DaysArray(12);var I=J.indexOf($$AV.dtCh);var H=J.indexOf($$AV.dtCh,I+1);var G=J.substring(0,I);var C=J.substring(I+1,H);var D=J.substring(H+1);strYr=D;if(C.charAt(0)=="0"&&C.length>1){C=C.substring(1)}if(G.charAt(0)=="0"&&G.length>1){G=G.substring(1)}for(var F=1;F<=3;F++){if(strYr.charAt(0)=="0"&&strYr.length>1){strYr=strYr.substring(1)}}month=parseInt(G);day=parseInt(C);year=parseInt(strYr);if(I==-1||H==-1){return false}if(G.length<1||month<1||month>12){return false}if(C.length<1||day<1||day>31||(month==2&&day>$$AV.daysInFebruary(year))||day>B[month]){return false}if(D.length!=4||year==0||year<$$AV.minYear||year>$$AV.maxYear){return false}var E=month+"/"+day+"/"+year;if(J.indexOf(Appcelerator.dtCh,H+1)!=-1||$$AV.number($$AV.stripCharsInBag(E,$$AV.dtCh))==false){return false}return true})})();Appcelerator.Widget.register=function(A,B,C){$$AR.registerModule(A,B,C)};Appcelerator.Widget.registerWithJS=function(B,C,D,A){$$AR.registerModuleWithJS(B,C,D,A)};Appcelerator.Widget.registerModuleWithCommonJS=function(A,B,C){$$AR.registerModuleWithCommonJS(A,B,C)};Appcelerator.Widget.registerWidgetWithCommonJS=function(A,B,C){$$AR.registerModuleWithCommonJS(A,B,C)};Appcelerator.Widget.registerModuleWithJS=function(B,C,D,A){$$AR.registerModuleWithJS(B,C,D,A)};Appcelerator.Widget.registerWidgetWithJS=function(B,C,D,A){$$AR.registerModuleWithJS(B,C,D,A)};Appcelerator.Widget.loadWidgetCommonCSS=function(A,B){$$AR.loadModuleCommonCSS(A,B)};Appcelerator.Widget.requireCommonCSS=function(A,B){$$AR.requireCommonCSS(A,B)};Appcelerator.Widget.requireCommonJS=function(A,B){$$AR.requireCommonJS(A,B)};Appcelerator.Widget.queueRemoteLoadScriptWithDependencies=function(B,A){$$AR.queueRemoteLoadScriptWithDependencies(B,A)};Appcelerator.Widget.loadWidgetCSS=function(A,B){$$AR.loadModuleCSS(A,B)};Appcelerator.Widget.fireWidgetCondition=function(B,A,D){var F=$$AC.customConditionObservers[B][A];if(F){for(var E=0;E<F.length;E++){var J=F[E];params=J.params;var C=params?$$AC.getParameters(params,false):null;var H=(C)?$$o.toJSON(C):null;var G=$$AC.parseConditionCondition(H,D);var I;if(G){I=$$AC.makeConditionalAction(B,J.action,J.ifCond,D)}else{if(elseaction){I=$$AC.makeConditionalAction(B,J.elseAction,J.ifCond,D)}}$$AC.executeAfter(I,J.delay)}}};if(typeof (Appcelerator.Util)!="undefined"&&typeof ($$AU)=="undefined"){$$AU=Appcelerator.Util;$$AC=Appcelerator.Compiler;$$AV=Appcelerator.Validator;$$AD=Appcelerator.Decorator;$$AR=Appcelerator.Core;$$AM=Appcelerator.Module;$$AL=Appcelerator.Localization;$$AF=Appcelerator.Config;$$AB=Appcelerator.Browser}  ; if (typeof(jQuery)=='undefined'){$ = $el; $$w.$ = $el; $$ = $sl; $$w.$$ = $sl;}
